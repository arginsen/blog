<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="OcsZXBpQqAp8163-20wn3epncmCv_UBtqBLZmspy-NA">
  
  <title>ğŸŒŸ åç«¯ | MybatisPlus åŠŸèƒ½ä¸åº”ç”¨ | Arginsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="BackendMybatisPlus">
  
  
  
  
  <meta name="keywords" content="Backend,MybatisPlus">
<meta property="og:type" content="article">
<meta property="og:title" content="ğŸŒŸ åç«¯ | MybatisPlus åŠŸèƒ½ä¸åº”ç”¨">
<meta property="og:url" content="https://lixupeng.cn/blog/2024/01/10/2-backend-mybatisplus1/index.html">
<meta property="og:site_name" content="Arginsen&#39;s Blog">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://lixupeng.cn/blog/img/mybatisplus.jpg">
<meta property="og:updated_time" content="2025-07-31T15:44:36.271Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸŒŸ åç«¯ | MybatisPlus åŠŸèƒ½ä¸åº”ç”¨">
<meta name="twitter:image" content="https://lixupeng.cn/blog/img/mybatisplus.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Arginsen&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/blog/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/blog/css/style.css">

  <script src="/blog/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/blog/css/bootstrap.css">
  <link rel="stylesheet" href="/blog/css/fashion.css">
  <link rel="stylesheet" href="/blog/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  



<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/blog/" title="Arginsen&#39;s Blog" rel="home"> Arginsen&#39;s Blog </a>
            
          </h1>
          
          
            <div class="site-description">smells like teen spirit</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/">é¦–é¡µ</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/archives">å½’æ¡£</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/categories">åˆ†ç±»</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/about">å…³äº</a> </li>
                    
              </ul>
            </div>
          </nav>
      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-2-backend-mybatisplus1" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/blog/img/mybatisplus.jpg" rel="gallery_cme60mb4l005kcupu7555z8yx">
        <img src="/blog/img/mybatisplus.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      ğŸŒŸ åç«¯ | MybatisPlus åŠŸèƒ½ä¸åº”ç”¨
    </h1>
  

      </header>
      <footer class="entry-meta entry-tips">
        
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/blog/categories/notes/">notes</a>

        
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Backend/">Backend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/MybatisPlus/">MybatisPlus</a></li></ul>

        
	<span class="ico-date"></span>
	<a href="/blog/2024/01/10/2-backend-mybatisplus1/" class="article-date">
	  <time datetime="2024-01-09T16:00:00.000Z" itemprop="datePublished">ä¸€æœˆ 10, 2024</time>
	</a>

        <!-- æ·»åŠ å­—æ•°ç»Ÿè®¡ -->
        
          <span class="ico-fontcount"></span><span class="post-count">5.7kå­—</span>
        
      </footer>
    

    <div class="article-entry" itemprop="articleBody">
      
        <p><br><br><a id="more"></a></p>
<h1 id="JDBC-Java-Database-Connectivity"><a href="#JDBC-Java-Database-Connectivity" class="headerlink" title="JDBC (Java Database Connectivity)"></a>JDBC (Java Database Connectivity)</h1><p>JDBC æ˜¯é€šè¿‡ java è¿æ¥æ•°æ®åº“çš„ä¸€ç§æŠ€æœ¯ï¼Œé€è¿‡æ¯ä¸ªæ•°æ®åº“å¯¹åº”çš„ JDBC driver æ¥ä¸æ•°æ®åº“è¿æ¥ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ JDBC çš„ API æ¥å‘æŒ‡å®šçš„æ•°æ®åº“å‘é€æƒ³è¦æ‰§è¡Œçš„ SQL å‘½ä»¤ã€‚</p>
<h1 id="ORM-Object-Relational-Mapping"><a href="#ORM-Object-Relational-Mapping" class="headerlink" title="ORM (Object-Relational Mapping)"></a>ORM (Object-Relational Mapping)</h1><p>å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œä½¿ java å¯¹è±¡å’Œæ•°æ®åº“è¡¨å»ºç«‹æ˜ å°„å…³ç³»ï¼Œå¯ä»¥åœ¨å¼€å‘ç¨‹åºæ—¶æ— é¡»æ“ä½œè®¸å¤šç¹ççš„ SQL è¯­å¥ã€‚ä½†å¦‚æœå¯¹äºéœ€è¦åšå¤æ‚è¡¨æ“ä½œæ—¶ï¼Œåƒå¤šè¡¨ä¹‹é—´çš„ JOIN æ“ä½œæˆ–æŸ¥è¯¢ï¼Œç›¸æ¯”è¿˜æ˜¯ç›´æ¥ç”¨ SQL è¯­å¥æ–¹ä¾¿ã€‚</p>
<h1 id="JPA-Java-Persistence-API"><a href="#JPA-Java-Persistence-API" class="headerlink" title="JPA (Java Persistence API)"></a>JPA (Java Persistence API)</h1><p>JPA å°±æ˜¯ã€ŒJava æŒä¹…åŒ–çš„ APIã€ï¼ŒæŒä¹…åŒ–å³èµ„æ–™æ•°æ®â€å­˜å‚¨â€œä¸â€è¯»å–â€œçš„è¿‡ç¨‹ï¼Œé€šè¿‡ Java å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“çš„ APIã€‚å®é™…ä¸Š JPA æ˜¯ä¸€ç§ â€œæ˜ å°„å¯¹è±¡ä¸æŒä¹…å±‚ API çš„å®ç°æ–¹å¼â€ çš„è§„èŒƒï¼Œå¯ä»¥é€šè¿‡ JPA æ¥æ˜ å°„ ã€å¯¹è±¡çš„å­—æ®µã€‘ ä¸ ã€è¡¨çš„æ ä½ã€‘ ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"PRODUCT"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"NAME"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"REMAIN"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer remain;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* constructors ... */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* getter and setter ... */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¢å°ä¸€è‡´çš„ JPA è¦ç¯„æ™‚ï¼Œé–‹ç™¼è€…ä¹Ÿå°±å¯ä»¥éš¨æ™‚åˆ‡æ›æƒ³è¦ä½¿ç”¨çš„ ORM æ¡†æ¶äº†ã€‚</p>
<p>ä½¿ç”¨ JPA é‚„æœ‰ä¸€å€‹å¥½è™•ï¼Œé‚£å°±æ˜¯å¯ä»¥ä½¿ç”¨ JPQL (Java Persistence Query Language) çš„å‘½ä»¤èªå¥å‘è³‡æ–™åº«ä¸‹å‘½ä»¤èªå¥ï¼Œä½† JPQL èˆ‡ SQL æœ€å¤§çš„å·®ç•°åœ¨æ–¼ï¼š</p>
<ul>
<li>SQL åœ¨ä¸åŒçš„è³‡æ–™åº«ä¸­ï¼Œæœ‰ä¸åŒçš„ SQL å‘½ä»¤èªå¥</li>
<li>JPQL æ“ä½œçš„å°è±¡ä¸æ˜¯è‘—é‡åœ¨è³‡æ–™åº«ï¼Œè€Œæ˜¯è‘—é‡åœ¨ JPA çš„ Entity Object ä¸‹é¡ä¼¼ SQL çš„å‘½ä»¤èªå¥</li>
</ul>
<p>ä¹Ÿå°±æ˜¯èªª<strong>ç•¶ä½¿ç”¨ JPQL çš„æ™‚å€™ï¼Œä¸¦ä¸æœƒéš¨è‘—ä¸åŒçš„è³‡æ–™åº«è€Œéœ€è¦åšå°æ‡‰ SQL èªå¥ä¿®æ”¹</strong>ã€‚</p>
<p>ç›®å‰åœ¨ Java ä¸­ï¼Œç›¸å°å¸¸è¦‹æˆ–å¸¸ç”¨çš„ ORM æ¡†æ¶æœ‰ï¼š</p>
<p>Hibernate<br>Spring Data JPA<br>Open JPA<br>ç›®å‰åœ¨ Java ä¸­ï¼Œç›¸å°å¸¸è¦‹æˆ–å¸¸ç”¨çš„ ORM æ¡†æ¶æœ‰ï¼š</p>
<p>Hibernate<br>Spring Data JPA<br>Open JPA<br>jQQQ<br>GraghQL<br>MyBatis</p>
<p>ä¸»æµè¿˜æ˜¯ Mybatis æ›´é€šç”¨äº›ï¼Œæ“ä½œæ›´æ–¹ä¾¿</p>
<h1 id="MyBatis-ç®€å•-CRUD"><a href="#MyBatis-ç®€å•-CRUD" class="headerlink" title="MyBatis ç®€å• CRUD"></a>MyBatis ç®€å• CRUD</h1><h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2><p>application.yaml ä¸­é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">MySQL123</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.itheima:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss</span></span><br></pre></td></tr></table></figure>
<h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å®šä¹‰-Mapper"><a href="#å®šä¹‰-Mapper" class="headerlink" title="å®šä¹‰ Mapper"></a>å®šä¹‰ Mapper</h2><p>MybatisPlus æä¾›äº†ä¸€ä¸ªåŸºç¡€çš„ BaseMapper æ¥å£ï¼Œå…¶ä¸­å·²ç»å®ç°äº†å•è¡¨çš„ CRUD ã€‚</p>
<p>å­˜åœ¨ delete insert select update / deleteById selectById updateById ç­‰æ–¹æ³•ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬è‡ªå®šä¹‰çš„ Mapper åªè¦å®ç°äº†è¿™ä¸ª BaseMapperï¼Œå°±æ— éœ€è‡ªå·±å®ç°å•è¡¨CRUDäº†ã€‚</p>
<ul>
<li>BaseMapper<ul>
<li>delete(Wrapper<t>): int</t></li>
<li>deleteBatchlds(Collection&lt;?&gt;): int</li>
<li>deleteByld (Serializable): int</li>
<li>deleteByld (T): int</li>
<li>deleteByMap(Map&lt;String, Object&gt;): int</li>
<li>exists(Wrapper<t>): boolean</t></li>
<li>insert(T): int</li>
<li>selectBatchlds(Collection&lt;? extends Serializable&gt;): List<t></t></li>
<li>selectByld(Serializable): T</li>
<li>selectByMap(Map&lt;String, Object&gt;): List<t></t></li>
<li>selectCount(Wrapper<t>): Long</t></li>
<li>selectList(Wrapper<t>): List<t></t></t></li>
<li>selectMaps(Wrapper<t>): List&lt;Map&lt;String, Object&gt;&gt;</t></li>
<li>selectMapsPage(P, Wrapper<t>): P</t></li>
<li>selectObjs(Wrapper<t>): List<object></object></t></li>
<li>selectOne(Wrapper<t>): T</t></li>
<li>selectPage(P, Wrapper<t>): P</t></li>
<li>update(T, Wrapper<t>): int</t></li>
<li>updateByld (T): int</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šè‡ªå·±çš„å®ä½“ç±»ï¼ˆè¡¨åï¼‰â€”â€” æ³›å‹ä¸­çš„ User å°±æ˜¯ä¸æ•°æ®åº“å¯¹åº”çš„ PO</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MybatisPlus å°±æ˜¯æ ¹æ® PO å®ä½“çš„ä¿¡æ¯æ¥æ¨æ–­å‡ºè¡¨çš„ä¿¡æ¯ï¼Œä»è€Œç”Ÿæˆ SQL çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼š</p>
<ul>
<li>MybatisPlus ä¼šæŠŠ PO å®ä½“çš„ç±»åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨å</li>
<li>MybatisPlus ä¼šæŠŠ PO å®ä½“çš„æ‰€æœ‰å˜é‡åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨çš„å­—æ®µåï¼Œå¹¶æ ¹æ®å˜é‡ç±»å‹æ¨æ–­å­—æ®µç±»å‹</li>
<li>MybatisPlus ä¼šæŠŠåä¸º id çš„å­—æ®µä½œä¸ºä¸»é”®</li>
</ul>
<h2 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h2><h3 id="TableName"><a href="#TableName" class="headerlink" title="@TableName"></a>@TableName</h3><p>è¡¨åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName</span>(<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="TableId"><a href="#TableId" class="headerlink" title="@TableId"></a>@TableId</h3><p>ä¸»é”®æ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»ä¸­çš„ä¸»é”®å­—æ®µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName</span>(<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="TableField"><a href="#TableField" class="headerlink" title="@TableField"></a>@TableField</h3><p>æ™®é€šå­—æ®µæ³¨è§£</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸éœ€è¦ç»™å­—æ®µæ·»åŠ @TableFieldæ³¨è§£ï¼Œä¸€äº›ç‰¹æ®Šæƒ…å†µé™¤å¤–ï¼š</p>
<ul>
<li>æˆå‘˜å˜é‡åä¸æ•°æ®åº“å­—æ®µåä¸ä¸€è‡´</li>
<li>æˆå‘˜å˜é‡æ˜¯ä»¥ <code>isXXX</code> å‘½åï¼ŒæŒ‰ç…§ JavaBean çš„è§„èŒƒï¼ŒMybatisPlus è¯†åˆ«å­—æ®µæ—¶ä¼šæŠŠ is å»é™¤ï¼Œè¿™å°±å¯¼è‡´ä¸æ•°æ®åº“ä¸ç¬¦ã€‚</li>
<li>æˆå‘˜å˜é‡åä¸æ•°æ®åº“ä¸€è‡´ï¼Œä½†æ˜¯ä¸æ•°æ®åº“çš„å…³é”®å­—å†²çªã€‚ä½¿ç”¨ <code>@TableField</code> æ³¨è§£ç»™å­—æ®µåæ·»åŠ è½¬ä¹‰å­—ç¬¦ï¼š<code></code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName</span>(<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"is_married"</span>)</span><br><span class="line">    <span class="keyword">private</span> Boolean isMarried;</span><br><span class="line">    <span class="meta">@TableField</span>(<span class="string">"`concat`"</span>)</span><br><span class="line">    <span class="keyword">private</span> String concat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="MyBatisPlus-é…ç½®"><a href="#MyBatisPlus-é…ç½®" class="headerlink" title="MyBatisPlus é…ç½®"></a>MyBatisPlus é…ç½®</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.itheima.mp.domain.po</span> <span class="comment"># å®ä½“ç±»çš„åˆ«åæ‰«æåŒ…</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span> <span class="comment"># å…¨å±€idç±»å‹ä¸ºè‡ªå¢é•¿</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">"classpath*:/mapper/**/*.xml"</span> <span class="comment"># Mapper.xmlæ–‡ä»¶åœ°å€ï¼Œå½“å‰è¿™ä¸ªæ˜¯é»˜è®¤å€¼ã€‚</span></span><br></pre></td></tr></table></figure>
<p>MyBatisPlus ä¹Ÿæ”¯æŒæ‰‹å†™ SQL çš„ï¼Œè€Œ mapper æ–‡ä»¶çš„è¯»å–åœ°å€å¯ä»¥è‡ªå·±é…ç½®ï¼Œä¾‹å¦‚æ–°å»ºä¸€ä¸ª UserMapper.xml æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mp.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryById"</span> <span class="attr">resultType</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">        SELECT * FROM user WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="MyBatisPlus-Wrapper-ç¼–å†™-SQL-æ‹“å±•"><a href="#MyBatisPlus-Wrapper-ç¼–å†™-SQL-æ‹“å±•" class="headerlink" title="MyBatisPlus Wrapper ç¼–å†™ SQL æ‹“å±•"></a>MyBatisPlus Wrapper ç¼–å†™ SQL æ‹“å±•</h1><p>BaseMapper ä¸­çš„æ–¹æ³•æä¾› Wrapper æ³›å‹å¯¹è±¡çš„æŸ¥è¯¢ä½“ã€‚</p>
<ul>
<li>BaseMapper<ul>
<li>delete(Wrapper<t>): int</t></li>
<li>deleteBatchlds(Collection&lt;?&gt;): int</li>
<li>deleteByld (Serializable): int</li>
<li>deleteByld (T): int</li>
<li>deleteByMap(Map&lt;String, Object&gt;): int</li>
<li>exists(Wrapper<t>): boolean</t></li>
<li>insert(T): int</li>
<li>selectBatchlds(Collection&lt;? extends Serializable&gt;): List<t></t></li>
<li>selectByld(Serializable): T</li>
<li>selectByMap(Map&lt;String, Object&gt;): List<t></t></li>
<li>selectCount(Wrapper<t>): Long</t></li>
<li>selectList(Wrapper<t>): List<t></t></t></li>
<li>selectMaps(Wrapper<t>): List&lt;Map&lt;String, Object&gt;&gt;</t></li>
<li>selectMapsPage(P, Wrapper<t>): P</t></li>
<li>selectObjs(Wrapper<t>): List<object></object></t></li>
<li>selectOne(Wrapper<t>): T</t></li>
<li>selectPage(P, Wrapper<t>): P</t></li>
<li>update(T, Wrapper<t>): int</t></li>
<li>updateByld (T): int</li>
</ul>
</li>
</ul>
<h2 id="Wrapper-å®ç°å¤æ‚-SQL"><a href="#Wrapper-å®ç°å¤æ‚-SQL" class="headerlink" title="Wrapper å®ç°å¤æ‚ SQL"></a>Wrapper å®ç°å¤æ‚ SQL</h2><p>Wrapper å°±æ˜¯æ¡ä»¶æ„é€ çš„æŠ½è±¡ç±»ï¼ŒWrapper å°±æ˜¯æ¡ä»¶æ„é€ çš„æŠ½è±¡ç±»ã€‚Wrapper çš„å­ç±» AbstractWrapper æä¾›äº† where ä¸­åŒ…å«çš„æ‰€æœ‰æ¡ä»¶æ„é€ æ–¹æ³•ã€‚</p>
<p><strong>Wrapper æ˜¯æä¾›æŸ¥è¯¢æ¡ä»¶ï¼Œè€Œ Mapper åˆ™æ˜¯å¯¹åº”è‡ªå®šä¹‰çš„ SQL</strong></p>
<p>AbstractWrapper åŸºç¡€ä¸Šï¼Œåˆå¢åŠ äº†æŸ¥è¯¢ QueryWrapperã€æ›´æ–° UpdateWrapper ã€AbstractLambdaWrapper çš„å­ç±»æ–¹ä¾¿æ“ä½œã€‚</p>
<ul>
<li>AbstractWrapper<ul>
<li>getEntity): T Wrapper</li>
<li>setEntity(T): Children</li>
<li>getEntityClass): Class<t></t></li>
<li>setEntityClass(Class<t>): Children</t></li>
<li>allEq(boolean, Map&lt;R, V&gt;, boolean): Children</li>
<li>allEq(boolean, BiPredicate&lt;R, V&gt;, Map&lt;R, V&gt;, boolean): Children</li>
<li>eq (boolean, R, Object): Children</li>
<li>ne(boolean, R, Object): Children</li>
<li>gt(boolean, R, Object): Children</li>
<li>ge(boolean, R, Object): Children</li>
<li>It(boolean, R, Object): Children</li>
<li>le(boolean, R, Object): Children</li>
<li>like(boolean, R, Object): Children</li>
<li>notLike(boolean, R, Object): Children</li>
<li>likeLeft(boolean, R, Object): Children</li>
<li>likeRight(boolean, R, Object): Children</li>
<li>notLikeLeft(boolean, R, Object): Children</li>
<li>notLikeRight(boolean, R, Object): Children</li>
<li>between(boolean, R, Object, Object): Children</li>
<li>notBetween(boolean, R, Object, Object): Children</li>
<li>and (boolean, Consumer<children>): Children</children></li>
<li>or(boolean, Consumer<children>): Children</children></li>
<li>nested (boolean, Consumer<children>): Children</children></li>
<li>not(boolean, Consumer<children>): Children</children></li>
</ul>
</li>
</ul>
<h3 id="QueryWrapper"><a href="#QueryWrapper" class="headerlink" title="QueryWrapper"></a>QueryWrapper</h3><p>åˆ©ç”¨ Wrapper æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œå†åˆ©ç”¨ UserMapper çš„æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ã€æ›´æ–°</p>
<p>QueryWrapper åœ¨ AbstractWrapper çš„åŸºç¡€ä¸Šæ‹“å±•äº† select æ–¹æ³•ï¼Œå…è®¸æŒ‡å®šæŸ¥è¯¢å­—æ®µ</p>
<ul>
<li>QueryWrapper<ul>
<li>select(Stringâ€¦): QueryWrapper<t></t></li>
<li>select(List<string>): QueryWrapper<t></t></string></li>
<li>select(Class<t>, Predicate<tablefieldinfo>): QueryWrapper<t></t></tablefieldinfo></t></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢åå­—ä¸­å¸¦ c ï¼Œä½™é¢å¤§äº 1000 çš„ç”¨æˆ·</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testQueryWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name like "%o%" AND balance &gt;= 1000</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;()</span><br><span class="line">            .select(<span class="string">"id"</span>, <span class="string">"username"</span>, <span class="string">"info"</span>, <span class="string">"balance"</span>)</span><br><span class="line">            .like(<span class="string">"username"</span>, <span class="string">"c"</span>)</span><br><span class="line">            .ge(<span class="string">"balance"</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å…¶ä¸­ä¸€ä¸ªç”¨æˆ·çš„ä½™é¢ä¸º 800</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testUpdateByQueryWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name = "Jack"</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;().eq(<span class="string">"username"</span>, <span class="string">"Jack"</span>);</span><br><span class="line">    <span class="comment">// 2.æ›´æ–°æ•°æ®ï¼Œuserä¸­énullå­—æ®µéƒ½ä¼šä½œä¸ºsetè¯­å¥</span></span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setBalance(<span class="number">800</span>);</span><br><span class="line">    userMapper.update(user, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="UpdateWrapper"><a href="#UpdateWrapper" class="headerlink" title="UpdateWrapper"></a>UpdateWrapper</h3><p>userMapper.update() åŸºäº BaseMapper ä¸­çš„ update æ–¹æ³•æ›´æ–°æ—¶åªèƒ½ç›´æ¥èµ‹å€¼ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„éœ€æ±‚å°±éš¾ä»¥å®ç°ã€‚</p>
<p>UpdateWrapper åœ¨ AbstractWrapper çš„åŸºç¡€ä¸Šæ‹“å±•äº†ä¸€ä¸ª set æ–¹æ³•ï¼Œå…è®¸æŒ‡å®š SQL ä¸­çš„ SET éƒ¨åˆ†</p>
<ul>
<li>UpdateWrapper<ul>
<li>getSqlSet(): String</li>
<li>set(boolean, String, Object, String): UpdateWrapper<t></t></li>
<li>setSql(boolean, String): UpdateWrapper<t></t></li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼šæ›´æ–° id ä¸º 1,2,4 çš„ç”¨æˆ·çš„ä½™é¢ï¼Œæ‰£ 200ã€‚SET çš„èµ‹å€¼ç»“æœæ˜¯åŸºäºå­—æ®µç°æœ‰å€¼çš„ï¼Œæ‰€ä»¥åªèƒ½å…ˆæŸ¥å‡ºç”¨æˆ·è´¦æˆ·çš„ä½™é¢ï¼Œå†åœ¨ä½™é¢åŸºç¡€ä¸Šå‡å» 200ã€‚ è¿™ä¸ªæ—¶å€™å°±è¦åˆ©ç”¨ UpdateWrapper ä¸­çš„ setSql åŠŸèƒ½<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testUpdateWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    <span class="comment">// 1.ç”ŸæˆSQL</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> UpdateWrapper&lt;User&gt;()</span><br><span class="line">            .setSql(<span class="string">"balance = balance - 200"</span>) <span class="comment">// SET balance = balance - 200</span></span><br><span class="line">            .in(<span class="string">"id"</span>, ids); <span class="comment">// WHERE id in (1, 2, 4)</span></span><br><span class="line">        <span class="comment">// 2.æ›´æ–°ï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ç»™nullï¼Œä¹Ÿå°±æ˜¯ä¸å¡«æ›´æ–°å­—æ®µå’Œæ•°æ®ï¼Œ</span></span><br><span class="line">    <span class="comment">// è€Œæ˜¯åŸºäºUpdateWrapperä¸­çš„setSQLæ¥æ›´æ–°</span></span><br><span class="line">    userMapper.update(<span class="keyword">null</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="LambdaQueryWrapper"><a href="#LambdaQueryWrapper" class="headerlink" title="LambdaQueryWrapper"></a>LambdaQueryWrapper</h3><p>QueryWrapper/UpdateWrapper åœ¨æ„é€ æ¡ä»¶çš„æ—¶å€™éƒ½éœ€è¦å†™æ­»å­—æ®µåç§°ï¼Œè¿™ä¼šå‡ºç°å­—ç¬¦ä¸²é­”æ³•å€¼ã€‚</p>
<p>æ‰€ä»¥ MyBatisPlus æä¾›åŸºäºå˜é‡çš„ getter æ–¹æ³•ç»“åˆåå°„æŠ€æœ¯ï¼Œæ¥è®¡ç®—å‡ºå¯¹åº”çš„å˜é‡åï¼Œç›¸åº”çš„æ–¹æ³•å³ä¸ºåŸºäº Lambda çš„ Wrapperï¼šLambdaQueryWrapper/LambdaUpdateWrapper</p>
<p><strong>ä»¥ä¸Šè¾¹ QueryWrapper çš„ä¾‹å­ï¼ŒæŸ¥è¯¢åå­—ä¸­å¸¦ c ï¼Œä½™é¢å¤§äº 1000 çš„ç”¨æˆ·</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†™æ­»å­—æ®µï¼š</span></span><br><span class="line">QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;()ï¼›</span><br><span class="line">wrapper.select(<span class="string">"id"</span>, <span class="string">"username"</span>, <span class="string">"info"</span>, <span class="string">"balance"</span>)</span><br><span class="line">    .like(<span class="string">"username"</span>, <span class="string">"c"</span>)</span><br><span class="line">    .ge(<span class="string">"balance"</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testLambdaQueryWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæ¡ä»¶ WHERE username LIKE "%o%" AND balance &gt;= 1000</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.lambda()</span><br><span class="line">            .select(User::getId, User::getUsername, User::getInfo, User::getBalance)</span><br><span class="line">            .like(User::getUsername, <span class="string">"c"</span>)</span><br><span class="line">            .ge(User::getBalance, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰-SQL-â€”â€”-ä½¿-SQL-è¯­å¥ç»´æŠ¤åœ¨æŒä¹…å±‚"><a href="#è‡ªå®šä¹‰-SQL-â€”â€”-ä½¿-SQL-è¯­å¥ç»´æŠ¤åœ¨æŒä¹…å±‚" class="headerlink" title="è‡ªå®šä¹‰ SQL â€”â€” ä½¿ SQL è¯­å¥ç»´æŠ¤åœ¨æŒä¹…å±‚"></a>è‡ªå®šä¹‰ SQL â€”â€” ä½¿ SQL è¯­å¥ç»´æŠ¤åœ¨æŒä¹…å±‚</h2><p><code>UpdateWrapper.setSql(&quot;balance = balance - 200&quot;)</code> ä¸­ SQL è¯­å¥æœ€å¥½éƒ½ç»´æŠ¤åœ¨æŒä¹…å±‚ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡å±‚ã€‚</p>
<p>MybatisPlus æä¾›äº†è‡ªå®šä¹‰ SQL åŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬åˆ©ç”¨ Wrapper ç”ŸæˆæŸ¥è¯¢æ¡ä»¶ï¼Œå†ç»“åˆ Mapper ç¼–å†™ SQL</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCustomWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;().in(<span class="string">"id"</span>, ids);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨ mapper çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œç›´æ¥ä¼ é€’ Wrapper</span></span><br><span class="line">    userMapper.deductBalanceByIds(<span class="number">200</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ UserMapper ä¸­å®šä¹‰ deductBalanceByIds æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Update;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"UPDATE user SET balance = balance - #&#123;money&#125; $&#123;ew.customSqlSegment&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deductBalanceByIds</span><span class="params">(@Param(<span class="string">"money"</span>)</span> <span class="keyword">int</span> money, @<span class="title">Param</span><span class="params">(<span class="string">"ew"</span>)</span> QueryWrapper&lt;User&gt; wrapper)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤šè¡¨å…³è”"><a href="#å¤šè¡¨å…³è”" class="headerlink" title="å¤šè¡¨å…³è”"></a>å¤šè¡¨å…³è”</h2><p>ç†è®ºä¸Šæ¥è®² MyBatisPlus æ˜¯ä¸æ”¯æŒå¤šè¡¨æŸ¥è¯¢çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Wrapper ä¸­è‡ªå®šä¹‰æ¡ä»¶ç»“åˆè‡ªå®šä¹‰ SQL æ¥å®ç°å¤šè¡¨æŸ¥è¯¢çš„æ•ˆæœã€‚</p>
<p>æƒ³è¦å®ç°å¦‚ä¸‹æŸ¥è¯¢ï¼šuser è¡¨ä½œä¸º uï¼Œaddress è¡¨ä½œä¸º aï¼Œä» user ä¸­ç­›é€‰æŒ‡å®š id ç”¨æˆ·ï¼Œä¸” address å¯¹åº”æŒ‡å®šçš„ city</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryUserByIdAndAddr"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.mp.domain.po.User"</span>&gt;</span></span><br><span class="line">    SELECT *</span><br><span class="line">    FROM user u</span><br><span class="line">    INNER JOIN address a ON u.id = a.user_id</span><br><span class="line">    WHERE u.id</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"ids"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">open</span>=<span class="string">"IN ("</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    AND a.city = #&#123;city&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åˆ©ç”¨ Wrapper ç”ŸæˆæŸ¥è¯¢æ¡ä»¶ï¼Œå†ç»“åˆ Mapper ç¼–å†™ SQL</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCustomJoinWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;()</span><br><span class="line">            .in(<span class="string">"u.id"</span>, List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>))</span><br><span class="line">            .eq(<span class="string">"a.city"</span>, <span class="string">"åŒ—äº¬"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨ mapper çš„è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.queryUserByWrapper(wrapper);</span><br><span class="line"></span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ QueryWrapper ä¼ å…¥ user å’Œ address ä¿¡æ¯ï¼Œæ¥ç€å°†æ„å»ºçš„æŸ¥è¯¢ä½“ä¼ å…¥ UserMapper ä¸­å®šä¹‰ queryUserByWrapper æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"SELECT u.* FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;"</span>)</span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">queryUserByWrapper</span><span class="params">(@Param(<span class="string">"ew"</span>)</span>QueryWrapper&lt;User&gt; wrapper)</span>;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥åœ¨UserMapper.xmlä¸­å†™SQLï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryUserByIdAndAddr"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.mp.domain.po.User"</span>&gt;</span></span><br><span class="line">    SELECT * FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="Service-æ¥å£"><a href="#Service-æ¥å£" class="headerlink" title="Service æ¥å£"></a>Service æ¥å£</h1><p>MybatisPlus ä¸ä»…æä¾›äº† BaseMapperï¼Œè¿˜æä¾›äº†é€šç”¨çš„Serviceæ¥å£åŠé»˜è®¤å®ç°ï¼Œå°è£…äº†ä¸€äº›å¸¸ç”¨çš„ service æ¨¡æ¿æ–¹æ³•ã€‚é€šå¸¸ SpringBoot æ¡†æ¶ä¸­æ“ä½œæ•°æ®åº“ä¼šç”¨æ­¤æ–¹å¼ä¹¦å†™ã€‚</p>
<p>é€šç”¨æ¥å£ä¸º <strong>IService</strong>ï¼Œé»˜è®¤å®ç°ä¸º <strong>ServiceImpl</strong>ï¼Œå…¶ä¸­å°è£…çš„æ–¹æ³•å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>saveï¼šæ–°å¢</li>
<li>removeï¼šåˆ é™¤</li>
<li>updateï¼šæ›´æ–°</li>
<li>getï¼šæŸ¥è¯¢å•ä¸ªç»“æœ</li>
<li>listï¼šæŸ¥è¯¢é›†åˆç»“æœ</li>
<li>countï¼šè®¡æ•°</li>
<li>pageï¼šåˆ†é¡µæŸ¥è¯¢</li>
</ul>
<h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><ul>
<li><p>æ–°å¢</p>
<ul>
<li>saveæ˜¯æ–°å¢å•ä¸ªå…ƒç´ </li>
<li>saveBatchæ˜¯æ‰¹é‡æ–°å¢</li>
<li>saveOrUpdateæ˜¯æ ¹æ®idåˆ¤æ–­ï¼Œå¦‚æœæ•°æ®å­˜åœ¨å°±æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ–°å¢</li>
<li>saveOrUpdateBatchæ˜¯æ‰¹é‡çš„æ–°å¢æˆ–ä¿®æ”¹</li>
</ul>
</li>
<li><p>åˆ é™¤</p>
<ul>
<li>removeByIdï¼šæ ¹æ®idåˆ é™¤</li>
<li>removeByIdsï¼šæ ¹æ®idæ‰¹é‡åˆ é™¤</li>
<li>removeByMapï¼šæ ¹æ®Mapä¸­çš„é”®å€¼å¯¹ä¸ºæ¡ä»¶åˆ é™¤</li>
<li>remove(Wrapper<t>)ï¼šæ ¹æ®Wrapperæ¡ä»¶åˆ é™¤</t></li>
</ul>
</li>
<li><p>ä¿®æ”¹</p>
<ul>
<li>updateByIdï¼šæ ¹æ®idä¿®æ”¹</li>
<li>update(Wrapper<t>)ï¼šæ ¹æ®UpdateWrapperä¿®æ”¹ï¼ŒWrapperä¸­åŒ…å«setå’Œwhereéƒ¨åˆ†</t></li>
<li>update(Tï¼ŒWrapper<t>)ï¼šæŒ‰ç…§Tå†…çš„æ•°æ®ä¿®æ”¹ä¸WrapperåŒ¹é…åˆ°çš„æ•°æ®</t></li>
<li>updateBatchByIdï¼šæ ¹æ®idæ‰¹é‡ä¿®æ”¹</li>
</ul>
</li>
<li><p>GET</p>
<ul>
<li>getByIdï¼šæ ¹æ®idæŸ¥è¯¢1æ¡æ•°æ®</li>
<li>getOne(Wrapper<t>)ï¼šæ ¹æ®WrapperæŸ¥è¯¢1æ¡æ•°æ®</t></li>
<li>getBaseMapperï¼šè·å–Serviceå†…çš„BaseMapperå®ç°ï¼ŒæŸäº›æ—¶å€™éœ€è¦ç›´æ¥è°ƒç”¨Mapperå†…çš„è‡ªå®šä¹‰SQLæ—¶å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•è·å–åˆ°Mapper</li>
</ul>
</li>
<li><p>List</p>
<ul>
<li>listByIdsï¼šæ ¹æ®idæ‰¹é‡æŸ¥è¯¢</li>
<li>list(Wrapper<t>)ï¼šæ ¹æ®Wrapperæ¡ä»¶æŸ¥è¯¢å¤šæ¡æ•°æ®</t></li>
<li>list()ï¼šæŸ¥è¯¢æ‰€æœ‰</li>
</ul>
</li>
<li><p>Count</p>
<ul>
<li>count()ï¼šç»Ÿè®¡æ‰€æœ‰æ•°é‡</li>
<li>count(Wrapper<t>)ï¼šç»Ÿè®¡ç¬¦åˆWrapperæ¡ä»¶çš„æ•°æ®æ•°é‡</t></li>
</ul>
</li>
</ul>
<h2 id="IService"><a href="#IService" class="headerlink" title="IService"></a>IService</h2><p>å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ¥å£ï¼Œç„¶åæ‰©å±• IService æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// æ‹“å±•è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="IServiceImpl"><a href="#IServiceImpl" class="headerlink" title="IServiceImpl"></a>IServiceImpl</h2><p>ç¼–å†™ UserServiceImpl ç±»ï¼Œç»§æ‰¿ ServiceImpl ï¼Œå®ç° UserService </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UserMapper</span>, <span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¥å£å®ç°"><a href="#æ¥å£å®ç°" class="headerlink" title="æ¥å£å®ç°"></a>æ¥å£å®ç°</h2><p>ä¸Šè¾¹å·²ç»å®šä¹‰äº† User(PO) å¯¹åº”çš„ Service å’Œ ServiceImplï¼Œæ¥ä¸‹æ¥å®ç° User çš„ DTO å’Œ VO</p>
<h3 id="UserFormDTOï¼šä»£è¡¨æ–°å¢æ—¶çš„ç”¨æˆ·è¡¨å•"><a href="#UserFormDTOï¼šä»£è¡¨æ–°å¢æ—¶çš„ç”¨æˆ·è¡¨å•" class="headerlink" title="UserFormDTOï¼šä»£è¡¨æ–°å¢æ—¶çš„ç”¨æˆ·è¡¨å•"></a>UserFormDTOï¼šä»£è¡¨æ–°å¢æ—¶çš„ç”¨æˆ·è¡¨å•</h3><p>User è¡¨çš„å­—æ®µæ›´ä¸ºå…¨é¢ï¼ŒPO è®°å½•è¯¦ç»†å­—æ®µï¼Œä½†æ˜¯æ–°å¢æ—¶åˆ™ä¸éœ€è¦ä¸»åŠ¨æ”¶é›†åˆ›å»ºäººã€åˆ›å»ºæ—¶é—´ä¹‹ç±»çš„ä¿¡æ¯ã€‚åªéœ€æ”¶é›†ç”¨æˆ·å¡«å…¥çš„ä¿¡æ¯å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel</span>(description = <span class="string">"ç”¨æˆ·è¡¨å•å®ä½“"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserFormDTO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"id"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ç”¨æˆ·å"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"å¯†ç "</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"æ³¨å†Œæ‰‹æœºå·"</span>)</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"è¯¦ç»†ä¿¡æ¯ï¼ŒJSONé£æ ¼"</span>)</span><br><span class="line">    <span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"è´¦æˆ·ä½™é¢"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="UserVOï¼šä»£è¡¨æŸ¥è¯¢çš„è¿”å›ç»“æœ"><a href="#UserVOï¼šä»£è¡¨æŸ¥è¯¢çš„è¿”å›ç»“æœ" class="headerlink" title="UserVOï¼šä»£è¡¨æŸ¥è¯¢çš„è¿”å›ç»“æœ"></a>UserVOï¼šä»£è¡¨æŸ¥è¯¢çš„è¿”å›ç»“æœ</h3><p>åŒç†ï¼ŒVO åªè¿”å›ç”¨æˆ·æ‰€éœ€æŸ¥è¯¢çš„å­—æ®µå³å¯ï¼Œæ— éœ€å°† User è¡¨ (PO) æ‰€æœ‰å­—æ®µè¿”å›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel</span>(description = <span class="string">"ç”¨æˆ·VOå®ä½“"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserVO</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ç”¨æˆ·id"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ç”¨æˆ·å"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"è¯¦ç»†ä¿¡æ¯"</span>)</span><br><span class="line">    <span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ä½¿ç”¨çŠ¶æ€ï¼ˆ1æ­£å¸¸ 2å†»ç»“ï¼‰"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"è´¦æˆ·ä½™é¢"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="UserControllerï¼šç”¨æˆ·ç›¸å…³æ¥å£"><a href="#UserControllerï¼šç”¨æˆ·ç›¸å…³æ¥å£" class="headerlink" title="UserControllerï¼šç”¨æˆ·ç›¸å…³æ¥å£"></a>UserControllerï¼šç”¨æˆ·ç›¸å…³æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.bean.BeanUtil;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.dto.UserFormDTO; <span class="comment">// DTO å¯¹åº”æ–°å»ºè´¦æˆ·å­—æ®µ</span></span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User; <span class="comment">// PO å¯¹åº”æ•°æ®åº“è¡¨</span></span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.vo.UserVO; <span class="comment">// VO å¯¹åº”æŸ¥è¯¢è¿”å›å­—æ®µ</span></span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Api</span>(tags = <span class="string">"ç”¨æˆ·ç®¡ç†æ¥å£"</span>)</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"users"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IUserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"æ–°å¢ç”¨æˆ·"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(@RequestBody UserFormDTO userFormDTO)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è½¬æ¢DTOä¸ºPO</span></span><br><span class="line">        User user = BeanUtil.copyProperties(userFormDTO, User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 2.æ–°å¢</span></span><br><span class="line">        userService.save(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"åˆ é™¤ç”¨æˆ·"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeUserById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long userId)</span>&#123;</span><br><span class="line">        userService.removeById(userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserVO <span class="title">queryUserById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long userId)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        User user = userService.getById(userId);</span><br><span class="line">        <span class="comment">// 2.å¤„ç†vo</span></span><br><span class="line">        <span class="keyword">return</span> BeanUtil.copyProperties(user, UserVO<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation</span>(<span class="string">"æ ¹æ®idé›†åˆæŸ¥è¯¢ç”¨æˆ·"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title">queryUserByIds</span><span class="params">(@RequestParam(<span class="string">"ids"</span>)</span> List&lt;Long&gt; ids)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        List&lt;User&gt; users = userService.listByIds(ids);</span><br><span class="line">        <span class="comment">// 2.å¤„ç†vo</span></span><br><span class="line">        <span class="keyword">return</span> BeanUtil.copyToList(users, UserVO<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Service-ä¸­è‡ªå®šä¹‰å¤æ‚æ¥å£"><a href="#Service-ä¸­è‡ªå®šä¹‰å¤æ‚æ¥å£" class="headerlink" title="Service ä¸­è‡ªå®šä¹‰å¤æ‚æ¥å£"></a>Service ä¸­è‡ªå®šä¹‰å¤æ‚æ¥å£</h3><p>éƒ¨åˆ†æ¥å£åŠŸèƒ½ç”± Service æä¾›çš„åŸºç¡€æ–¹æ³•å¯ä»¥å®Œæˆï¼Œå¦‚åŸºç¡€æ–¹æ³•æ— æ³•ç›´æ¥å®ç°ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ä¸Šè¾¹ <strong>IService IServiceImpl</strong> è¿›è¡Œè‡ªå®šä¹‰æ–¹æ³•</p>
<h4 id="UserController-ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•"><a href="#UserController-ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•" class="headerlink" title="UserController ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•"></a>UserController ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span>(<span class="string">"&#123;id&#125;/deduction/&#123;money&#125;"</span>)</span><br><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"æ‰£å‡ç”¨æˆ·ä½™é¢"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deductBalance</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long id, @<span class="title">PathVariable</span><span class="params">(<span class="string">"money"</span>)</span>Integer money)</span>&#123;</span><br><span class="line">    userService.deductBalance(id, money);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="IUserService-æ¥å£æ–°å¢æ–¹æ³•"><a href="#IUserService-æ¥å£æ–°å¢æ–¹æ³•" class="headerlink" title="IUserService æ¥å£æ–°å¢æ–¹æ³•"></a>IUserService æ¥å£æ–°å¢æ–¹æ³•</h4><p>deductBalance æ–¹æ³•åªéœ€åœ¨ IUserService ä¸­å®šä¹‰æ–¹æ³•åã€å‚æ•°åå³å¯ï¼Œå¦‚æœ‰å…¶ä»–éƒ¨åˆ†å¯ä»¥æŠ½è±¡ä¹Ÿå¯æå‡ºæ¥ï¼Œå¦åˆ™åªåœ¨ IUserServiceImpl å®ç°å…·ä½“æ–¹æ³•å³å¯ã€‚å› ä¸ºæœ‰æ—¶åŒä¸ªæ–¹æ³•å¯èƒ½åœ¨ä¸åŒæƒ…å†µä¸‹æœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œå› æ­¤è¿™ä¸ª IUserServiceImpl ä¸­å¯ä»¥ç»§æ‰¿ IUserService å†å®ç°è‡ªå®šæ–¹æ³•ï¼Œå…¶ä»–çš„ ServiceImpl ä¹Ÿæœ‰å¯èƒ½ä¼šéœ€è¦ç»§æ‰¿è¿™ä¸ª IUserService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deductBalance</span><span class="params">(Long id, Integer money)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="IUserServiceImpl-ç±»å®ç°æ–°å¢æ–¹æ³•"><a href="#IUserServiceImpl-ç±»å®ç°æ–°å¢æ–¹æ³•" class="headerlink" title="IUserServiceImpl ç±»å®ç°æ–°å¢æ–¹æ³•"></a>IUserServiceImpl ç±»å®ç°æ–°å¢æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IUserServiceImpl</span> <span class="keyword">extends</span> <span class="title">IServiceImpl</span>&lt;<span class="title">UserMapper</span>, <span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deductBalance</span><span class="params">(Long id, Integer money)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        User user = getById(id);</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­ç”¨æˆ·çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span> || user.getStatus() == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"ç”¨æˆ·çŠ¶æ€å¼‚å¸¸"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.åˆ¤æ–­ç”¨æˆ·ä½™é¢</span></span><br><span class="line">        <span class="keyword">if</span> (user.getBalance() &lt; money) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"ç”¨æˆ·ä½™é¢ä¸è¶³"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æ‰£å‡ä½™é¢</span></span><br><span class="line">        baseMapper.deductMoneyById(id, money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¡¥å……è‡ªå®šä¹‰-SQL-çš„-Mapper"><a href="#è¡¥å……è‡ªå®šä¹‰-SQL-çš„-Mapper" class="headerlink" title="è¡¥å……è‡ªå®šä¹‰ SQL çš„ Mapper"></a>è¡¥å……è‡ªå®šä¹‰ SQL çš„ Mapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Update</span>(<span class="string">"UPDATE user SET balance = balance - #&#123;money&#125; WHERE id = #&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deductMoneyById</span><span class="params">(@Param(<span class="string">"id"</span>)</span> Long id, @<span class="title">Param</span><span class="params">(<span class="string">"money"</span>)</span> Integer money)</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Lambda-åŠŸèƒ½"><a href="#Lambda-åŠŸèƒ½" class="headerlink" title="Lambda åŠŸèƒ½"></a>Lambda åŠŸèƒ½</h2><h3 id="åˆ›å»ºæŸ¥è¯¢æ¡ä»¶å®ä½“-UserQueryDTO"><a href="#åˆ›å»ºæŸ¥è¯¢æ¡ä»¶å®ä½“-UserQueryDTO" class="headerlink" title="åˆ›å»ºæŸ¥è¯¢æ¡ä»¶å®ä½“ UserQueryDTO"></a>åˆ›å»ºæŸ¥è¯¢æ¡ä»¶å®ä½“ UserQueryDTO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel</span>(description = <span class="string">"ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶å®ä½“"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserQueryDTO</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ç”¨æˆ·åå…³é”®å­—"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ç”¨æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-å†»ç»“"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ä½™é¢æœ€å°å€¼"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ä½™é¢æœ€å¤§å€¼"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="UserController-ä¸­ä½¿ç”¨-lambdaQuery-ä»£æ›¿æ‰‹åŠ¨åˆ›å»º-Wrapper-æ­¥éª¤"><a href="#UserController-ä¸­ä½¿ç”¨-lambdaQuery-ä»£æ›¿æ‰‹åŠ¨åˆ›å»º-Wrapper-æ­¥éª¤" class="headerlink" title="UserController ä¸­ä½¿ç”¨ lambdaQuery ä»£æ›¿æ‰‹åŠ¨åˆ›å»º Wrapper æ­¥éª¤"></a>UserController ä¸­ä½¿ç”¨ lambdaQuery ä»£æ›¿æ‰‹åŠ¨åˆ›å»º Wrapper æ­¥éª¤</h3><p>userService.lambdaQuery() ä»£æ›¿äº† userService.list(new QueryWrapper<user>().lambda())</user></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"æ ¹æ®idé›†åˆæŸ¥è¯¢ç”¨æˆ·"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title">queryUsers</span><span class="params">(UserQueryDTO query)</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1.ç»„ç»‡æ¡ä»¶</span></span><br><span class="line">    String username = query.getName();</span><br><span class="line">    Integer status = query.getStatus();</span><br><span class="line">    Integer minBalance = query.getMinBalance();</span><br><span class="line">    Integer maxBalance = query.getMaxBalance();</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; users = userService.lambdaQuery()</span><br><span class="line">            .like(username != <span class="keyword">null</span>, User::getUsername, username)</span><br><span class="line">            .eq(status != <span class="keyword">null</span>, User::getStatus, status)</span><br><span class="line">            .ge(minBalance != <span class="keyword">null</span>, User::getBalance, minBalance)</span><br><span class="line">            .le(maxBalance != <span class="keyword">null</span>, User::getBalance, maxBalance)</span><br><span class="line">            .list();</span><br><span class="line">    <span class="comment">// 3.å¤„ç†vo</span></span><br><span class="line">    <span class="keyword">return</span> BeanUtil.copyToList(users, UserVO<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>lambdaQuery æ–¹æ³•ä½¿ç”¨é“¾å¼ç¼–ç¨‹ç»„æˆæŸ¥è¯¢æ¡ä»¶ï¼Œæœ€åä½¿ç”¨ <code>.list()</code> è¿”å›ç¬¦åˆæ¡ä»¶çš„é›†åˆã€‚å¯é€‰çš„æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li>.one()ï¼šæœ€å¤š1ä¸ªç»“æœ</li>
<li>.list()ï¼šè¿”å›é›†åˆç»“æœ</li>
<li>.count()ï¼šè¿”å›è®¡æ•°ç»“æœ</li>
</ul>
<p>MybatisPlusä¼šæ ¹æ®é“¾å¼ç¼–ç¨‹çš„æœ€åä¸€ä¸ªæ–¹æ³•æ¥åˆ¤æ–­æœ€ç»ˆçš„è¿”å›ç»“æœã€‚</p>
<h3 id="IUserServiceImpl-ä¸­ä½¿ç”¨-lambdaUpdate"><a href="#IUserServiceImpl-ä¸­ä½¿ç”¨-lambdaUpdate" class="headerlink" title="IUserServiceImpl ä¸­ä½¿ç”¨ lambdaUpdate"></a>IUserServiceImpl ä¸­ä½¿ç”¨ lambdaUpdate</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deductBalance</span><span class="params">(Long id, Integer money)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    User user = getById(id);</span><br><span class="line">    <span class="comment">// 2.æ ¡éªŒç”¨æˆ·çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (user == <span class="keyword">null</span> || user.getStatus() == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"ç”¨æˆ·çŠ¶æ€å¼‚å¸¸ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.æ ¡éªŒä½™é¢æ˜¯å¦å……è¶³</span></span><br><span class="line">    <span class="keyword">if</span> (user.getBalance() &lt; money) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"ç”¨æˆ·ä½™é¢ä¸è¶³ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.æ‰£å‡ä½™é¢ update tb_user set balance = balance - ?</span></span><br><span class="line">    <span class="keyword">int</span> remainBalance = user.getBalance() - money;</span><br><span class="line">    lambdaUpdate()</span><br><span class="line">            .set(User::getBalance, remainBalance) <span class="comment">// æ›´æ–°ä½™é¢</span></span><br><span class="line">            .set(remainBalance == <span class="number">0</span>, User::getStatus, <span class="number">2</span>) <span class="comment">// åŠ¨æ€åˆ¤æ–­ï¼Œæ˜¯å¦æ›´æ–°status</span></span><br><span class="line">            .eq(User::getId, id)</span><br><span class="line">            .eq(User::getBalance, user.getBalance()) <span class="comment">// ä¹è§‚é”</span></span><br><span class="line">            .update();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹‹åå°†ä¼šåœ¨æ¥å£ä¸­ä½¿ç”¨è¯¥æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span>(<span class="string">"&#123;id&#125;/deduction/&#123;money&#125;"</span>)</span><br><span class="line"><span class="meta">@ApiOperation</span>(<span class="string">"æ‰£å‡ç”¨æˆ·ä½™é¢"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deductBalance</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long id, @<span class="title">PathVariable</span><span class="params">(<span class="string">"money"</span>)</span>Integer money)</span>&#123;</span><br><span class="line">    userService.deductBalance(id, money);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="MybatisPlus-æ‰¹å¤„ç†"><a href="#MybatisPlus-æ‰¹å¤„ç†" class="headerlink" title="MybatisPlus æ‰¹å¤„ç†"></a>MybatisPlus æ‰¹å¤„ç†</h2><p>MybatisPlus çš„æ‰¹å¤„ç†æ˜¯åŸºäº PrepareStatement çš„é¢„ç¼–è¯‘æ¨¡å¼ï¼Œç„¶åæ‰¹é‡æäº¤ï¼Œæœ€ç»ˆåœ¨æ•°æ®åº“æ‰§è¡Œæ—¶è¿˜æ˜¯ä¼šæœ‰å¤šæ¡insertè¯­å¥ï¼Œé€æ¡æ’å…¥æ•°æ®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span>(rollbackFor = Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">Override</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">boolean</span> <span class="title">saveBatch</span>(<span class="title">Collection</span>&lt;<span class="title">T</span>&gt; <span class="title">entityList</span>, <span class="title">int</span> <span class="title">batchSize</span>) </span>&#123;</span><br><span class="line">    String sqlStatement = getSqlStatement(SqlMethod.INSERT_ONE);</span><br><span class="line">    <span class="keyword">return</span> executeBatch(entityList, batchSize, (sqlSession, entity) -&gt; sqlSession.insert(sqlStatement, entity));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...SqlHelper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">boolean</span> <span class="title">executeBatch</span><span class="params">(Class&lt;?&gt; entityClass, Log log, Collection&lt;E&gt; list, <span class="keyword">int</span> batchSize, BiConsumer&lt;SqlSession, E&gt; consumer)</span> </span>&#123;</span><br><span class="line">    Assert.isFalse(batchSize &lt; <span class="number">1</span>, <span class="string">"batchSize must not be less than one"</span>);</span><br><span class="line">    <span class="keyword">return</span> !CollectionUtils.isEmpty(list) &amp;&amp; executeBatch(entityClass, log, sqlSession -&gt; &#123;</span><br><span class="line">        <span class="keyword">int</span> size = list.size();</span><br><span class="line">        <span class="keyword">int</span> idxLimit = Math.min(batchSize, size);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (E element : list) &#123;</span><br><span class="line">            consumer.accept(sqlSession, element);</span><br><span class="line">            <span class="keyword">if</span> (i == idxLimit) &#123;</span><br><span class="line">                sqlSession.flushStatements();</span><br><span class="line">                idxLimit = Math.min(idxLimit + batchSize, size);</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†åä¼šç”Ÿæˆç±»ä¼¼å¦‚ä¸‹è¿™æ ·ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Preparing: <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> ( username, <span class="keyword">password</span>, phone, info, balance, create_time, update_time ) <span class="keyword">VALUES</span> ( ?, ?, ?, ?, ?, ?, ? )</span><br><span class="line"><span class="keyword">Parameters</span>: user_1, <span class="number">123</span>, <span class="number">18688190001</span>, <span class="string">""</span>, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span></span><br><span class="line"><span class="keyword">Parameters</span>: user_2, <span class="number">123</span>, <span class="number">18688190002</span>, <span class="string">""</span>, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span></span><br><span class="line"><span class="keyword">Parameters</span>: user_3, <span class="number">123</span>, <span class="number">18688190003</span>, <span class="string">""</span>, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span></span><br></pre></td></tr></table></figure>
<p>æœ€ä½³æ€§èƒ½åˆ™æ˜¯åˆå¹¶å¤šæ¡ SQL ï¼Œæ’å…¥æ—¶åªæ‰§è¡Œä¸€æ¡è¯­å¥ã€‚æˆ‘ä»¬éœ€è¦ MySQL çš„å®¢æˆ·ç«¯è¿æ¥å‚æ•° ä¿®æ”¹ <code>rewriteBatchedStatements: true</code></p>
<p>åœ¨ application.yml çš„jdbc url åå¢åŠ è¯¥å‚æ•°</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai&amp;rewriteBatchedStatements=true</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">MySQL123</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åæ‰§è¡Œæ’å…¥æ—¶ï¼Œå˜æˆï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> </span><br><span class="line">    ( username, <span class="keyword">password</span>, phone, info, balance, create_time, update_time )</span><br><span class="line"><span class="keyword">VALUES</span> </span><br><span class="line">    (user_1, <span class="number">123</span>, <span class="number">18688190001</span>, <span class="string">""</span>, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>),</span><br><span class="line">    (user_2, <span class="number">123</span>, <span class="number">18688190002</span>, <span class="string">""</span>, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>),</span><br><span class="line">    (user_3, <span class="number">123</span>, <span class="number">18688190003</span>, <span class="string">""</span>, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>),</span><br><span class="line">    (user_4, <span class="number">123</span>, <span class="number">18688190004</span>, <span class="string">""</span>, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>);</span><br></pre></td></tr></table></figure>
<h2 id="é€»è¾‘åˆ é™¤"><a href="#é€»è¾‘åˆ é™¤" class="headerlink" title="é€»è¾‘åˆ é™¤"></a>é€»è¾‘åˆ é™¤</h2><p>MybatisPlus æ·»åŠ äº†å¯¹é€»è¾‘åˆ é™¤çš„æ”¯æŒã€‚å¯¹äºé‡è¦çš„æ•°æ®ï¼Œåˆ é™¤åªæ˜¯å°†åˆ é™¤æ ‡è®°æ›´æ”¹ï¼ˆä¾‹å¦‚ trueï¼‰ï¼Œåœ¨æŸ¥è¯¢æ—¶è¿‡æ»¤æ‰è¯¥å­—æ®µä¸º true çš„æ•°æ®ã€‚ä½†ä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œä¼šä½¿å¾—æ•°æ®åº“è¡¨åƒåœ¾æ•°æ®è¶Šæ¥è¶Šå¤šã€‚</p>
<p>ä¾‹å¦‚ç»™ Address å®ä½“å¢åŠ  deleted å­—æ®µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName</span>(<span class="string">"address"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="comment">// ---</span></span><br><span class="line">    <span class="keyword">private</span> Boolean deleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">deleted</span> <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œå±Šæ—¶ä»…ä¼šæ‰§è¡Œ update å˜æ›´ deleted å­—æ®µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testDeleteByLogic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ é™¤æ–¹æ³•ä¸ä»¥å‰æ²¡æœ‰åŒºåˆ«</span></span><br><span class="line">    addressService.removeById(<span class="number">59L</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é€šç”¨æšä¸¾"><a href="#é€šç”¨æšä¸¾" class="headerlink" title="é€šç”¨æšä¸¾"></a>é€šç”¨æšä¸¾</h2><p>MybatisPlus æä¾›äº† @EnumValue æ³¨è§£æ¥æ ‡è®°æšä¸¾å±æ€§</p>
<h2 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h2><h3 id="å®šä¹‰åˆ†é¡µå®ä½“"><a href="#å®šä¹‰åˆ†é¡µå®ä½“" class="headerlink" title="å®šä¹‰åˆ†é¡µå®ä½“"></a>å®šä¹‰åˆ†é¡µå®ä½“</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel</span>(description = <span class="string">"åˆ†é¡µæŸ¥è¯¢å®ä½“"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageQueryDTO</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"é¡µç "</span>)</span><br><span class="line">    <span class="keyword">private</span> Long pageNo;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"é¡µç "</span>)</span><br><span class="line">    <span class="keyword">private</span> Long pageSize;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"æ’åºå­—æ®µ"</span>)</span><br><span class="line">    <span class="keyword">private</span> String sortBy;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"æ˜¯å¦å‡åº"</span>)</span><br><span class="line">    <span class="keyword">private</span> Boolean isAsc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="UserQueryDTO-ç»§æ‰¿åˆ†é¡µå®ä½“"><a href="#UserQueryDTO-ç»§æ‰¿åˆ†é¡µå®ä½“" class="headerlink" title="UserQueryDTO ç»§æ‰¿åˆ†é¡µå®ä½“"></a>UserQueryDTO ç»§æ‰¿åˆ†é¡µå®ä½“</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>(callSuper = <span class="keyword">true</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel</span>(description = <span class="string">"ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶å®ä½“"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserQueryDTO</span> <span class="keyword">extends</span> <span class="title">PageQueryDTO</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ç”¨æˆ·åå…³é”®å­—"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ç”¨æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-å†»ç»“"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ä½™é¢æœ€å°å€¼"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"ä½™é¢æœ€å¤§å€¼"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†é¡µå®ä½“-PageDTO"><a href="#åˆ†é¡µå®ä½“-PageDTO" class="headerlink" title="åˆ†é¡µå®ä½“ PageDTO"></a>åˆ†é¡µå®ä½“ PageDTO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel</span>(description = <span class="string">"åˆ†é¡µç»“æœ"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageVO</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"æ€»æ¡æ•°"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long total;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"æ€»é¡µæ•°"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long pages;</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(<span class="string">"é›†åˆ"</span>)</span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="UserController-ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£"><a href="#UserController-ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£" class="headerlink" title="UserController ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£"></a>UserController ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.dto.PageVO;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.dto.UserQueryDTO;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.query.PageQuery;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.vo.UserVO;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.service.UserService;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"users"</span>)</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IUserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/page"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> PageVO&lt;UserVO&gt; <span class="title">queryUsersPage</span><span class="params">(UserQueryDTO query)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.queryUsersPage(query);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ã€‚ã€‚ã€‚ ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="IUserService-ä¸­åˆ›å»º-queryUsersPage-æ–¹æ³•"><a href="#IUserService-ä¸­åˆ›å»º-queryUsersPage-æ–¹æ³•" class="headerlink" title="IUserService ä¸­åˆ›å»º queryUsersPage æ–¹æ³•"></a>IUserService ä¸­åˆ›å»º queryUsersPage æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">PageVO&lt;UserVO&gt; <span class="title">queryUsersPage</span><span class="params">(PageQuery query)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨-IUserServiceImpl-ä¸­å®ç°è¯¥æ–¹æ³•"><a href="#åœ¨-IUserServiceImpl-ä¸­å®ç°è¯¥æ–¹æ³•" class="headerlink" title="åœ¨ IUserServiceImpl ä¸­å®ç°è¯¥æ–¹æ³•"></a>åœ¨ IUserServiceImpl ä¸­å®ç°è¯¥æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PageVO&lt;UserVO&gt; <span class="title">queryUsersPage</span><span class="params">(PageQuery query)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// 1.1.åˆ†é¡µæ¡ä»¶</span></span><br><span class="line">    Page&lt;User&gt; page = Page.of(query.getPageNo(), query.getPageSize());</span><br><span class="line">    <span class="comment">// 1.2.æ’åºæ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (query.getSortBy() != <span class="keyword">null</span>) &#123;</span><br><span class="line">        page.addOrder(<span class="keyword">new</span> OrderItem(query.getSortBy(), query.getIsAsc()));</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤æŒ‰ç…§æ›´æ–°æ—¶é—´æ’åº</span></span><br><span class="line">        page.addOrder(<span class="keyword">new</span> OrderItem(<span class="string">"update_time"</span>, <span class="keyword">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">    page(page);</span><br><span class="line">    <span class="comment">// 3.æ•°æ®éç©ºæ ¡éªŒ</span></span><br><span class="line">    List&lt;User&gt; records = page.getRecords();</span><br><span class="line">    <span class="keyword">if</span> (records == <span class="keyword">null</span> || records.size() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ— æ•°æ®ï¼Œè¿”å›ç©ºç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PageVO&lt;UserVO&gt;(page.getTotal(), page.getPages(), Collections.emptyList());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.æœ‰æ•°æ®ï¼Œè½¬æ¢</span></span><br><span class="line">    List&lt;UserVO&gt; list = BeanUtil.copyToList(records, UserVO<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="comment">// 5.å°è£…è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> PageVO&lt;UserVO&gt;(page.getTotal(), page.getPages(), list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <br>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/blog/categories/notes/">notes</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Backend/">Backend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/MybatisPlus/">MybatisPlus</a></li></ul>

      
	<span class="ico-date"></span>
	<a href="/blog/2024/01/10/2-backend-mybatisplus1/" class="article-date">
	  <time datetime="2024-01-09T16:00:00.000Z" itemprop="datePublished">ä¸€æœˆ 10, 2024</time>
	</a>

      <!-- æ·»åŠ å­—æ•°ç»Ÿè®¡ -->
      
        <span class="ico-fontcount"></span><span class="post-count">5.7kå­—</span>
      
    </footer>
    <!-- æ–‡ç« æ·»åŠ è¯„è®º -->
    
      
    <script defer src="//unpkg.com/leancloud-storage@4/dist/av-min.js"></script>
    <script defer src='//unpkg.com/valine@latest/dist/Valine.min.js'></script>
    <div id="vcomments"></div>
    <script>

        var notify = 'false' == true ? true : false;
        var verify = 'false' == true ? true : false;
		// è®¾ç½®è½®è¯¢
		const timer = setInterval(() => {
			if (window.Valine && typeof window.Valine === 'function') {
				clearInterval(timer);
				new Valine({
					el: '#vcomments',
					notify: notify,
					verify: verify,
					app_id: 'AJj6aG4cDMBqBIISAr1U53Az-gzGzoHsz',
					app_key: 'bIYBhlht4PSXI4pCWuH7Gnuo',
					placeholder: 'say something bro ~',
					avatar: 'monsterid',
					avatarCDN:'https://cravatar.cn/avatar/',
					visitor: 'true',
                    emojiCDN: '//i0.hdslb.com/bfs/emote/', 
                    // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
                    emojiMaps: {
                        "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
                        "tv_äº²äº²": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
                        "tv_å·ç¬‘": "bb690d4107620f1c15cff29509db529a73aee261.png",
                        "tv_å†è§": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
                        "tv_å†·æ¼ ": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
                        "tv_å‘æ€’": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
                        "tv_å‘è´¢": "34db290afd2963723c6eb3c4560667db7253a21a.png",
                        "tv_å¯çˆ±": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
                        "tv_åè¡€": "09dd16a7aa59b77baa1155d47484409624470c77.png",
                        "tv_å‘†": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
                        "tv_å‘•å": "9f996894a39e282ccf5e66856af49483f81870f3.png",
                        "tv_å›°": "241ee304e44c0af029adceb294399391e4737ef2.png",
                        "tv_åç¬‘": "1f0b87f731a671079842116e0991c91c2c88645a.png",
                        "tv_å¤§ä½¬": "093c1e2c490161aca397afc45573c877cdead616.png",
                        "tv_å¤§å“­": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
                        "tv_å§”å±ˆ": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
                        "tv_å®³ç¾": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
                        "tv_å°´å°¬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
                        "tv_å¾®ç¬‘": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
                        "tv_æ€è€ƒ": "90cf159733e558137ed20aa04d09964436f618a1.png",
                        "tv_æƒŠå“": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
                        // ... æ›´å¤šè¡¨æƒ…
                    }
				});
			}
		}, 1000);
    </script>



    
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2024/02/05/2-backend-mybatisplus2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          ğŸŒŸ åç«¯ | MybatisPlus + SpringBootå®è·µ
        
      </div>
    </a>
  
  
    <a href="/blog/2023/11/06/2-backend-springcloud5-transaction/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">ğŸŒŸ åç«¯ | SpringCloud -&gt; åˆ†å¸ƒå¼äº‹åŠ¡</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JDBC-Java-Database-Connectivity"><span class="nav-number">1.</span> <span class="nav-text">JDBC (Java Database Connectivity)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ORM-Object-Relational-Mapping"><span class="nav-number">2.</span> <span class="nav-text">ORM (Object-Relational Mapping)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JPA-Java-Persistence-API"><span class="nav-number">3.</span> <span class="nav-text">JPA (Java Persistence API)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MyBatis-ç®€å•-CRUD"><span class="nav-number">4.</span> <span class="nav-text">MyBatis ç®€å• CRUD</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#è¿æ¥æ•°æ®åº“"><span class="nav-number">4.1.</span> <span class="nav-text">è¿æ¥æ•°æ®åº“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¼•å…¥ä¾èµ–"><span class="nav-number">4.2.</span> <span class="nav-text">å¼•å…¥ä¾èµ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®šä¹‰-Mapper"><span class="nav-number">4.3.</span> <span class="nav-text">å®šä¹‰ Mapper</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ³¨è§£"><span class="nav-number">4.4.</span> <span class="nav-text">æ³¨è§£</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TableName"><span class="nav-number">4.4.1.</span> <span class="nav-text">@TableName</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TableId"><span class="nav-number">4.4.2.</span> <span class="nav-text">@TableId</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TableField"><span class="nav-number">4.4.3.</span> <span class="nav-text">@TableField</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatisPlus-é…ç½®"><span class="nav-number">4.5.</span> <span class="nav-text">MyBatisPlus é…ç½®</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MyBatisPlus-Wrapper-ç¼–å†™-SQL-æ‹“å±•"><span class="nav-number">5.</span> <span class="nav-text">MyBatisPlus Wrapper ç¼–å†™ SQL æ‹“å±•</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Wrapper-å®ç°å¤æ‚-SQL"><span class="nav-number">5.1.</span> <span class="nav-text">Wrapper å®ç°å¤æ‚ SQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#QueryWrapper"><span class="nav-number">5.1.1.</span> <span class="nav-text">QueryWrapper</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UpdateWrapper"><span class="nav-number">5.1.2.</span> <span class="nav-text">UpdateWrapper</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LambdaQueryWrapper"><span class="nav-number">5.1.3.</span> <span class="nav-text">LambdaQueryWrapper</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è‡ªå®šä¹‰-SQL-â€”â€”-ä½¿-SQL-è¯­å¥ç»´æŠ¤åœ¨æŒä¹…å±‚"><span class="nav-number">5.2.</span> <span class="nav-text">è‡ªå®šä¹‰ SQL â€”â€” ä½¿ SQL è¯­å¥ç»´æŠ¤åœ¨æŒä¹…å±‚</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¤šè¡¨å…³è”"><span class="nav-number">5.3.</span> <span class="nav-text">å¤šè¡¨å…³è”</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Service-æ¥å£"><span class="nav-number">6.</span> <span class="nav-text">Service æ¥å£</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CRUD"><span class="nav-number">6.1.</span> <span class="nav-text">CRUD</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IService"><span class="nav-number">6.2.</span> <span class="nav-text">IService</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IServiceImpl"><span class="nav-number">6.3.</span> <span class="nav-text">IServiceImpl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¥å£å®ç°"><span class="nav-number">6.4.</span> <span class="nav-text">æ¥å£å®ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#UserFormDTOï¼šä»£è¡¨æ–°å¢æ—¶çš„ç”¨æˆ·è¡¨å•"><span class="nav-number">6.4.1.</span> <span class="nav-text">UserFormDTOï¼šä»£è¡¨æ–°å¢æ—¶çš„ç”¨æˆ·è¡¨å•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UserVOï¼šä»£è¡¨æŸ¥è¯¢çš„è¿”å›ç»“æœ"><span class="nav-number">6.4.2.</span> <span class="nav-text">UserVOï¼šä»£è¡¨æŸ¥è¯¢çš„è¿”å›ç»“æœ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UserControllerï¼šç”¨æˆ·ç›¸å…³æ¥å£"><span class="nav-number">6.4.3.</span> <span class="nav-text">UserControllerï¼šç”¨æˆ·ç›¸å…³æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Service-ä¸­è‡ªå®šä¹‰å¤æ‚æ¥å£"><span class="nav-number">6.4.4.</span> <span class="nav-text">Service ä¸­è‡ªå®šä¹‰å¤æ‚æ¥å£</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#UserController-ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•"><span class="nav-number">6.4.4.1.</span> <span class="nav-text">UserController ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IUserService-æ¥å£æ–°å¢æ–¹æ³•"><span class="nav-number">6.4.4.2.</span> <span class="nav-text">IUserService æ¥å£æ–°å¢æ–¹æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IUserServiceImpl-ç±»å®ç°æ–°å¢æ–¹æ³•"><span class="nav-number">6.4.4.3.</span> <span class="nav-text">IUserServiceImpl ç±»å®ç°æ–°å¢æ–¹æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è¡¥å……è‡ªå®šä¹‰-SQL-çš„-Mapper"><span class="nav-number">6.4.4.4.</span> <span class="nav-text">è¡¥å……è‡ªå®šä¹‰ SQL çš„ Mapper</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lambda-åŠŸèƒ½"><span class="nav-number">6.5.</span> <span class="nav-text">Lambda åŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ›å»ºæŸ¥è¯¢æ¡ä»¶å®ä½“-UserQueryDTO"><span class="nav-number">6.5.1.</span> <span class="nav-text">åˆ›å»ºæŸ¥è¯¢æ¡ä»¶å®ä½“ UserQueryDTO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UserController-ä¸­ä½¿ç”¨-lambdaQuery-ä»£æ›¿æ‰‹åŠ¨åˆ›å»º-Wrapper-æ­¥éª¤"><span class="nav-number">6.5.2.</span> <span class="nav-text">UserController ä¸­ä½¿ç”¨ lambdaQuery ä»£æ›¿æ‰‹åŠ¨åˆ›å»º Wrapper æ­¥éª¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IUserServiceImpl-ä¸­ä½¿ç”¨-lambdaUpdate"><span class="nav-number">6.5.3.</span> <span class="nav-text">IUserServiceImpl ä¸­ä½¿ç”¨ lambdaUpdate</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MybatisPlus-æ‰¹å¤„ç†"><span class="nav-number">6.6.</span> <span class="nav-text">MybatisPlus æ‰¹å¤„ç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é€»è¾‘åˆ é™¤"><span class="nav-number">6.7.</span> <span class="nav-text">é€»è¾‘åˆ é™¤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é€šç”¨æšä¸¾"><span class="nav-number">6.8.</span> <span class="nav-text">é€šç”¨æšä¸¾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ†é¡µ"><span class="nav-number">6.9.</span> <span class="nav-text">åˆ†é¡µ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å®šä¹‰åˆ†é¡µå®ä½“"><span class="nav-number">6.9.1.</span> <span class="nav-text">å®šä¹‰åˆ†é¡µå®ä½“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UserQueryDTO-ç»§æ‰¿åˆ†é¡µå®ä½“"><span class="nav-number">6.9.2.</span> <span class="nav-text">UserQueryDTO ç»§æ‰¿åˆ†é¡µå®ä½“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ†é¡µå®ä½“-PageDTO"><span class="nav-number">6.9.3.</span> <span class="nav-text">åˆ†é¡µå®ä½“ PageDTO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UserController-ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£"><span class="nav-number">6.9.4.</span> <span class="nav-text">UserController ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IUserService-ä¸­åˆ›å»º-queryUsersPage-æ–¹æ³•"><span class="nav-number">6.9.5.</span> <span class="nav-text">IUserService ä¸­åˆ›å»º queryUsersPage æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åœ¨-IUserServiceImpl-ä¸­å®ç°è¯¥æ–¹æ³•"><span class="nav-number">6.9.6.</span> <span class="nav-text">åœ¨ IUserServiceImpl ä¸­å®ç°è¯¥æ–¹æ³•</span></a></li></ol></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">HOME</a>
  
    <a href="/blog/archives" class="mobile-nav-link">ARCHIVES</a>
  
    <a href="/blog/categories" class="mobile-nav-link">CATEGORIES</a>
  
    <a href="/blog/about" class="mobile-nav-link">ABOUT</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2025 Arginsen&#39;s Blog All Rights Reserved.
      </div>
      <div class="site-credit">
        ID  <a href="https://lixupeng.cn" target="_blank">Arginsen</a>
      </div>
      <br>
      <div class="busuanzi-analytics">
        
        <span id="busuanzi_container_site_pv">
          æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
        <span class="post-meta-divider">|</span>
        <!-- <span id="busuanzi_container_site_uv">
          æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
        </span> -->
        <span class="post-count">å…¨ç«™å…± 353k å­—</span>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        
      </div>
  </div> 
</footer>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>
<script src="/blog/js/bootstrap.js"></script>
<script src="/blog/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>


<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bb74e3da22205cadfa4f6e0a31a76ac4";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    


  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/blog/js/totop.js" async=""></script>
</body>
</html>
