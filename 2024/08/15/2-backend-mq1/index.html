<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="OcsZXBpQqAp8163-20wn3epncmCv_UBtqBLZmspy-NA">
  
  <title>ğŸŒŸ åç«¯ | RabbitMQ åŸºç¡€ | Arginsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="BackendRabbitMQ">
  
  
  
  
  <meta name="keywords" content="Backend,RabbitMQ">
<meta property="og:type" content="article">
<meta property="og:title" content="ğŸŒŸ åç«¯ | RabbitMQ åŸºç¡€">
<meta property="og:url" content="https://lixupeng.cn/blog/2024/08/15/2-backend-mq1/index.html">
<meta property="og:site_name" content="Arginsen&#39;s Blog">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://lixupeng.cn/blog/img/rabbitmq.jpg">
<meta property="og:updated_time" content="2025-07-31T15:44:11.025Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸŒŸ åç«¯ | RabbitMQ åŸºç¡€">
<meta name="twitter:image" content="https://lixupeng.cn/blog/img/rabbitmq.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Arginsen&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/blog/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/blog/css/style.css">

  <script src="/blog/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/blog/css/bootstrap.css">
  <link rel="stylesheet" href="/blog/css/fashion.css">
  <link rel="stylesheet" href="/blog/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  



<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/blog/" title="Arginsen&#39;s Blog" rel="home"> Arginsen&#39;s Blog </a>
            
          </h1>
          
          
            <div class="site-description">smells like teen spirit</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/">é¦–é¡µ</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/archives">å½’æ¡£</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/categories">åˆ†ç±»</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/about">å…³äº</a> </li>
                    
              </ul>
            </div>
          </nav>
      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-2-backend-mq1" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/blog/img/rabbitmq.jpg" rel="gallery_cmdraqvio003trlpuxa84mfmf">
        <img src="/blog/img/rabbitmq.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      ğŸŒŸ åç«¯ | RabbitMQ åŸºç¡€
    </h1>
  

      </header>
      <footer class="entry-meta entry-tips">
        
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/blog/categories/notes/">notes</a>

        
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Backend/">Backend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/RabbitMQ/">RabbitMQ</a></li></ul>

        
	<span class="ico-date"></span>
	<a href="/blog/2024/08/15/2-backend-mq1/" class="article-date">
	  <time datetime="2024-08-14T16:00:00.000Z" itemprop="datePublished">å…«æœˆ 15, 2024</time>
	</a>

        <!-- æ·»åŠ å­—æ•°ç»Ÿè®¡ -->
        
          <span class="ico-fontcount"></span><span class="post-count">3.9kå­—</span>
        
      </footer>
    

    <div class="article-entry" itemprop="articleBody">
      
        <p><br><br><a id="more"></a></p>
<h1 id="åŒæ­¥ä¸å¼‚æ­¥"><a href="#åŒæ­¥ä¸å¼‚æ­¥" class="headerlink" title="åŒæ­¥ä¸å¼‚æ­¥"></a>åŒæ­¥ä¸å¼‚æ­¥</h1><p>å¾®æœåŠ¡æ³¨å†Œä¸å‘ç°åï¼Œç›¸äº’è°ƒç”¨å¯ä»¥é‡‡ç”¨ä¹‹å‰æåˆ°çš„ OpenFeign ã€‚ä½†æ˜¯ OpenFeign è°ƒç”¨å‘èµ·åéœ€è¦ç­‰å¾…æœåŠ¡è¿”å›ç»“æœåæ‰èƒ½ç»§ç»­æ‰§è¡Œåé¢çš„ä¸šåŠ¡ï¼Œä¹Ÿå°±æ˜¯æ‰€è¯´çš„ <strong>åŒæ­¥è°ƒç”¨</strong> ï¼Œä¸ºäº†ä¸é˜»æ–­åè¾¹çš„ç¨‹åºï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨åˆ° <strong>å¼‚æ­¥é€šä¿¡</strong> ï¼Œä¾‹å¦‚å‰ç«¯ä¸­çš„æ–¹æ³•å‰è¾¹åŠ  async ã€‚</p>
<p>åŒæ­¥é€šè®¯é¢ä¸´çš„ <strong>é—®é¢˜</strong> æœ‰ï¼šæ‰©å±•æ€§å·®ï¼Œé˜»å¡å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œçº§è”å¤±è´¥å¯¼è‡´æ•´ä¸ªäº‹åŠ¡å›æ»šã€‚</p>
<p>å¼‚æ­¥é€šè®¯å¯ä»¥å®ç° æ“ä½œæŒ‚èµ· ï¼Œä¸å½±å“å…¶ä»–æµç¨‹ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨æ·˜å®å®Œæˆä¸€ç¬”äº¤æ˜“ï¼Œé‡‡ç”¨å¼‚æ­¥é€šè®¯å¯ä»¥åŒæ—¶è°ƒç”¨å¤šä¸ªæœåŠ¡ï¼š</p>
<ol>
<li>ç”¨æˆ·æœåŠ¡ - ä½™é¢å‡æ‰£</li>
<li>è®¢å•æœåŠ¡ - æ›´æ–°è®¢å•çŠ¶æ€</li>
<li>é€šçŸ¥æœåŠ¡ - èŠå¤©çª—é€šçŸ¥ç”¨æˆ·ä¸‹å•æˆåŠŸ</li>
<li>å–å®¶æœåŠ¡ - å•†å“è¢«ä¸‹å•é€šçŸ¥å‘è´§</li>
<li>ç§¯åˆ†æœåŠ¡ - è´­ä¹°ç´¯åŠ ç§¯åˆ†</li>
<li>ç‰©æµæœåŠ¡ - æ›´æ–°ç‰©æµçŠ¶æ€é¡µ</li>
</ol>
<p>ä»¥ä¸ŠæœåŠ¡å‡å¯å¼‚æ­¥è°ƒç”¨ï¼Œè‡ªè¡Œå®Œæˆï¼Œè€Œæ•´ä¸ªä¸‹å•ç¯èŠ‚ä¸åº”é€šçŸ¥æ¶ˆæ¯å‘ä¸äº†è€Œè¶³èµ›ä½ä¸åŠ¨å¯¼è‡´å¤±è´¥é€€è¿˜é‡‘é¢ï¼Œå“ªä¸ªæ­¥éª¤å‡ºé—®é¢˜äº†ï¼Œç”±å¯¹åº”æ­¥éª¤å¤„ç†è€Œä¸å½±å“å…¨æµç¨‹ã€‚</p>
<p>å¼‚æ­¥è°ƒç”¨æ–¹å¼å…¶å®å°±æ˜¯åŸºäºæ¶ˆæ¯é€šçŸ¥çš„æ–¹å¼ï¼Œä¸€èˆ¬åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼š</p>
<ul>
<li>æ¶ˆæ¯å‘é€è€…ï¼šæŠ•é€’æ¶ˆæ¯çš„äººï¼Œå°±æ˜¯åŸæ¥çš„è°ƒç”¨æ–¹</li>
<li>æ¶ˆæ¯Brokerï¼šç®¡ç†ã€æš‚å­˜ã€è½¬å‘æ¶ˆæ¯ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆå¾®ä¿¡æœåŠ¡å™¨</li>
<li>æ¶ˆæ¯æ¥æ”¶è€…ï¼šæ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯çš„äººï¼Œå°±æ˜¯åŸæ¥çš„æœåŠ¡æä¾›æ–¹</li>
</ul>
<p>å‡å¦‚äº§å“ç»ç†æå‡ºäº†æ–°çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¦åœ¨æ”¯ä»˜æˆåŠŸåæ›´æ–°ç”¨æˆ·ç§¯åˆ†ã€‚æ”¯ä»˜ä»£ç å®Œå…¨ä¸ç”¨å˜æ›´ï¼Œè€Œä»…ä»…æ˜¯è®©ç§¯åˆ†æœåŠ¡ä¹Ÿè®¢é˜…æ¶ˆæ¯å³å¯ã€‚</p>
<p>ä¸ç®¡åæœŸå¢åŠ äº†å¤šå°‘æ¶ˆæ¯è®¢é˜…è€…ï¼Œä½œä¸ºæ”¯ä»˜æœåŠ¡æ¥è®²ï¼Œæ‰§è¡Œé—®æ‰£å‡ä½™é¢ã€æ›´æ–°æ”¯ä»˜æµæ°´çŠ¶æ€åï¼Œå‘é€æ¶ˆæ¯å³å¯ã€‚ä¸šåŠ¡è€—æ—¶ä»…ä»…æ˜¯è¿™ä¸‰éƒ¨åˆ†ä¸šåŠ¡è€—æ—¶ï¼Œå¤§å¤§æé«˜äº†ä¸šåŠ¡æ€§èƒ½ã€‚</p>
<h1 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h1><h2 id="docker-å®‰è£…"><a href="#docker-å®‰è£…" class="headerlink" title="docker å®‰è£…"></a>docker å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line"> -e RABBITMQ_DEFAULT_USER=itheima \</span><br><span class="line"> -e RABBITMQ_DEFAULT_PASS=123321 \</span><br><span class="line"> -v mq-plugins:/plugins \</span><br><span class="line"> --name mq \</span><br><span class="line"> --hostname mq \</span><br><span class="line"> -p 15672:15672 \</span><br><span class="line"> -p 5672:5672 \</span><br><span class="line"> --network hm-net\</span><br><span class="line"> -d \</span><br><span class="line"> rabbitmq:3.8-management</span><br></pre></td></tr></table></figure>
<p>ä¸¤ä¸ªç«¯å£ï¼š</p>
<ul>
<li>15672ï¼šRabbitMQ æä¾›çš„ç®¡ç†æ§åˆ¶å°çš„ç«¯å£</li>
<li>5672ï¼šRabbitMQ çš„æ¶ˆæ¯å‘é€å¤„ç†æ¥å£</li>
</ul>
<p>MQ çš„æ¶æ„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">              â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">             ï½œ                          â€”â€”â€”â€”â€”-       ï½œ</span><br><span class="line">             ï½œ     â€”â€”â€”â€”â€”â€”â€”â€”â€”           ï½œqueueï½œ      â†˜ï¸        â€”â€”â€”â€”â€”â€”â€”â€”  </span><br><span class="line">             ï½œ    ï½œexchangeï½œ   â†—ï¸      â€”â€”â€”â€”â€”-       ï½œ       ï½œ consumerï½œ</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”   â†—ï¸     â€”â€”â€”â€”â€”â€”â€”â€”â€”           â€”â€”â€”â€”â€”         ï½œ         â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">Publisher |  ï½œ                        ï½œqueueï½œ       ï½œ</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”   â†˜ï¸     â€”â€”â€”â€”â€”â€”â€”â€”â€”     â†—ï¸     â€”â€”â€”â€”â€”         â†˜ï¸ </span><br><span class="line">             ï½œ    ï½œexchangeï½œ           â€”â€”â€”â€”â€”        ï½œ         â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">             ï½œ     â€”â€”â€”â€”â€”â€”â€”â€”â€”     â¡ï¸    ï½œqueneï½œ      â¡ï¸      ï½œconsumerï½œ</span><br><span class="line">             ï½œ                          â€”â€”â€”â€”â€”        ï½œ        â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">             ï½œ                                       ï½œâ€”â€”â€”â€”</span><br><span class="line">             ï½œ    VirtualHost 1                      ï½œ   ï½œ</span><br><span class="line">              â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”    ï½œ</span><br><span class="line">                    ï½œ VirtualHost 2                       ï½œ</span><br><span class="line">                     â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">                       RabbitMQ server Broker</span><br></pre></td></tr></table></figure>
<ul>
<li>publisherï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯å‘é€æ¶ˆæ¯çš„ä¸€æ–¹</li>
<li>consumerï¼šæ¶ˆè´¹è€…ï¼Œä¹Ÿå°±æ˜¯æ¶ˆè´¹æ¶ˆæ¯çš„ä¸€æ–¹</li>
<li>queueï¼šé˜Ÿåˆ—ï¼Œå­˜å‚¨æ¶ˆæ¯ã€‚ç”Ÿäº§è€…æŠ•é€’çš„æ¶ˆæ¯ä¼šæš‚å­˜åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…æ¶ˆè´¹è€…å¤„ç†</li>
<li>exchangeï¼šäº¤æ¢æœºï¼Œè´Ÿè´£æ¶ˆæ¯è·¯ç”±ã€‚ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ç”±äº¤æ¢æœºå†³å®šæŠ•é€’åˆ°å“ªä¸ªé˜Ÿåˆ—ã€‚</li>
<li>virtual hostï¼šè™šæ‹Ÿä¸»æœºï¼Œèµ·åˆ°æ•°æ®éš”ç¦»çš„ä½œç”¨ã€‚æ¯ä¸ªè™šæ‹Ÿä¸»æœºç›¸äº’ç‹¬ç«‹ï¼Œæœ‰å„è‡ªçš„exchangeã€queue</li>
</ul>
<h2 id="ç½‘é¡µæ“ä½œ"><a href="#ç½‘é¡µæ“ä½œ" class="headerlink" title="ç½‘é¡µæ“ä½œ"></a>ç½‘é¡µæ“ä½œ</h2><ol>
<li><p>RabbitMQ ç”¨ docker run åï¼Œè®¿é—® ip + 15672 å°±å¯ä»¥è¿›å…¥ç®¡ç†æ§åˆ¶å°ï¼Œä½¿ç”¨æŒ‡å®šçš„å¯†ç ç™»å½•</p>
</li>
<li><p>è¿›å…¥ Queues èœå•å¯ä»¥åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ— hello.queue1ï¼Œåˆ›å»ºä¸€ä¸ªé˜Ÿåˆ— hello.queue2</p>
</li>
<li>è¿›å…¥ Exchanges èœå• - amq.fanout äº¤æ¢æœº - Bindings èœå• - ç»‘å®šä¸Šè¾¹åˆ›å»ºçš„ä¸¤ä¸ªé˜Ÿåˆ—</li>
<li>é€šè¿‡ Exchange é¡µé¢çš„äº¤æ¢æœº amq.fanout ï¼Œå¯ä»¥å‘é€æ¶ˆæ¯</li>
<li>åœ¨ Queues é¡µé¢å¯ä»¥å‘ç°åˆ›å»ºçš„ä¸¤ä¸ªé˜Ÿåˆ—å‡æ”¶åˆ° 1 æ¡æ¶ˆæ¯</li>
<li>å¦‚æœ‰æ¶ˆè´¹è€…ç›‘å¬ MQ è¿™ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå°†æ”¶åˆ°æ¶ˆæ¯é€šçŸ¥</li>
</ol>
<p>å¯¹äºå…¬å¸æœ‰å¤šä¸ªä¸åŒé¡¹ç›®çš„æƒ…å†µï¼Œé€šå¸¸ä¼šå…±åŒä½¿ç”¨ä¸€å¥— MQ é›†ç¾¤ï¼Œè¿™æ—¶ MQ çš„ virtual host ä¼šæä¾›éš”ç¦»çš„åŠŸèƒ½ã€‚<br>åªéœ€è¦ç»™æ¯ä¸ªé¡¹ç›®åˆ›å»ºç‹¬ç«‹çš„è¿ç»´<strong>è´¦å·</strong>ï¼Œå°†<strong>ç®¡ç†æƒé™</strong>éš”ç¦»ï¼›ç»™æ¯ä¸ªé¡¹ç›®ä¸‹åˆ›å»ºä¸åŒçš„ <strong>virtual host</strong> ï¼Œå°†æ¯ä¸ªé¡¹ç›®çš„<strong>æ•°æ®</strong>éš”ç¦»ã€‚</p>
<h1 id="Spring-AMQP"><a href="#Spring-AMQP" class="headerlink" title="Spring AMQP"></a>Spring AMQP</h1><p>RabbitMQ é‡‡ç”¨äº† AMQP åè®®ï¼Œå› æ­¤å®ƒå…·å¤‡è·¨è¯­è¨€çš„ç‰¹æ€§ã€‚ä»»ä½•è¯­è¨€åªè¦éµå¾ª AMQP åè®®æ”¶å‘æ¶ˆæ¯ï¼Œéƒ½å¯ä»¥ä¸RabbitMQ äº¤äº’ã€‚å¹¶ä¸” RabbitMQ å®˜æ–¹ä¹Ÿæä¾›äº†å„ç§ä¸åŒè¯­è¨€çš„å®¢æˆ·ç«¯ã€‚</p>
<p>Spring çš„å®˜æ–¹åˆšå¥½åŸºäº RabbitMQ æä¾›äº†è¿™æ ·ä¸€å¥—æ¶ˆæ¯æ”¶å‘çš„æ¨¡æ¿å·¥å…·ï¼šSpringAMQPã€‚å¹¶ä¸”è¿˜åŸºäº SpringBoot å¯¹å…¶å®ç°äº†è‡ªåŠ¨è£…é…ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚</p>
<p>SpringAMQP æä¾›äº†ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>è‡ªåŠ¨å£°æ˜é˜Ÿåˆ—ã€äº¤æ¢æœºåŠå…¶ç»‘å®šå…³ç³»</li>
<li>åŸºäºæ³¨è§£çš„ç›‘å¬å™¨æ¨¡å¼ï¼Œå¼‚æ­¥æ¥æ”¶æ¶ˆæ¯</li>
<li>å°è£…äº† RabbitTemplate å·¥å…·ï¼Œç”¨äºå‘é€æ¶ˆæ¯</li>
</ul>
<h2 id="é¡¹ç›®é…ç½®ä¾èµ–"><a href="#é¡¹ç›®é…ç½®ä¾èµ–" class="headerlink" title="é¡¹ç›®é…ç½®ä¾èµ–"></a>é¡¹ç›®é…ç½®ä¾èµ–</h2><p>åœ¨çˆ¶å·¥ç¨‹é…ç½®ä¾èµ–ï¼Œå­å·¥ç¨‹åŒ…å«ä¸¤ä¸ªæ¨¡å— publisher å’Œ consumer ï¼Œå‡å¯ä»¥ä½¿ç”¨ SpringAMQP</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.itcast.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mq-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>publisher<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>consumer<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--AMQPä¾èµ–ï¼ŒåŒ…å«RabbitMQ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å•å…ƒæµ‹è¯•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆæ¯å‘é€"><a href="#æ¶ˆæ¯å‘é€" class="headerlink" title="æ¶ˆæ¯å‘é€"></a>æ¶ˆæ¯å‘é€</h2><h3 id="publisher-é…ç½®-mq-åœ°å€"><a href="#publisher-é…ç½®-mq-åœ°å€" class="headerlink" title="publisher é…ç½® mq åœ°å€"></a>publisher é…ç½® mq åœ°å€</h3><p>é¦–å…ˆé…ç½® MQ åœ°å€ï¼Œåœ¨ publisher æœåŠ¡çš„ application.yml ä¸­æ·»åŠ é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># ä½ çš„è™šæ‹ŸæœºIP</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># ç«¯å£</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/hmall</span> <span class="comment"># è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">hmall</span> <span class="comment"># ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span> <span class="comment"># å¯†ç </span></span><br></pre></td></tr></table></figure>
<h3 id="æ¶ˆæ¯å‘é€ç±»-SpringAmqpTest"><a href="#æ¶ˆæ¯å‘é€ç±»-SpringAmqpTest" class="headerlink" title="æ¶ˆæ¯å‘é€ç±» SpringAmqpTest"></a>æ¶ˆæ¯å‘é€ç±» SpringAmqpTest</h3><p>publisher æœåŠ¡ä¸­ç¼–å†™æµ‹è¯•ç±» SpringAmqpTestï¼Œå¹¶åˆ©ç”¨ RabbitTemplate å®ç°æ¶ˆæ¯å‘é€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.publisher.amqp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringAmqpTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSimpleQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é˜Ÿåˆ—åç§°</span></span><br><span class="line">        String queueName = <span class="string">"simple.queue"</span>;</span><br><span class="line">        <span class="comment">// æ¶ˆæ¯</span></span><br><span class="line">        String message = <span class="string">"hello, spring amqp!"</span>;</span><br><span class="line">        <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">        rabbitTemplate.convertAndSend(queueName, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆæ¯æ¥æ”¶"><a href="#æ¶ˆæ¯æ¥æ”¶" class="headerlink" title="æ¶ˆæ¯æ¥æ”¶"></a>æ¶ˆæ¯æ¥æ”¶</h2><h3 id="consumer-é…ç½®-mq-åœ°å€"><a href="#consumer-é…ç½®-mq-åœ°å€" class="headerlink" title="consumer é…ç½® mq åœ°å€"></a>consumer é…ç½® mq åœ°å€</h3><p>åœ¨ consumer æœåŠ¡çš„ application.yml ä¸­æ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># ä½ çš„è™šæ‹ŸæœºIP</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># ç«¯å£</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/hmall</span> <span class="comment"># è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">hmall</span> <span class="comment"># ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span> <span class="comment"># å¯†ç </span></span><br></pre></td></tr></table></figure>
<h3 id="æ¶ˆæ¯ç›‘å¬ç±»-SpringRabbitListener"><a href="#æ¶ˆæ¯ç›‘å¬ç±»-SpringRabbitListener" class="headerlink" title="æ¶ˆæ¯ç›‘å¬ç±» SpringRabbitListener"></a>æ¶ˆæ¯ç›‘å¬ç±» SpringRabbitListener</h3><p>ç„¶ååœ¨ consumer æœåŠ¡çš„ com.itheima.consumer.listener åŒ…ä¸­æ–°å»ºä¸€ä¸ªç±» SpringRabbitListener</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.consumer.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringRabbitListener</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨ RabbitListener æ¥å£°æ˜è¦ç›‘å¬çš„é˜Ÿåˆ—ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// å°†æ¥ä¸€æ—¦ç›‘å¬çš„é˜Ÿåˆ—ä¸­æœ‰äº†æ¶ˆæ¯ï¼Œå°±ä¼šæ¨é€ç»™å½“å‰æœåŠ¡ï¼Œè°ƒç”¨å½“å‰æ–¹æ³•ï¼Œå¤„ç†æ¶ˆæ¯ã€‚</span></span><br><span class="line">    <span class="comment">// å¯ä»¥çœ‹åˆ°æ–¹æ³•ä½“ä¸­æ¥æ”¶çš„å°±æ˜¯æ¶ˆæ¯ä½“çš„å†…å®¹</span></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"simple.queue"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenSimpleQueueMessage</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"spring æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ consumer æœåŠ¡ï¼Œç„¶ååœ¨ publisher æœåŠ¡ä¸­è¿è¡Œæµ‹è¯•ä»£ç ï¼Œå‘é€ MQ æ¶ˆæ¯ã€‚æœ€ç»ˆ consumer æ”¶åˆ°æ¶ˆæ¯</p>
<h2 id="WorkQueues-æ¨¡å‹"><a href="#WorkQueues-æ¨¡å‹" class="headerlink" title="WorkQueues æ¨¡å‹"></a>WorkQueues æ¨¡å‹</h2><p>ä»»åŠ¡æ¨¡å‹ã€‚è®©å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯å¤„ç†çš„é€Ÿåº¦å°±èƒ½å¤§å¤§æé«˜äº†ã€‚</p>
<p>é…ç½®æœåŠ¡æ¶ˆè´¹èƒ½åŠ›ï¼Œè¿™æ ·ä½¿å¾—å¤„ç†å¿«çš„æ¶ˆè´¹è€…å¯ä»¥èƒ½è€…å¤šåŠ³ï¼Œå……åˆ†åˆ©ç”¨åˆ°æ¶ˆè´¹è€…èƒ½åŠ›ï¼Œæœ‰æ•ˆé¿å…æ¶ˆæ¯ç§¯å‹ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">listener:</span></span><br><span class="line">      <span class="attr">simple:</span></span><br><span class="line">        <span class="attr">prefetch:</span> <span class="number">1</span> <span class="comment"># æ¯æ¬¡åªèƒ½è·å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¤„ç†å®Œæˆæ‰èƒ½è·å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯</span></span><br></pre></td></tr></table></figure>
<h2 id="äº¤æ¢æœºç±»å‹"><a href="#äº¤æ¢æœºç±»å‹" class="headerlink" title="äº¤æ¢æœºç±»å‹"></a>äº¤æ¢æœºç±»å‹</h2><p>Exchangeï¼ˆäº¤æ¢æœºï¼‰åªè´Ÿè´£æ¥æ”¶ç”Ÿäº§è€…çš„æ¶ˆæ¯å¹¶è½¬å‘æ¶ˆæ¯ï¼Œä¸å…·å¤‡å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œå› æ­¤å¦‚æœæ²¡æœ‰ä»»ä½•é˜Ÿåˆ—ä¸ Exchange ç»‘å®šï¼Œæˆ–è€…æ²¡æœ‰ç¬¦åˆè·¯ç”±è§„åˆ™çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸¢å¤±ã€‚</p>
<p>äº¤æ¢æœºçš„ç±»å‹æœ‰å››ç§ï¼š</p>
<ul>
<li>Fanoutï¼šå¹¿æ’­ï¼Œå°†æ¶ˆæ¯äº¤ç»™æ‰€æœ‰ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—ã€‚æˆ‘ä»¬æœ€æ—©åœ¨æ§åˆ¶å°ä½¿ç”¨çš„æ­£æ˜¯Fanoutäº¤æ¢æœº</li>
<li>Directï¼šè®¢é˜…ï¼ŒåŸºäº RoutingKeyï¼ˆè·¯ç”±keyï¼‰å‘é€ç»™è®¢é˜…äº†æ¶ˆæ¯çš„é˜Ÿåˆ—</li>
<li>Topicï¼šé€šé…ç¬¦è®¢é˜…ï¼Œä¸ Direct ç±»ä¼¼ï¼Œåªä¸è¿‡ RoutingKey å¯ä»¥ä½¿ç”¨é€šé…ç¬¦</li>
<li>Headersï¼šå¤´åŒ¹é…ï¼ŒåŸºäº MQ çš„æ¶ˆæ¯å¤´åŒ¹é…ï¼Œç”¨çš„è¾ƒå°‘ã€‚</li>
</ul>
<h3 id="Fanout-äº¤æ¢æœº"><a href="#Fanout-äº¤æ¢æœº" class="headerlink" title="Fanout äº¤æ¢æœº"></a>Fanout äº¤æ¢æœº</h3><ul>
<li>1ï¼‰  å¯ä»¥æœ‰å¤šä¸ªé˜Ÿåˆ—</li>
<li>2ï¼‰  æ¯ä¸ªé˜Ÿåˆ—éƒ½è¦ç»‘å®šåˆ°Exchangeï¼ˆäº¤æ¢æœºï¼‰</li>
<li>3ï¼‰  ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ï¼Œåªèƒ½å‘é€åˆ°äº¤æ¢æœº</li>
<li>4ï¼‰  äº¤æ¢æœºæŠŠæ¶ˆæ¯å‘é€ç»™ç»‘å®šè¿‡çš„æ‰€æœ‰é˜Ÿåˆ—</li>
<li>5ï¼‰  è®¢é˜…é˜Ÿåˆ—çš„æ¶ˆè´¹è€…éƒ½èƒ½æ‹¿åˆ°æ¶ˆæ¯</li>
</ul>
<h3 id="Direct-äº¤æ¢æœº"><a href="#Direct-äº¤æ¢æœº" class="headerlink" title="Direct äº¤æ¢æœº"></a>Direct äº¤æ¢æœº</h3><ul>
<li>é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šï¼Œä¸æ˜¯ä»»æ„ç»‘å®šï¼Œè€Œæ˜¯è¦æŒ‡å®šä¸€ä¸ª RoutingKeyï¼ˆè·¯ç”±keyï¼‰</li>
<li>æ¶ˆæ¯çš„å‘é€æ–¹åœ¨ å‘ Exchangeå‘é€æ¶ˆæ¯æ—¶ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šæ¶ˆæ¯çš„ RoutingKeyã€‚</li>
<li>Exchange ä¸å†æŠŠæ¶ˆæ¯äº¤ç»™æ¯ä¸€ä¸ªç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯æ ¹æ®æ¶ˆæ¯çš„ Routing Key è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰é˜Ÿåˆ—çš„ Routingkey ä¸æ¶ˆæ¯çš„ Routing keyå®Œå…¨ä¸€è‡´ï¼Œæ‰ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ— direct.queue1 å’Œ direct.queue2, åˆ†åˆ«ç»‘å®š routing keyï¼š</p>
<table>
<thead>
<tr>
<th>To</th>
<th>Routing key</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td>direct.queue1</td>
<td>blue</td>
<td>/</td>
</tr>
<tr>
<td>direct.queue1</td>
<td>red</td>
<td>/</td>
</tr>
<tr>
<td>direct.queue2</td>
<td>red</td>
<td>/</td>
</tr>
<tr>
<td>direct.queue2</td>
<td>yellow</td>
<td>/</td>
</tr>
</tbody>
</table>
<h4 id="æ¶ˆæ¯æ¥æ”¶-1"><a href="#æ¶ˆæ¯æ¥æ”¶-1" class="headerlink" title="æ¶ˆæ¯æ¥æ”¶"></a>æ¶ˆæ¯æ¥æ”¶</h4><p>åœ¨ consumer æœåŠ¡çš„ SpringRabbitListener ä¸­æ·»åŠ æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener</span>(queues = <span class="string">"direct.queue1"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenDirectQueue1</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ¶ˆè´¹è€…1æ¥æ”¶åˆ°direct.queue1çš„æ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener</span>(queues = <span class="string">"direct.queue2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenDirectQueue2</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ¶ˆè´¹è€…2æ¥æ”¶åˆ°direct.queue2çš„æ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¶ˆæ¯å‘é€-1"><a href="#æ¶ˆæ¯å‘é€-1" class="headerlink" title="æ¶ˆæ¯å‘é€"></a>æ¶ˆæ¯å‘é€</h4><p>åœ¨ publisher æœåŠ¡çš„ SpringAmqpTest ç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSendDirectExchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// äº¤æ¢æœºåç§°</span></span><br><span class="line">    String exchangeName = <span class="string">"hmall.direct"</span>;</span><br><span class="line">    <span class="comment">// æ¶ˆæ¯</span></span><br><span class="line">    String message1 = <span class="string">"çº¢è‰²è­¦æŠ¥ï¼æ—¥æœ¬ä¹±æ’æ ¸åºŸæ°´ï¼Œå¯¼è‡´æµ·æ´‹ç”Ÿç‰©å˜å¼‚ï¼ŒæƒŠç°å“¥æ–¯æ‹‰ï¼"</span>;</span><br><span class="line">    <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">"red"</span>, message1);</span><br><span class="line">    <span class="comment">// æ¢ä¸ª key</span></span><br><span class="line">    String message2 = <span class="string">"æœ€æ–°æŠ¥é“ï¼Œå“¥æ–¯æ‹‰æ˜¯å±…æ°‘è‡ªæ²»å·¨å‹æ°”çƒï¼Œè™šæƒŠä¸€åœºï¼"</span>;</span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">"blue"</span>, message2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•å‘é€ red çš„ routing keyï¼Œæ‰€ä»¥ message1 å°†è¢«å‘åˆ° direct.queue1 å’Œ direct.queue2<br>æµ‹è¯•å‘é€ blue çš„ routing keyï¼Œæ‰€ä»¥ message2 å°†è¢«å‘åˆ° direct.queue1</p>
<h3 id="Topic-äº¤æ¢æœº"><a href="#Topic-äº¤æ¢æœº" class="headerlink" title="Topic äº¤æ¢æœº"></a>Topic äº¤æ¢æœº</h3><p>Topic ç±»å‹çš„ Exchange ä¸ <strong>Direct</strong> ç›¸æ¯”ï¼Œéƒ½æ˜¯å¯ä»¥æ ¹æ® RoutingKey æŠŠæ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ã€‚<br>åªä¸è¿‡ Topic ç±»å‹ Exchange å¯ä»¥è®©é˜Ÿåˆ—åœ¨ç»‘å®š BindingKey çš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦ï¼</p>
<p>BindingKey ä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥ . åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š item.insert</p>
<p>é€šé…ç¬¦è§„åˆ™ï¼š</p>
<ul>
<li>#ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯</li>
<li>*ï¼šåŒ¹é…ä¸å¤šä¸å°‘æ°å¥½1ä¸ªè¯</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>item.#ï¼šèƒ½å¤ŸåŒ¹é… item.spu.insert æˆ–è€… item.spu</li>
<li>item.*ï¼šåªèƒ½åŒ¹é… item.spu åˆ°ç¬¬äºŒå±‚æˆªæ­¢</li>
</ul>
<p>å‡å¦‚æ­¤æ—¶ publisher å‘é€çš„æ¶ˆæ¯ä½¿ç”¨çš„ RoutingKey å…±æœ‰å››ç§ï¼š</p>
<ul>
<li>china.news ä»£è¡¨æœ‰ä¸­å›½çš„æ–°é—»æ¶ˆæ¯ï¼›</li>
<li>china.weather ä»£è¡¨ä¸­å›½çš„å¤©æ°”æ¶ˆæ¯ï¼›</li>
<li>japan.news åˆ™ä»£è¡¨æ—¥æœ¬æ–°é—»</li>
<li>japan.weather ä»£è¡¨æ—¥æœ¬çš„å¤©æ°”æ¶ˆæ¯ï¼›</li>
</ul>
<p>ç°åœ¨æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…è®¢é˜… china çš„æ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªæ¶ˆè´¹è€…è®¢é˜… new ç›¸å…³çš„æ¶ˆæ¯ï¼š</p>
<ul>
<li>topic.queue1ï¼šç»‘å®šçš„æ˜¯china.# ï¼Œå‡¡æ˜¯ä»¥ china.å¼€å¤´çš„routing key éƒ½ä¼šè¢«åŒ¹é…åˆ°ï¼ŒåŒ…æ‹¬ï¼š<ul>
<li>china.news</li>
<li>china.weather</li>
</ul>
</li>
<li>topic.queue2ï¼šç»‘å®šçš„æ˜¯#.news ï¼Œå‡¡æ˜¯ä»¥ .newsç»“å°¾çš„ routing key éƒ½ä¼šè¢«åŒ¹é…ã€‚åŒ…æ‹¬:<ul>
<li>china.news</li>
<li>japan.news</li>
</ul>
</li>
</ul>
<h2 id="å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº"><a href="#å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº" class="headerlink" title="å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº"></a>å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº</h2><p>ç¨‹åºå¯åŠ¨æ—¶æ£€æŸ¥é˜Ÿåˆ—å’Œäº¤æ¢æœºæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨è‡ªåŠ¨åˆ›å»ºã€‚</p>
<p>SpringAMQP æä¾›äº†ä¸€ä¸ª Queue ç±»ï¼Œç”¨æ¥åˆ›å»ºé˜Ÿåˆ—ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Queue</span> <span class="keyword">extends</span> <span class="title">AbstractDeclarable</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SpringAMQP æä¾›äº† ExchangeBuilder æ¥è¡¨ç¤ºæ‰€æœ‰ä¸åŒç±»å‹çš„äº¤æ¢æœº.</p>
<p>ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœºæ—¶ï¼Œåˆ™éœ€è¦ä½¿ç”¨ BindingBuilder æ¥åˆ›å»º Binding å¯¹è±¡.</p>
<h3 id="fanout-å£°æ˜"><a href="#fanout-å£°æ˜" class="headerlink" title="fanout å£°æ˜"></a>fanout å£°æ˜</h3><p>åœ¨consumerä¸­åˆ›å»ºä¸€ä¸ªç±»ï¼Œå£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº.åˆ›å»º hmall.fanout äº¤æ¢æœºï¼›åˆ›å»º fanout.queue1 å’Œ fanout.queue2 ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œæ¥ç€åˆ†åˆ«æŠŠä¸¤ä¸ªé˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœºä¸Šã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.consumer.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Binding;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.BindingBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.FanoutExchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Queue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FanoutConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å£°æ˜äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Fanoutç±»å‹äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FanoutExchange <span class="title">fanoutExchange</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FanoutExchange(<span class="string">"hmall.fanout"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¬¬1ä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">fanoutQueue1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"fanout.queue1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">bindingQueue1</span><span class="params">(Queue fanoutQueue1, FanoutExchange fanoutExchange)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue1).to(fanoutExchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¬¬2ä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">fanoutQueue2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"fanout.queue2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">bindingQueue2</span><span class="params">(Queue fanoutQueue2, FanoutExchange fanoutExchange)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue2).to(fanoutExchange);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="direct-å£°æ˜"><a href="#direct-å£°æ˜" class="headerlink" title="direct å£°æ˜"></a>direct å£°æ˜</h3><p>direct æ¨¡å¼ç”±äºè¦ç»‘å®šå¤šä¸ª KEYï¼Œä¼šéå¸¸éº»çƒ¦ï¼Œæ¯ä¸€ä¸ª Key éƒ½è¦ç¼–å†™ä¸€ä¸ª bindingï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.consumer.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DirectConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å£°æ˜äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Directç±»å‹äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DirectExchange <span class="title">directExchange</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ExchangeBuilder.directExchange(<span class="string">"hmall.direct"</span>).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¬¬1ä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">directQueue1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"direct.queue1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">bindingQueue1WithRed</span><span class="params">(Queue directQueue1, DirectExchange directExchange)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(directQueue1).to(directExchange).with(<span class="string">"red"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">bindingQueue1WithBlue</span><span class="params">(Queue directQueue1, DirectExchange directExchange)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(directQueue1).to(directExchange).with(<span class="string">"blue"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¬¬2ä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">directQueue2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(<span class="string">"direct.queue2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">bindingQueue2WithRed</span><span class="params">(Queue directQueue2, DirectExchange directExchange)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(directQueue2).to(directExchange).with(<span class="string">"red"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">bindingQueue2WithYellow</span><span class="params">(Queue directQueue2, DirectExchange directExchange)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(directQueue2).to(directExchange).with(<span class="string">"yellow"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŸºäºæ³¨è§£å£°æ˜"><a href="#åŸºäºæ³¨è§£å£°æ˜" class="headerlink" title="åŸºäºæ³¨è§£å£°æ˜"></a>åŸºäºæ³¨è§£å£°æ˜</h3><p>åŸºäº @Bean çš„æ–¹å¼å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºæ¯”è¾ƒéº»çƒ¦ï¼ŒSpring è¿˜æä¾›äº†åŸºäºæ³¨è§£æ–¹å¼æ¥å£°æ˜ã€‚è¿™æ ·å¯ä»¥ç›´æ¥å°†é˜Ÿåˆ—åã€äº¤æ¢æœºã€routing key åŒæ—¶ä¼ å…¥è¿›è¡Œæ³¨å†Œç›‘å¬ï¼ˆæ¶ˆè´¹è€…ï¼‰</p>
<h4 id="Direct-æ³¨è§£å£°æ˜"><a href="#Direct-æ³¨è§£å£°æ˜" class="headerlink" title="Direct æ³¨è§£å£°æ˜"></a>Direct æ³¨è§£å£°æ˜</h4><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åŒæ ·å£°æ˜ Direct æ¨¡å¼çš„äº¤æ¢æœºå’Œé˜Ÿåˆ—ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener</span>(bindings = <span class="meta">@QueueBinding</span>(</span><br><span class="line">    value = <span class="meta">@Queue</span>(name = <span class="string">"direct.queue1"</span>),</span><br><span class="line">    exchange = <span class="meta">@Exchange</span>(name = <span class="string">"hmall.direct"</span>, type = ExchangeTypes.DIRECT),</span><br><span class="line">    key = &#123;<span class="string">"red"</span>, <span class="string">"blue"</span>&#125;</span><br><span class="line">))</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenDirectQueue1</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ¶ˆè´¹è€…1æ¥æ”¶åˆ°direct.queue1çš„æ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener</span>(bindings = <span class="meta">@QueueBinding</span>(</span><br><span class="line">    value = <span class="meta">@Queue</span>(name = <span class="string">"direct.queue2"</span>),</span><br><span class="line">    exchange = <span class="meta">@Exchange</span>(name = <span class="string">"hmall.direct"</span>, type = ExchangeTypes.DIRECT),</span><br><span class="line">    key = &#123;<span class="string">"red"</span>, <span class="string">"yellow"</span>&#125;</span><br><span class="line">))</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenDirectQueue2</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ¶ˆè´¹è€…2æ¥æ”¶åˆ°direct.queue2çš„æ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Topic-æ³¨è§£å£°æ˜"><a href="#Topic-æ³¨è§£å£°æ˜" class="headerlink" title="Topic æ³¨è§£å£°æ˜"></a>Topic æ³¨è§£å£°æ˜</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener</span>(bindings = <span class="meta">@QueueBinding</span>(</span><br><span class="line">    value = <span class="meta">@Queue</span>(name = <span class="string">"topic.queue1"</span>),</span><br><span class="line">    exchange = <span class="meta">@Exchange</span>(name = <span class="string">"hmall.topic"</span>, type = ExchangeTypes.TOPIC),</span><br><span class="line">    key = <span class="string">"china.#"</span></span><br><span class="line">))</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenTopicQueue1</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ¶ˆè´¹è€…1æ¥æ”¶åˆ°topic.queue1çš„æ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener</span>(bindings = <span class="meta">@QueueBinding</span>(</span><br><span class="line">    value = <span class="meta">@Queue</span>(name = <span class="string">"topic.queue2"</span>),</span><br><span class="line">    exchange = <span class="meta">@Exchange</span>(name = <span class="string">"hmall.topic"</span>, type = ExchangeTypes.TOPIC),</span><br><span class="line">    key = <span class="string">"#.news"</span></span><br><span class="line">))</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenTopicQueue2</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ¶ˆè´¹è€…2æ¥æ”¶åˆ°topic.queue2çš„æ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆæ¯è½¬æ¢å™¨"><a href="#æ¶ˆæ¯è½¬æ¢å™¨" class="headerlink" title="æ¶ˆæ¯è½¬æ¢å™¨"></a>æ¶ˆæ¯è½¬æ¢å™¨</h2><p>Spring çš„æ¶ˆæ¯å‘é€ä»£ç æ¥æ”¶çš„æ¶ˆæ¯ä½“æ˜¯ä¸€ä¸ª Objectï¼Œåœ¨æ•°æ®ä¼ è¾“æ—¶ä¼šå°†æ¶ˆæ¯åºåˆ—åŒ–ä¸ºå­—èŠ‚å‘é€ç»™MQï¼Œ æ¥æ”¶æ¶ˆæ¯æ—¶åˆ™æŠŠå­—èŠ‚ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ã€‚ Spring é‡‡ç”¨åºåˆ—åŒ–æ–¹å¼æ˜¯ JDK åºåˆ—åŒ–ã€‚ç„¶è€Œ JDK åºåˆ—åŒ–å­˜åœ¨ æ•°æ®ä½“ç§¯è¿‡å¤§ã€æœ‰å®‰å…¨æ¼æ´ã€å¯è¯»æ€§å·®ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½® JSON è½¬æ¢å™¨åšåºåˆ—åŒ–å’Œååºåˆ—åŒ–</p>
<p>åœ¨ publisher å’Œ consumer ä¸¤ä¸ªæœåŠ¡ä¸­éƒ½å¼•å…¥ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®æ¶ˆæ¯è½¬æ¢å™¨ï¼Œåœ¨ publisher å’Œ consumer ä¸¤ä¸ªæœåŠ¡çš„å¯åŠ¨ç±»ä¸­æ·»åŠ ä¸€ä¸ª Bean å³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> MessageConverter <span class="title">messageConverter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1.å®šä¹‰æ¶ˆæ¯è½¬æ¢å™¨</span></span><br><span class="line">    Jackson2JsonMessageConverter jackson2JsonMessageConverter = <span class="keyword">new</span> Jackson2JsonMessageConverter();</span><br><span class="line">    <span class="comment">// 2.é…ç½®è‡ªåŠ¨åˆ›å»ºæ¶ˆæ¯idï¼Œç”¨äºè¯†åˆ«ä¸åŒæ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸šåŠ¡ä¸­åŸºäºIDåˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤æ¶ˆæ¯</span></span><br><span class="line">    jackson2JsonMessageConverter.setCreateMessageIds(<span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> jackson2JsonMessageConverter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘é€æ¶ˆæ¯</p>
<p>publisher æ¨¡å—çš„ SpringAmqpTest ä¸­æ–°å¢ä¸€ä¸ªæ¶ˆæ¯å‘é€çš„ä»£ç ï¼Œå‘é€ä¸€ä¸ª Map å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSendMap</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡æ¶ˆæ¯</span></span><br><span class="line">    Map&lt;String,Object&gt; msg = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    msg.put(<span class="string">"name"</span>, <span class="string">"æŸ³å²©"</span>);</span><br><span class="line">    msg.put(<span class="string">"age"</span>, <span class="number">21</span>);</span><br><span class="line">    <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">"object.queue"</span>, msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥æ”¶ Object</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener</span>(queues = <span class="string">"object.queue"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listenSimpleQueueMessage</span><span class="params">(Map&lt;String, Object&gt; msg)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ¶ˆè´¹è€…æ¥æ”¶åˆ°object.queueæ¶ˆæ¯ï¼šã€"</span> + msg + <span class="string">"ã€‘"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <br>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/blog/categories/notes/">notes</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Backend/">Backend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/RabbitMQ/">RabbitMQ</a></li></ul>

      
	<span class="ico-date"></span>
	<a href="/blog/2024/08/15/2-backend-mq1/" class="article-date">
	  <time datetime="2024-08-14T16:00:00.000Z" itemprop="datePublished">å…«æœˆ 15, 2024</time>
	</a>

      <!-- æ·»åŠ å­—æ•°ç»Ÿè®¡ -->
      
        <span class="ico-fontcount"></span><span class="post-count">3.9kå­—</span>
      
    </footer>
    <!-- æ–‡ç« æ·»åŠ è¯„è®º -->
    
      
    <script defer src="//unpkg.com/leancloud-storage@4/dist/av-min.js"></script>
    <script defer src='//unpkg.com/valine@latest/dist/Valine.min.js'></script>
    <div id="vcomments"></div>
    <script>

        var notify = 'false' == true ? true : false;
        var verify = 'false' == true ? true : false;
		// è®¾ç½®è½®è¯¢
		const timer = setInterval(() => {
			if (window.Valine && typeof window.Valine === 'function') {
				clearInterval(timer);
				new Valine({
					el: '#vcomments',
					notify: notify,
					verify: verify,
					app_id: 'AJj6aG4cDMBqBIISAr1U53Az-gzGzoHsz',
					app_key: 'bIYBhlht4PSXI4pCWuH7Gnuo',
					placeholder: 'say something bro ~',
					avatar: 'monsterid',
					avatarCDN:'https://cravatar.cn/avatar/'
				});
			}
		}, 1000);
    </script>



    
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2024/08/27/2-backend-mq2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          ğŸŒŸ åç«¯ | RabbitMQ æ¶ˆæ¯çš„å¯é æ€§
        
      </div>
    </a>
  
  
    <a href="/blog/2024/08/06/2-backend-redis9/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">ğŸŒŸ åç«¯ | Redis æ€§èƒ½ä¼˜åŒ–</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#åŒæ­¥ä¸å¼‚æ­¥"><span class="nav-number">1.</span> <span class="nav-text">åŒæ­¥ä¸å¼‚æ­¥</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RabbitMQ"><span class="nav-number">2.</span> <span class="nav-text">RabbitMQ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-å®‰è£…"><span class="nav-number">2.1.</span> <span class="nav-text">docker å®‰è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç½‘é¡µæ“ä½œ"><span class="nav-number">2.2.</span> <span class="nav-text">ç½‘é¡µæ“ä½œ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-AMQP"><span class="nav-number">3.</span> <span class="nav-text">Spring AMQP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#é¡¹ç›®é…ç½®ä¾èµ–"><span class="nav-number">3.1.</span> <span class="nav-text">é¡¹ç›®é…ç½®ä¾èµ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¶ˆæ¯å‘é€"><span class="nav-number">3.2.</span> <span class="nav-text">æ¶ˆæ¯å‘é€</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#publisher-é…ç½®-mq-åœ°å€"><span class="nav-number">3.2.1.</span> <span class="nav-text">publisher é…ç½® mq åœ°å€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¶ˆæ¯å‘é€ç±»-SpringAmqpTest"><span class="nav-number">3.2.2.</span> <span class="nav-text">æ¶ˆæ¯å‘é€ç±» SpringAmqpTest</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¶ˆæ¯æ¥æ”¶"><span class="nav-number">3.3.</span> <span class="nav-text">æ¶ˆæ¯æ¥æ”¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#consumer-é…ç½®-mq-åœ°å€"><span class="nav-number">3.3.1.</span> <span class="nav-text">consumer é…ç½® mq åœ°å€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¶ˆæ¯ç›‘å¬ç±»-SpringRabbitListener"><span class="nav-number">3.3.2.</span> <span class="nav-text">æ¶ˆæ¯ç›‘å¬ç±» SpringRabbitListener</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WorkQueues-æ¨¡å‹"><span class="nav-number">3.4.</span> <span class="nav-text">WorkQueues æ¨¡å‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#äº¤æ¢æœºç±»å‹"><span class="nav-number">3.5.</span> <span class="nav-text">äº¤æ¢æœºç±»å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Fanout-äº¤æ¢æœº"><span class="nav-number">3.5.1.</span> <span class="nav-text">Fanout äº¤æ¢æœº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Direct-äº¤æ¢æœº"><span class="nav-number">3.5.2.</span> <span class="nav-text">Direct äº¤æ¢æœº</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¶ˆæ¯æ¥æ”¶-1"><span class="nav-number">3.5.2.1.</span> <span class="nav-text">æ¶ˆæ¯æ¥æ”¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¶ˆæ¯å‘é€-1"><span class="nav-number">3.5.2.2.</span> <span class="nav-text">æ¶ˆæ¯å‘é€</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Topic-äº¤æ¢æœº"><span class="nav-number">3.5.3.</span> <span class="nav-text">Topic äº¤æ¢æœº</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº"><span class="nav-number">3.6.</span> <span class="nav-text">å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fanout-å£°æ˜"><span class="nav-number">3.6.1.</span> <span class="nav-text">fanout å£°æ˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#direct-å£°æ˜"><span class="nav-number">3.6.2.</span> <span class="nav-text">direct å£°æ˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åŸºäºæ³¨è§£å£°æ˜"><span class="nav-number">3.6.3.</span> <span class="nav-text">åŸºäºæ³¨è§£å£°æ˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Direct-æ³¨è§£å£°æ˜"><span class="nav-number">3.6.3.1.</span> <span class="nav-text">Direct æ³¨è§£å£°æ˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Topic-æ³¨è§£å£°æ˜"><span class="nav-number">3.6.3.2.</span> <span class="nav-text">Topic æ³¨è§£å£°æ˜</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¶ˆæ¯è½¬æ¢å™¨"><span class="nav-number">3.7.</span> <span class="nav-text">æ¶ˆæ¯è½¬æ¢å™¨</span></a></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">HOME</a>
  
    <a href="/blog/archives" class="mobile-nav-link">ARCHIVES</a>
  
    <a href="/blog/categories" class="mobile-nav-link">CATEGORIES</a>
  
    <a href="/blog/about" class="mobile-nav-link">ABOUT</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2025 Arginsen&#39;s Blog All Rights Reserved.
      </div>
      <div class="site-credit">
        ID  <a href="https://lixupeng.cn" target="_blank">Arginsen</a>
      </div>
      <br>
      <div class="busuanzi-analytics">
        
        <span id="busuanzi_container_site_pv">
          æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
        <span class="post-meta-divider">|</span>
        <!-- <span id="busuanzi_container_site_uv">
          æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
        </span> -->
        <span class="post-count">å…¨ç«™å…± 343.3k å­—</span>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        
      </div>
  </div> 
</footer>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>
<script src="/blog/js/bootstrap.js"></script>
<script src="/blog/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>


<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bb74e3da22205cadfa4f6e0a31a76ac4";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    


  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/blog/js/totop.js" async=""></script>
</body>
</html>
