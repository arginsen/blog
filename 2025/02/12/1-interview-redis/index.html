<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="OcsZXBpQqAp8163-20wn3epncmCv_UBtqBLZmspy-NA">
  
  <title>ğŸ”¥ é¢è¯• | Redis ç›¸å…³ | Arginsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="interviewRedis">
  
  
  
  
  <meta name="keywords" content="interview,Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="ğŸ”¥ é¢è¯• | Redis ç›¸å…³">
<meta property="og:url" content="https://lixupeng.cn/blog/2025/02/12/1-interview-redis/index.html">
<meta property="og:site_name" content="Arginsen&#39;s Blog">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://lixupeng.cn/blog/img/interview-new.jpg">
<meta property="og:updated_time" content="2025-09-07T08:00:21.462Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸ”¥ é¢è¯• | Redis ç›¸å…³">
<meta name="twitter:image" content="https://lixupeng.cn/blog/img/interview-new.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Arginsen&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/blog/css/images/favicon.ico">
  
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="https://fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/blog/css/style.css">

  <script src="/blog/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/blog/css/bootstrap.css">
  <link rel="stylesheet" href="/blog/css/fashion.css">
  <link rel="stylesheet" href="/blog/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  



<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/blog/" title="Arginsen&#39;s Blog" rel="home"> Arginsen&#39;s Blog </a>
            
          </h1>
          
          
            <div class="site-description">smells like teen spirit</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/">é¦–é¡µ</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/archives">å½’æ¡£</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/categories">åˆ†ç±»</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/about">å…³äº</a> </li>
                    
              </ul>
            </div>
          </nav>
      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-1-interview-redis" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/blog/img/interview-new.jpg" rel="gallery_cmeclz8bx0014mtpuafdgow72">
        <img src="/blog/img/interview-new.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      ğŸ”¥ é¢è¯• | Redis ç›¸å…³
    </h1>
  

      </header>
    

    <div class="article-entry" itemprop="articleBody">
      
        <p><br><br><a id="more"></a></p>
<h1 id="Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ"><a href="#Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ" class="headerlink" title="Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ"></a>Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ</h1><ol>
<li>Redis uses RAM not disk,</li>
<li>I/O mutiplexing and single-threaded event loop</li>
<li>Efficient Data Structure</li>
</ol>
<p>But Redis memory cost is too high, and data persistence provided by Redis still has the risk of data loss.</p>
<h1 id="ä¸ºä»€ä¹ˆè¦ç”¨-Redisï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-Redisï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ Redisï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ Redisï¼Ÿ</h1><ol>
<li>Faster access speed</li>
<li>high concurrency - its QPS reaches easily 50-100k</li>
<li>conprehesive features - besides as a cache, also used for distributed locks, current limiting, message queues, delay queues.</li>
</ol>
<h1 id="ä¸ºä»€ä¹ˆç”¨-redis-è€Œä¸ç”¨æœ¬åœ°ç¼“å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç”¨-redis-è€Œä¸ç”¨æœ¬åœ°ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨ redis è€Œä¸ç”¨æœ¬åœ°ç¼“å­˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç”¨ redis è€Œä¸ç”¨æœ¬åœ°ç¼“å­˜ï¼Ÿ</h1><p>Local Cache can not share , rely on JVM memory. It just suitable for standalone system.</p>
<p>Redis can share memory with multiple instances, preserve consisitency, implement hight-performance access and persistent storage. Redis is suitable for distribued system.</p>
<h1 id="Redis-å•çº¿ç¨‹ä¸ºä»€ä¹ˆè¿˜èƒ½è¿™ä¹ˆå¿«"><a href="#Redis-å•çº¿ç¨‹ä¸ºä»€ä¹ˆè¿˜èƒ½è¿™ä¹ˆå¿«" class="headerlink" title="Redis å•çº¿ç¨‹ä¸ºä»€ä¹ˆè¿˜èƒ½è¿™ä¹ˆå¿«?"></a>Redis å•çº¿ç¨‹ä¸ºä»€ä¹ˆè¿˜èƒ½è¿™ä¹ˆå¿«?</h1><p>Because memory operations are fast, single-threaded operations avoid lock contention, and combined with efficient I/O multiplexing mechanisms, performance is very high.</p>
<p>å†…å­˜æ“ä½œæœ¬æ¥å°±å¿«ï¼Œå•çº¿ç¨‹æ“ä½œä¹Ÿé¿å…äº†é”ç«äº‰ï¼ŒåŒæ—¶ç»“åˆäº†é«˜æ•ˆçš„ I/Oå¤šè·¯å¤ç”¨æœºåˆ¶ã€‚</p>
<h1 id="Redis-å¦‚ä½•åˆ¤æ–­-KEY-æ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ"><a href="#Redis-å¦‚ä½•åˆ¤æ–­-KEY-æ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ" class="headerlink" title="Redis å¦‚ä½•åˆ¤æ–­ KEY æ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ"></a>Redis å¦‚ä½•åˆ¤æ–­ KEY æ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ</h1><p>There are two Dicts in Redis, also named Hashtable. the one records key-value pairs, the other one records the key and the expiry time. we check whether a key is expired, we just need to query in the second Dict by the key.</p>
<p>åœ¨Redisä¸­ä¼šæœ‰ä¸¤ä¸ªDictï¼Œä¹Ÿå°±æ˜¯HashTableï¼Œå…¶ä¸­ä¸€ä¸ªè®°å½•KEY-VALUEé”®å€¼å¯¹ï¼Œå¦ä¸€ä¸ªè®°å½•KEYå’Œè¿‡æœŸæ—¶é—´ã€‚è¦åˆ¤æ–­ä¸€ä¸ªKEYæ˜¯å¦è¿‡æœŸï¼Œåªéœ€è¦åˆ°è®°å½•è¿‡æœŸæ—¶é—´çš„Dictä¸­æ ¹æ®KEYæŸ¥è¯¢å³å¯ã€‚</p>
<h1 id="Redisä½•æ—¶åˆ é™¤è¿‡æœŸKEYï¼Ÿå¦‚ä½•åˆ é™¤ï¼Ÿ"><a href="#Redisä½•æ—¶åˆ é™¤è¿‡æœŸKEYï¼Ÿå¦‚ä½•åˆ é™¤ï¼Ÿ" class="headerlink" title="Redisä½•æ—¶åˆ é™¤è¿‡æœŸKEYï¼Ÿå¦‚ä½•åˆ é™¤ï¼Ÿ"></a>Redisä½•æ—¶åˆ é™¤è¿‡æœŸKEYï¼Ÿå¦‚ä½•åˆ é™¤ï¼Ÿ</h1><p>Redis has two strategies for handling expired keys: lazy deletion and periodic deletion.</p>
<p>lazy deletion checks the keyâ€™s expiration time each time a user accesses it. If the key has expired, it is deleted; if not, it is ignored.</p>
<p>Periodic deletion has two modes:<br>slow mode means regular sampling and detection of some keys with TTL through scheduled tasks.<br>fast mode means sampling and detection of some keys with TTL before Redis handle NIO event.</p>
<p>Redisçš„è¿‡æœŸKEYå¤„ç†æœ‰ä¸¤ç§ç­–ç•¥ï¼Œåˆ†åˆ«æ˜¯æƒ°æ€§åˆ é™¤å’Œå‘¨æœŸåˆ é™¤ã€‚<br>æƒ°æ€§åˆ é™¤æ˜¯æŒ‡åœ¨æ¯æ¬¡ç”¨æˆ·è®¿é—®æŸä¸ªKEYæ—¶ï¼Œåˆ¤æ–­KEYçš„è¿‡æœŸæ—¶é—´ï¼šå¦‚æœè¿‡æœŸåˆ™åˆ é™¤ï¼›å¦‚æœæœªè¿‡æœŸåˆ™å¿½ç•¥ã€‚<br>å‘¨æœŸåˆ é™¤æœ‰ä¸¤ç§æ¨¡å¼ï¼š</p>
<ul>
<li>SLOWæ¨¡å¼ï¼šé€šè¿‡ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå®šæœŸçš„æŠ½æ ·éƒ¨åˆ†å¸¦æœ‰TTLçš„KEYï¼Œåˆ¤æ–­å…¶æ˜¯å¦è¿‡æœŸã€‚é»˜è®¤æƒ…å†µä¸‹å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œé¢‘ç‡æ˜¯æ¯ç§’10æ¬¡ï¼Œä½†æ¯æ¬¡æ‰§è¡Œä¸èƒ½è¶…è¿‡25æ¯«ç§’ã€‚å¦‚æœæ‰§è¡ŒæŠ½æ ·åå‘ç°æ—¶é—´è¿˜æœ‰å‰©ä½™ï¼Œå¹¶ä¸”è¿‡æœŸKEYçš„æ¯”ä¾‹è¾ƒé«˜ï¼Œåˆ™ä¼šå¤šæ¬¡æŠ½æ ·ã€‚</li>
<li>FASTæ¨¡å¼ï¼šåœ¨Redisæ¯æ¬¡å¤„ç†NIOäº‹ä»¶ä¹‹å‰ï¼Œéƒ½ä¼šæŠ½æ ·éƒ¨åˆ†å¸¦æœ‰TTLçš„KEYï¼Œåˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå› æ­¤æ‰§è¡Œé¢‘ç‡è¾ƒé«˜ã€‚ä½†æ˜¯æ¯æ¬¡æ‰§è¡Œæ—¶é•¿ä¸èƒ½è¶…è¿‡1msï¼Œå¦‚æœæ—¶é—´å……è¶³å¹¶ä¸”è¿‡æœŸKEYæ¯”ä¾‹è¿‡é«˜ï¼Œä¹Ÿä¼šå¤šæ¬¡æŠ½æ ·</li>
</ul>
<h1 id="å½“-Redis-å†…å­˜ä¸è¶³æ—¶ä¼šæ€ä¹ˆåšï¼Ÿ"><a href="#å½“-Redis-å†…å­˜ä¸è¶³æ—¶ä¼šæ€ä¹ˆåšï¼Ÿ" class="headerlink" title="å½“ Redis å†…å­˜ä¸è¶³æ—¶ä¼šæ€ä¹ˆåšï¼Ÿ"></a>å½“ Redis å†…å­˜ä¸è¶³æ—¶ä¼šæ€ä¹ˆåšï¼Ÿ</h1><p>It depends on the configured memory eviction policy. Redis supports a variety of memory eviction policies, such as LRU, LFU and Random. </p>
<p>However, the default pilicy directly rejects new write requests. </p>
<p>If other policies are configured, Redis will check whether the memory usage has reached a threshold after each command execution. </p>
<p>If the threshold is reached, Redis will attempt to evict memory based on the configured eviction policy until the memory usage falls below the tghreshold.</p>
<p>è¿™å–å†³äºé…ç½®çš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼ŒRedisæ”¯æŒå¾ˆå¤šç§å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œä¾‹å¦‚LRUã€LFUã€Random. ä½†é»˜è®¤çš„ç­–ç•¥æ˜¯ç›´æ¥æ‹’ç»æ–°çš„å†™å…¥è¯·æ±‚ã€‚è€Œå¦‚æœè®¾ç½®äº†å…¶å®ƒç­–ç•¥ï¼Œåˆ™ä¼šåœ¨æ¯æ¬¡æ‰§è¡Œå‘½ä»¤ååˆ¤æ–­å ç”¨å†…å­˜æ˜¯å¦è¾¾åˆ°é˜ˆå€¼ã€‚å¦‚æœè¾¾åˆ°é˜ˆå€¼åˆ™ä¼šåŸºäºé…ç½®çš„æ·˜æ±°ç­–ç•¥å°è¯•è¿›è¡Œå†…å­˜æ·˜æ±°ï¼Œç›´åˆ°å ç”¨å†…å­˜å°äºé˜ˆå€¼ä¸ºæ­¢ã€‚</p>
<h1 id="é‚£ä½ èƒ½èŠèŠLRUå’ŒLFUå—ï¼Ÿ"><a href="#é‚£ä½ èƒ½èŠèŠLRUå’ŒLFUå—ï¼Ÿ" class="headerlink" title="é‚£ä½ èƒ½èŠèŠLRUå’ŒLFUå—ï¼Ÿ"></a>é‚£ä½ èƒ½èŠèŠLRUå’ŒLFUå—ï¼Ÿ</h1><p>LRU counts the keys that have been unused for the longest time. Each time memory eviction is required, a sample of keys is sampled, the keys with the longest idle time are found, and then these keys will be deleted.</p>
<p>LFU counts the keys with the least recent use, that means the key access frequency. Each time memory eviction is required, a sample of keys is sampled, the keys with the lowest logical access count are found, and then these keys will be eliminated.</p>
<p>LRUæ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ã€‚Redisçš„Keyéƒ½æ˜¯RedisObjectï¼Œå½“å¯ç”¨LRUç®—æ³•åï¼ŒRedisä¼šåœ¨Keyçš„å¤´ä¿¡æ¯ä¸­ä½¿ç”¨24ä¸ªbitè®°å½•æ¯ä¸ªkeyçš„æœ€è¿‘ä¸€æ¬¡ä½¿ç”¨çš„æ—¶é—´lruã€‚æ¯æ¬¡éœ€è¦å†…å­˜æ·˜æ±°æ—¶ï¼Œå°±ä¼šæŠ½æ ·ä¸€éƒ¨åˆ†KEYï¼Œæ‰¾å‡ºå…¶ä¸­ç©ºé—²æ—¶é—´æœ€é•¿çš„ï¼Œä¹Ÿå°±æ˜¯now - lruç»“æœæœ€å¤§çš„ï¼Œç„¶åå°†å…¶åˆ é™¤ã€‚å¦‚æœå†…å­˜ä¾ç„¶ä¸è¶³ï¼Œå°±é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<p>ç”±äºé‡‡ç”¨äº†æŠ½æ ·æ¥è®¡ç®—ï¼Œè¿™ç§ç®—æ³•åªèƒ½è¯´æ˜¯ä¸€ç§è¿‘ä¼¼LRUç®—æ³•ã€‚å› æ­¤åœ¨Redis4.0ä»¥ååˆå¼•å…¥äº†LFUç®—æ³•ï¼Œè¿™ç§ç®—æ³•æ˜¯ç»Ÿè®¡æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯æŒ‰keyçš„è®¿é—®é¢‘ç‡æ¥ç»Ÿè®¡ã€‚å½“å¯ç”¨LFUç®—æ³•åï¼ŒRedisä¼šåœ¨keyçš„å¤´ä¿¡æ¯ä¸­ä½¿ç”¨24bitè®°å½•æœ€è¿‘ä¸€æ¬¡ä½¿ç”¨æ—¶é—´å’Œé€»è¾‘è®¿é—®é¢‘ç‡ã€‚å…¶ä¸­é«˜16ä½æ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½çš„æœ€è¿‘è®¿é—®æ—¶é—´ï¼Œå8ä½æ˜¯é€»è¾‘è®¿é—®æ¬¡æ•°ã€‚ä¸LFUç±»ä¼¼ï¼Œæ¯æ¬¡éœ€è¦å†…å­˜æ·˜æ±°æ—¶ï¼Œå°±ä¼šæŠ½æ ·ä¸€éƒ¨åˆ†KEYï¼Œæ‰¾å‡ºå…¶ä¸­é€»è¾‘è®¿é—®æ¬¡æ•°æœ€å°çš„ï¼Œå°†å…¶æ·˜æ±°ã€‚</p>
<h1 id="å¦‚ä½•ä¿è¯ç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§ï¼Ÿ"><a href="#å¦‚ä½•ä¿è¯ç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¿è¯ç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§ï¼Ÿ"></a>å¦‚ä½•ä¿è¯ç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§ï¼Ÿ</h1><p>Double-write consistency in caches is difficult to guarantee strong consistency. we can only minimize the probability of inconsistencies and ensure eventual consistency. Our project uses Cache Aside model.</p>
<p>Simply put, the cache is deleted after the database is updated. During queries, the cache is consulted first. If a miss occurs, the database is consulted and the cache is written. </p>
<p>We also set an expiration time for the cache as a fallback. If inconsistencies do occur, we can ensure eventual consistency by expiring the cache.</p>
<p>ç­”ï¼šç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§å¾ˆéš¾ä¿è¯å¼ºä¸€è‡´ï¼Œåªèƒ½å°½å¯èƒ½é™ä½ä¸ä¸€è‡´çš„æ¦‚ç‡ï¼Œç¡®ä¿æœ€ç»ˆä¸€è‡´ã€‚æˆ‘ä»¬é¡¹ç›®ä¸­é‡‡ç”¨çš„æ˜¯Cache Asideæ¨¡å¼ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨æ›´æ–°æ•°æ®åº“ä¹‹ååˆ é™¤ç¼“å­˜ï¼›åœ¨æŸ¥è¯¢æ—¶å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœæœªå‘½ä¸­åˆ™æŸ¥è¯¢æ•°æ®åº“å¹¶å†™å…¥ç¼“å­˜ã€‚åŒæ—¶æˆ‘ä»¬ä¼šç»™ç¼“å­˜è®¾ç½®è¿‡æœŸæ—¶é—´ä½œä¸ºå…œåº•æ–¹æ¡ˆï¼Œå¦‚æœçœŸçš„å‡ºç°äº†ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¼“å­˜è¿‡æœŸæ¥ä¿è¯æœ€ç»ˆä¸€è‡´ã€‚</p>
<h1 id="ä¸ºä»€ä¹ˆä¸é‡‡ç”¨å»¶è¿ŸåŒåˆ æœºåˆ¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸é‡‡ç”¨å»¶è¿ŸåŒåˆ æœºåˆ¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸é‡‡ç”¨å»¶è¿ŸåŒåˆ æœºåˆ¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸é‡‡ç”¨å»¶è¿ŸåŒåˆ æœºåˆ¶ï¼Ÿ</h1><p>The first deletion in a delayed double delete operation is meaningless. The second delayed deletion is primarily used to address latency issues in database master-slave consistency issue and has nothing to do with cache synchronization.</p>
<p>Since the master node data has been updated, the Redis cache should also be updated. Furthermore, delayed double delete increases cache complexity and fails to completely eliminate cache consistency issues, resulting in a low return on investment.</p>
<p>ç­”ï¼šå»¶è¿ŸåŒåˆ çš„ç¬¬ä¸€æ¬¡åˆ é™¤å¹¶æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œç¬¬äºŒæ¬¡é‡‡ç”¨å»¶è¿Ÿåˆ é™¤ä¸»è¦æ˜¯è§£å†³æ•°æ®åº“ä¸»ä»åŒæ­¥çš„å»¶è¿Ÿé—®é¢˜ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯æ•°æ®åº“ä¸»ä»çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸ç¼“å­˜åŒæ­¥æ— å…³ã€‚æ—¢ç„¶ä¸»èŠ‚ç‚¹æ•°æ®å·²ç»æ›´æ–°ï¼ŒRedisçš„ç¼“å­˜ç†åº”æ›´æ–°ã€‚è€Œä¸”å»¶è¿ŸåŒåˆ ä¼šå¢åŠ ç¼“å­˜ä¸šåŠ¡å¤æ‚åº¦ï¼Œä¹Ÿæ²¡èƒ½å®Œå…¨é¿å…ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼ŒæŠ•å…¥å›æŠ¥æ¯”å¤ªä½ã€‚</p>
<h1 id="å¦‚ä½•è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Ÿ"></a>å¦‚ä½•è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Ÿ</h1><p>Cache penetration, occurs when a request accesses a value that doesnâ€™t exist in the database. This causes a cache hit failure, forcing the request to access the database. So Highly concurrent access to such an interface can place signicant pressure on the database.</p>
<p>our project uses Bloom filters to handle cache penetration. when a cache miss occurs, the filter checks whether the data exists. If it doesnâ€™t exist, the database access is skipped.</p>
<p>Alternatively, caching null values can be used, but this solution will waste memory.</p>
<p>ç¼“å­˜ç©¿é€ä¹Ÿå¯ä»¥è¯´æ˜¯ç©¿é€æ”»å‡»ï¼Œå…·ä½“æ¥è¯´æ˜¯å› ä¸ºè¯·æ±‚è®¿é—®åˆ°äº†æ•°æ®åº“ä¸å­˜åœ¨çš„å€¼ï¼Œè¿™æ ·ç¼“å­˜æ— æ³•å‘½ä¸­ï¼Œå¿…ç„¶è®¿é—®æ•°æ®åº“ã€‚å¦‚æœé«˜å¹¶å‘çš„è®¿é—®è¿™æ ·çš„æ¥å£ï¼Œä¼šç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§å‹åŠ›ã€‚<br>æˆ‘ä»¬é¡¹ç›®ä¸­éƒ½æ˜¯åŸºäºå¸ƒéš†è¿‡æ»¤å™¨æ¥è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜çš„ï¼Œå½“ç¼“å­˜æœªå‘½ä¸­æ—¶åŸºäºå¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨åˆ™ä¸å»è®¿é—®æ•°æ®åº“ã€‚<br>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç¼“å­˜ç©ºå€¼çš„æ–¹å¼è§£å†³ï¼Œä¸è¿‡è¿™ç§æ–¹æ¡ˆæ¯”è¾ƒæµªè´¹å†…å­˜ã€‚</p>
<h1 id="å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜ï¼Ÿ"></a>å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜ï¼Ÿ</h1><p>there are two common causes of cache avalanche.<br>First, a large number of keys is expired at the same time. To handle this, we can set different TTL values for cache keys to prevent simultaneous expiration.</p>
<p>Second, Redis crash leads to cache unavailability. To handle this, we can use clustering or implement multi-level caching to improve Redis availability.</p>
<p>ç¼“å­˜é›ªå´©çš„å¸¸è§åŸå› æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€æ˜¯å› ä¸ºå¤§é‡keyåŒæ—¶è¿‡æœŸã€‚é’ˆå¯¹é—®è¿™ä¸ªé¢˜æˆ‘ä»¬å¯ä»¥å¯ä»¥ç»™ç¼“å­˜keyè®¾ç½®ä¸åŒçš„TTLå€¼ï¼Œé¿å…keyåŒæ—¶è¿‡æœŸã€‚<br>ç¬¬äºŒä¸ªåŸå› æ˜¯Rediså®•æœºå¯¼è‡´ç¼“å­˜ä¸å¯ç”¨ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é›†ç¾¤æé«˜Redisçš„å¯ç”¨æ€§ã€‚ä¹Ÿå¯ä»¥æ·»åŠ å¤šçº§ç¼“å­˜ï¼Œå½“Rediså®•æœºæ—¶è¿˜æœ‰æœ¬åœ°ç¼“å­˜å¯ç”¨ã€‚</p>
<h1 id="å¦‚ä½•è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Ÿ"></a>å¦‚ä½•è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Ÿ</h1><p>Cache breakdown is often caused by hot keys. when a hot key expires, a large number of requests access redis simultaneously. any cache miss will result in a database access, causing significant database pressure.</p>
<p>So if we solve this problem, we have to prevent multiple threads from concurrently rebuilding the cache.</p>
<p>the first solution is based on a mutex lock. when a cache miss occurs, redis needs to get the mutex lock , then rebuild cache, and finally release the lock after finishing rebuilding. This ensures that only one thread is executing a cache rebuild at a time.</p>
<p>the second solution is based on logical expiration. that means we donâ€™t set the expiration time for the hot key, we just add an expiration field to the data. This ensures that the data is always available in the cache.</p>
<p>ç­”ï¼šç¼“å­˜å‡»ç©¿å¾€å¾€æ˜¯ç”±çƒ­ç‚¹Keyå¼•èµ·çš„ï¼Œå½“çƒ­ç‚¹Keyè¿‡æœŸæ—¶ï¼Œå¤§é‡è¯·æ±‚æ¶Œå…¥åŒæ—¶æŸ¥è¯¢ï¼Œå‘ç°ç¼“å­˜æœªå‘½ä¸­éƒ½ä¼šå»è®¿é—®æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›æ¿€å¢ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸»è¦æ€è·¯å°±æ˜¯é¿å…å¤šçº¿ç¨‹å¹¶å‘å»é‡å»ºç¼“å­˜ï¼Œå› æ­¤æ–¹æ¡ˆæœ‰ä¸¤ç§ã€‚<br>ç¬¬ä¸€ç§æ˜¯åŸºäºäº’æ–¥é”ï¼Œå½“å‘ç°ç¼“å­˜æœªå‘½ä¸­æ—¶éœ€è¦å…ˆè·å–äº’æ–¥é”ï¼Œå†é‡å»ºç¼“å­˜ï¼Œç¼“å­˜é‡å»ºå®Œæˆé‡Šæ”¾é”ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯ç¼“å­˜é‡å»ºåŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ä¸è¿‡è¿™ç§åšæ³•ä¼šå¯¼è‡´ç¼“å­˜é‡å»ºæ—¶æ€§èƒ½ä¸‹é™ä¸¥é‡ã€‚<br>ç¬¬äºŒç§æ˜¯åŸºäºé€»è¾‘è¿‡æœŸï¼Œä¹Ÿå°±æ˜¯ä¸ç»™çƒ­ç‚¹Keyè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè€Œæ˜¯ç»™æ•°æ®æ·»åŠ ä¸€ä¸ªè¿‡æœŸæ—¶é—´çš„å­—æ®µã€‚è¿™æ ·çƒ­ç‚¹Keyå°±ä¸ä¼šè¿‡æœŸï¼Œç¼“å­˜ä¸­æ°¸è¿œæœ‰æ•°æ®ã€‚<br>æŸ¥è¯¢åˆ°æ•°æ®æ—¶åŸºäºå…¶ä¸­çš„è¿‡æœŸæ—¶é—´åˆ¤æ–­keyæ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå¼€å¯ç‹¬ç«‹æ–°çº¿ç¨‹å¼‚æ­¥çš„é‡å»ºç¼“å­˜ï¼Œè€ŒæŸ¥è¯¢è¯·æ±‚å…ˆè¿”å›æ—§æ•°æ®å³å¯ã€‚å½“ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿè¦åŠ äº’æ–¥é”ï¼Œä½†ç”±äºé‡å»ºç¼“å­˜æ˜¯å¼‚æ­¥çš„ï¼Œè€Œä¸”è·å–é”å¤±è´¥ä¹Ÿæ— éœ€ç­‰å¾…ï¼Œè€Œæ˜¯è¿”å›æ—§æ•°æ®ï¼Œè¿™æ ·æ€§èƒ½å‡ ä¹ä¸å—å½±å“ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºæ˜¯é‡‡ç”¨å“ªç§æ–¹å¼ï¼Œåœ¨è·å–äº’æ–¥é”åä¸€å®šè¦å†æ¬¡åˆ¤æ–­ç¼“å­˜æ˜¯å¦å‘½ä¸­ï¼Œåšdubbo check. å› ä¸ºå½“ä½ è·å–é”æˆåŠŸæ—¶ï¼Œå¯èƒ½æ˜¯åœ¨ä½ ä¹‹å‰æœ‰å…¶å®ƒçº¿ç¨‹å·²ç»é‡å»ºç¼“å­˜äº†ã€‚</p>
<h1 id="Sentinelçš„ä¸‰ä¸ªä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Sentinelçš„ä¸‰ä¸ªä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Sentinelçš„ä¸‰ä¸ªä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Sentinelçš„ä¸‰ä¸ªä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h1><ul>
<li>é›†ç¾¤ç›‘æ§</li>
<li>æ•…éšœæ¢å¤</li>
<li>çŠ¶æ€é€šçŸ¥</li>
</ul>
<h1 id="Sentinelå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªrediså®ä¾‹æ˜¯å¦å¥åº·ï¼Ÿ"><a href="#Sentinelå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªrediså®ä¾‹æ˜¯å¦å¥åº·ï¼Ÿ" class="headerlink" title="Sentinelå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªrediså®ä¾‹æ˜¯å¦å¥åº·ï¼Ÿ"></a>Sentinelå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªrediså®ä¾‹æ˜¯å¦å¥åº·ï¼Ÿ</h1><ul>
<li>æ¯éš”1ç§’å‘é€ä¸€æ¬¡pingå‘½ä»¤ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰ç›¸å‘åˆ™è®¤ä¸ºæ˜¯ä¸»è§‚ä¸‹çº¿ï¼ˆsdownï¼‰</li>
<li>å¦‚æœå¤§å¤šæ•°sentineléƒ½è®¤ä¸ºå®ä¾‹ä¸»è§‚ä¸‹çº¿ï¼Œåˆ™åˆ¤å®šæœåŠ¡å®¢è§‚ä¸‹çº¿ï¼ˆodownï¼‰</li>
</ul>
<h1 id="æ•…éšœè½¬ç§»æ­¥éª¤æœ‰å“ªäº›ï¼Ÿ"><a href="#æ•…éšœè½¬ç§»æ­¥éª¤æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="æ•…éšœè½¬ç§»æ­¥éª¤æœ‰å“ªäº›ï¼Ÿ"></a>æ•…éšœè½¬ç§»æ­¥éª¤æœ‰å“ªäº›ï¼Ÿ</h1><ul>
<li>é¦–å…ˆè¦åœ¨sentinelä¸­é€‰å‡ºä¸€ä¸ªleaderï¼Œç”± leader æ‰§è¡Œ failover</li>
<li>é€‰å®šä¸€ä¸ª slave ä½œä¸ºæ–°çš„ masterï¼Œæ‰§è¡Œ slaveof no oneï¼Œåˆ‡æ¢åˆ° master æ¨¡å¼</li>
<li>ç„¶åè®©æ‰€æœ‰èŠ‚ç‚¹éƒ½æ‰§è¡Œ slaveof æ–° master</li>
<li>ä¿®æ”¹æ•…éšœèŠ‚ç‚¹é…ç½®ï¼Œæ·»åŠ  slaveof æ–° master</li>
</ul>
<h1 id="sentinel-é€‰ä¸¾-leader-çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#sentinel-é€‰ä¸¾-leader-çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="sentinel é€‰ä¸¾ leader çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"></a>sentinel é€‰ä¸¾ leader çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</h1><ul>
<li>ç¥¨æ•°è¶…è¿‡ sentinel èŠ‚ç‚¹æ•°é‡ 1 åŠ</li>
<li>ç¥¨æ•°è¶…è¿‡ quorum æ•°é‡</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹æœ€å…ˆå‘èµ· failover çš„èŠ‚ç‚¹ä¼šå½“é€‰</li>
</ul>
<h1 id="sentinel-ä»-slave-ä¸­é€‰å–-master-çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#sentinel-ä»-slave-ä¸­é€‰å–-master-çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="sentinel ä» slave ä¸­é€‰å– master çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"></a>sentinel ä» slave ä¸­é€‰å– master çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</h1><ul>
<li>é¦–å…ˆä¼šåˆ¤æ–­ slave èŠ‚ç‚¹ä¸ master èŠ‚ç‚¹æ–­å¼€æ—¶é—´é•¿çŸ­ï¼Œå¦‚æœè¶…è¿‡down-after-milliseconds * 10åˆ™ä¼šæ’é™¤è¯¥ slave èŠ‚ç‚¹</li>
<li>ç„¶ååˆ¤æ–­ slave èŠ‚ç‚¹çš„ slave-priority å€¼ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¦‚æœæ˜¯0åˆ™æ°¸ä¸å‚ä¸é€‰ä¸¾ï¼ˆé»˜è®¤éƒ½æ˜¯1ï¼‰ã€‚</li>
<li>å¦‚æœ slave-prority ä¸€æ ·ï¼Œåˆ™åˆ¤æ–­ slave èŠ‚ç‚¹çš„ offset å€¼ï¼Œè¶Šå¤§è¯´æ˜æ•°æ®è¶Šæ–°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</li>
<li>æœ€åæ˜¯åˆ¤æ–­ slave èŠ‚ç‚¹çš„ run_id å¤§å°ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆé€šè¿‡info server å¯ä»¥æŸ¥çœ‹ run_idï¼‰ã€‚</li>
</ul>
<h1 id="å¦‚ä½•å®ç°æ’è¡Œæ¦œ"><a href="#å¦‚ä½•å®ç°æ’è¡Œæ¦œ" class="headerlink" title="å¦‚ä½•å®ç°æ’è¡Œæ¦œ"></a>å¦‚ä½•å®ç°æ’è¡Œæ¦œ</h1><p>use sorted set, store the score in score, ZADD add, use ZREVRANGE to gain the top users.</p>
<h1 id="å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ"><a href="#å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ"></a>å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ</h1><p>use sorted set, save expiration time in score, periodically poll for expired tasks.</p>
<h1 id="å¦‚ä½•å®ç°åˆ†å¸ƒå¼session"><a href="#å¦‚ä½•å®ç°åˆ†å¸ƒå¼session" class="headerlink" title="å¦‚ä½•å®ç°åˆ†å¸ƒå¼session"></a>å¦‚ä½•å®ç°åˆ†å¸ƒå¼session</h1><p>we can save user infomation session to Redis, and share with multiple applicaitons.</p>
<h1 id="redis-çš„æ•°æ®æŒä¹…åŒ–æœ‰å“ªäº›æ–¹å¼ï¼ŸData-persistence"><a href="#redis-çš„æ•°æ®æŒä¹…åŒ–æœ‰å“ªäº›æ–¹å¼ï¼ŸData-persistence" class="headerlink" title="redis çš„æ•°æ®æŒä¹…åŒ–æœ‰å“ªäº›æ–¹å¼ï¼ŸData persistence"></a>redis çš„æ•°æ®æŒä¹…åŒ–æœ‰å“ªäº›æ–¹å¼ï¼ŸData persistence</h1><p>RDBã€AOFã€mixture of RDB and AOF</p>
<p>RDB uses periodic snapshot, saving memory data to disk.</p>
<p>AOF can append logs to record logs for each write operation.</p>
<h1 id="redis-æŒä¹…åŒ–-RDB-å’Œ-AOF-æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#redis-æŒä¹…åŒ–-RDB-å’Œ-AOF-æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="redis æŒä¹…åŒ– RDB å’Œ AOF æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>redis æŒä¹…åŒ– RDB å’Œ AOF æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</h1><p>RDB : small file, fast recovery, but the data of last few seconds may be lost.</p>
<p>AOF: more safe, almost no data is lost, but the files are large, recovery is slow.</p>

      
    </div>
    <br>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/blog/categories/notes/">notes</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Redis/">Redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/interview/">interview</a></li></ul>

      
	<span class="ico-date"></span>
	<a href="/blog/2025/02/12/1-interview-redis/" class="article-date">
	  <time datetime="2025-02-11T16:00:00.000Z" itemprop="datePublished">äºŒæœˆ 12, 2025</time>
	</a>

      <!-- æ·»åŠ å­—æ•°ç»Ÿè®¡ -->
      
        <span class="ico-fontcount"></span><span class="post-count">3.1kå­—</span>
      
    </footer>
    <!-- æ–‡ç« æ·»åŠ è¯„è®º -->
    
      
    <script defer src="https://unpkg.com/leancloud-storage@4/dist/av-min.js"></script>
    <script defer src='https://unpkg.com/valine@latest/dist/Valine.min.js'></script>
    <div id="vcomments"></div>
    <script>

        var notify = 'false' == true ? true : false;
        var verify = 'false' == true ? true : false;
		// è®¾ç½®è½®è¯¢
		const timer = setInterval(() => {
			if (window.Valine && typeof window.Valine === 'function') {
				clearInterval(timer);
				new Valine({
					el: '#vcomments',
					notify: notify,
					verify: verify,
					app_id: 'AJj6aG4cDMBqBIISAr1U53Az-gzGzoHsz',
					app_key: 'bIYBhlht4PSXI4pCWuH7Gnuo',
					placeholder: 'say something bro ~',
					avatar: 'monsterid',
					avatarCDN:'https://cravatar.cn/avatar/',
					visitor: 'true',
                    emojiCDN: '//i0.hdslb.com/bfs/emote/', 
                    // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
                    emojiMaps: {
                        "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
                        "tv_äº²äº²": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
                        "tv_å·ç¬‘": "bb690d4107620f1c15cff29509db529a73aee261.png",
                        "tv_å†è§": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
                        "tv_å†·æ¼ ": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
                        "tv_å‘æ€’": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
                        "tv_å‘è´¢": "34db290afd2963723c6eb3c4560667db7253a21a.png",
                        "tv_å¯çˆ±": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
                        "tv_åè¡€": "09dd16a7aa59b77baa1155d47484409624470c77.png",
                        "tv_å‘†": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
                        "tv_å‘•å": "9f996894a39e282ccf5e66856af49483f81870f3.png",
                        "tv_å›°": "241ee304e44c0af029adceb294399391e4737ef2.png",
                        "tv_åç¬‘": "1f0b87f731a671079842116e0991c91c2c88645a.png",
                        "tv_å¤§ä½¬": "093c1e2c490161aca397afc45573c877cdead616.png",
                        "tv_å¤§å“­": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
                        "tv_å§”å±ˆ": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
                        "tv_å®³ç¾": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
                        "tv_å°´å°¬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
                        "tv_å¾®ç¬‘": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
                        "tv_æ€è€ƒ": "90cf159733e558137ed20aa04d09964436f618a1.png",
                        "tv_æƒŠå“": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
                        // ... æ›´å¤šè¡¨æƒ…
                    }
				});
			}
		}, 1000);
    </script>



    
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2025/02/19/1-interview-java/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          ğŸ”¥ é¢è¯• | Java ç›¸å…³
        
      </div>
    </a>
  
  
    <a href="/blog/2024/12/09/1-business-bank-message3-flow/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">ğŸ’¼ é“¶è¡Œç³»ç»Ÿ | æ”¯ä»˜æŠ¥æ–‡ - MX æŠ¥æ–‡æµç¨‹</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ"><span class="nav-number">1.</span> <span class="nav-text">Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸ºä»€ä¹ˆè¦ç”¨-Redisï¼Ÿ"><span class="nav-number">2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦ç”¨ Redisï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸ºä»€ä¹ˆç”¨-redis-è€Œä¸ç”¨æœ¬åœ°ç¼“å­˜ï¼Ÿ"><span class="nav-number">3.</span> <span class="nav-text">ä¸ºä»€ä¹ˆç”¨ redis è€Œä¸ç”¨æœ¬åœ°ç¼“å­˜ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-å•çº¿ç¨‹ä¸ºä»€ä¹ˆè¿˜èƒ½è¿™ä¹ˆå¿«"><span class="nav-number">4.</span> <span class="nav-text">Redis å•çº¿ç¨‹ä¸ºä»€ä¹ˆè¿˜èƒ½è¿™ä¹ˆå¿«?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-å¦‚ä½•åˆ¤æ–­-KEY-æ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ"><span class="nav-number">5.</span> <span class="nav-text">Redis å¦‚ä½•åˆ¤æ–­ KEY æ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redisä½•æ—¶åˆ é™¤è¿‡æœŸKEYï¼Ÿå¦‚ä½•åˆ é™¤ï¼Ÿ"><span class="nav-number">6.</span> <span class="nav-text">Redisä½•æ—¶åˆ é™¤è¿‡æœŸKEYï¼Ÿå¦‚ä½•åˆ é™¤ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å½“-Redis-å†…å­˜ä¸è¶³æ—¶ä¼šæ€ä¹ˆåšï¼Ÿ"><span class="nav-number">7.</span> <span class="nav-text">å½“ Redis å†…å­˜ä¸è¶³æ—¶ä¼šæ€ä¹ˆåšï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#é‚£ä½ èƒ½èŠèŠLRUå’ŒLFUå—ï¼Ÿ"><span class="nav-number">8.</span> <span class="nav-text">é‚£ä½ èƒ½èŠèŠLRUå’ŒLFUå—ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•ä¿è¯ç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§ï¼Ÿ"><span class="nav-number">9.</span> <span class="nav-text">å¦‚ä½•ä¿è¯ç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸ºä»€ä¹ˆä¸é‡‡ç”¨å»¶è¿ŸåŒåˆ æœºåˆ¶ï¼Ÿ"><span class="nav-number">10.</span> <span class="nav-text">ä¸ºä»€ä¹ˆä¸é‡‡ç”¨å»¶è¿ŸåŒåˆ æœºåˆ¶ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Ÿ"><span class="nav-number">11.</span> <span class="nav-text">å¦‚ä½•è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜ï¼Ÿ"><span class="nav-number">12.</span> <span class="nav-text">å¦‚ä½•è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Ÿ"><span class="nav-number">13.</span> <span class="nav-text">å¦‚ä½•è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Sentinelçš„ä¸‰ä¸ªä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="nav-number">14.</span> <span class="nav-text">Sentinelçš„ä¸‰ä¸ªä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Sentinelå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªrediså®ä¾‹æ˜¯å¦å¥åº·ï¼Ÿ"><span class="nav-number">15.</span> <span class="nav-text">Sentinelå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªrediså®ä¾‹æ˜¯å¦å¥åº·ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ•…éšœè½¬ç§»æ­¥éª¤æœ‰å“ªäº›ï¼Ÿ"><span class="nav-number">16.</span> <span class="nav-text">æ•…éšœè½¬ç§»æ­¥éª¤æœ‰å“ªäº›ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sentinel-é€‰ä¸¾-leader-çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="nav-number">17.</span> <span class="nav-text">sentinel é€‰ä¸¾ leader çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sentinel-ä»-slave-ä¸­é€‰å–-master-çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="nav-number">18.</span> <span class="nav-text">sentinel ä» slave ä¸­é€‰å– master çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•å®ç°æ’è¡Œæ¦œ"><span class="nav-number">19.</span> <span class="nav-text">å¦‚ä½•å®ç°æ’è¡Œæ¦œ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ"><span class="nav-number">20.</span> <span class="nav-text">å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•å®ç°åˆ†å¸ƒå¼session"><span class="nav-number">21.</span> <span class="nav-text">å¦‚ä½•å®ç°åˆ†å¸ƒå¼session</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#redis-çš„æ•°æ®æŒä¹…åŒ–æœ‰å“ªäº›æ–¹å¼ï¼ŸData-persistence"><span class="nav-number">22.</span> <span class="nav-text">redis çš„æ•°æ®æŒä¹…åŒ–æœ‰å“ªäº›æ–¹å¼ï¼ŸData persistence</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#redis-æŒä¹…åŒ–-RDB-å’Œ-AOF-æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"><span class="nav-number">23.</span> <span class="nav-text">redis æŒä¹…åŒ– RDB å’Œ AOF æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">HOME</a>
  
    <a href="/blog/archives" class="mobile-nav-link">ARCHIVES</a>
  
    <a href="/blog/categories" class="mobile-nav-link">CATEGORIES</a>
  
    <a href="/blog/about" class="mobile-nav-link">ABOUT</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2025 Arginsen&#39;s Blog All Rights Reserved.
      </div>
      <div class="site-credit">
        ID  <a href="https://lixupeng.cn" target="_blank">Arginsen</a>
      </div>
      <br>
      <div class="busuanzi-analytics">
        
        <span id="busuanzi_container_site_pv">
          æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
        <span class="post-meta-divider">|</span>
        <!-- <span id="busuanzi_container_site_uv">
          æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
        </span> -->
        <span class="post-count">å…¨ç«™å…± 392.4k å­—</span>
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        
      </div>
  </div> 
</footer>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>
<script src="/blog/js/bootstrap.js"></script>
<script src="/blog/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>


<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bb74e3da22205cadfa4f6e0a31a76ac4";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    


  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/blog/js/totop.js" async=""></script>
</body>
</html>
