<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="OcsZXBpQqAp8163-20wn3epncmCv_UBtqBLZmspy-NA">
  
  <title>ğŸ”¥ é¢è¯• | Mysql ç›¸å…³ | Arginsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Backendinterview">
  
  
  
  
  <meta name="keywords" content="Backend,interview">
<meta property="og:type" content="article">
<meta property="og:title" content="ğŸ”¥ é¢è¯• | Mysql ç›¸å…³">
<meta property="og:url" content="https://lixupeng.cn/blog/2025/02/21/1-interview-mysql/index.html">
<meta property="og:site_name" content="Arginsen&#39;s Blog">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://lixupeng.cn/blog/img/interview-new.jpg">
<meta property="og:updated_time" content="2025-10-05T04:42:55.604Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸ”¥ é¢è¯• | Mysql ç›¸å…³">
<meta name="twitter:image" content="https://lixupeng.cn/blog/img/interview-new.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Arginsen&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/blog/css/images/favicon.ico">
  
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="https://fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/blog/css/style.css">

  <script src="/blog/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/blog/css/bootstrap.css">
  <link rel="stylesheet" href="/blog/css/fashion.css">
  <link rel="stylesheet" href="/blog/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  



<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/blog/" title="Arginsen&#39;s Blog" rel="home"> Arginsen&#39;s Blog </a>
            
          </h1>
          
          
            <div class="site-description">smells like teen spirit</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/">é¦–é¡µ</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/archives">å½’æ¡£</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/categories">åˆ†ç±»</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/about">å…³äº</a> </li>
                    
              </ul>
            </div>
          </nav>
      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-1-interview-mysql" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/blog/img/interview-new.jpg" rel="gallery_cmeclz8bv000rmtpujivrjcmn">
        <img src="/blog/img/interview-new.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      ğŸ”¥ é¢è¯• | Mysql ç›¸å…³
    </h1>
  

      </header>
    

    <div class="article-entry" itemprop="articleBody">
      
        <p><br><br><a id="more"></a></p>
<h1 id="MySQL-æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"><a href="#MySQL-æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="MySQL æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"></a>MySQL æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</h1><p>è¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šæ˜¯åœ¨é—® MySQL å¦‚æ­¤æµè¡Œçš„åŸå› ã€‚</p>
<p>MySQL ä¸»è¦å…·æœ‰ä¸‹é¢è¿™äº›ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æˆç†Ÿç¨³å®šï¼ŒåŠŸèƒ½å®Œå–„ã€‚å¼€æºå…è´¹ã€‚</li>
<li>æ–‡æ¡£ä¸°å¯Œï¼Œæ—¢æœ‰è¯¦ç»†çš„å®˜æ–¹æ–‡æ¡£ï¼Œåˆæœ‰éå¸¸å¤šä¼˜è´¨æ–‡ç« å¯ä¾›å‚è€ƒå­¦ä¹ ã€‚</li>
<li>å¼€ç®±å³ç”¨ï¼Œæ“ä½œç®€å•ï¼Œç»´æŠ¤æˆæœ¬ä½ã€‚</li>
<li>å…¼å®¹æ€§å¥½ï¼Œæ”¯æŒå¸¸è§çš„æ“ä½œç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å¼€å‘è¯­è¨€ã€‚</li>
<li>ç¤¾åŒºæ´»è·ƒï¼Œç”Ÿæ€å®Œå–„ã€‚</li>
<li>äº‹åŠ¡æ”¯æŒä¼˜ç§€ï¼Œ InnoDB å­˜å‚¨å¼•æ“é»˜è®¤ä½¿ç”¨ REPEATABLE-READ å¹¶ä¸ä¼šæœ‰ä»»ä½•æ€§èƒ½æŸå¤±ï¼Œå¹¶ä¸”ï¼ŒInnoDB å®ç°çš„ REPEATABLE-READ éš”ç¦»çº§åˆ«å…¶å®æ˜¯å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜å‘ç”Ÿçš„ã€‚æ”¯æŒåˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»ã€é«˜å¯ç”¨ã€‚</li>
</ul>
<h1 id="mysql-å­˜å‚¨å¼•æ“æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#mysql-å­˜å‚¨å¼•æ“æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="mysql å­˜å‚¨å¼•æ“æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>mysql å­˜å‚¨å¼•æ“æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>InnoDBã€MyISAMã€Memory</p>
<p>InnoDB supports transaction, row lock, foreign key.<br>MyISAM donâ€™t support transaction, but support full-text index.<br>Memory is stored in RAM, is suitable for temporary data.</p>
<h1 id="mysql-äº‹åŠ¡çš„å››å¤§ç‰¹æ€§-four-major-features"><a href="#mysql-äº‹åŠ¡çš„å››å¤§ç‰¹æ€§-four-major-features" class="headerlink" title="mysql äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ four major features?"></a>mysql äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ four major features?</h1><p>åŸå­æ€§ Atomicity<br>ä¸€è‡´æ€§ Consistency<br>éš”ç¦»æ€§ Isolation<br>æŒä¹…å‹ Durability</p>
<h1 id="ç´¢å¼•çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ"><a href="#ç´¢å¼•çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ç´¢å¼•çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ"></a>ç´¢å¼•çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ</h1><p>æ™®é€šç´¢å¼•ï¼ˆINDEXï¼‰<br>å”¯ä¸€ç´¢å¼•ï¼ˆUNIQUEï¼‰<br>ä¸»é”®ç´¢å¼•ï¼ˆPRIMARY KEYï¼‰<br>å¤åˆç´¢å¼•ï¼ˆè”åˆç´¢å¼• - Composite Indexï¼‰<br>å…¨æ–‡ç´¢å¼• FULLTEXT index<br>å‰ç¼€ç´¢å¼• prefix index</p>
<h1 id="ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ"><a href="#ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ" class="headerlink" title="ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ"></a>ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ</h1><p>advantage: enhance query speed. reduce I/O<br>disadvantage: occupies storage, reduces insert/update performance </p>
<p>ä¼˜ç‚¹ï¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€å‡å°‘ I/O<br>ç¼ºç‚¹ï¼šå ç”¨ç©ºé—´ã€æ’å…¥/æ›´æ–°æ€§èƒ½ä¸‹é™</p>
<h1 id="å“ªäº›æƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ"><a href="#å“ªäº›æƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ" class="headerlink" title="å“ªäº›æƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ"></a>å“ªäº›æƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ</h1><ul>
<li>ä½¿ç”¨ like â€˜%xxxâ€™ï¼ˆå‰æ¨¡ç³ŠåŒ¹é…ï¼‰using pre-fuzzy matching</li>
<li>å¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°æˆ–è®¡ç®— using functions or calculations on indexed columns</li>
<li>éšå¼ç±»å‹è½¬æ¢ implicit type conversions</li>
<li>å¤åˆç´¢å¼•æœªéµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ Composite indexes that do not follow the leftmost prefix rule</li>
<li>where æ¡ä»¶ä½¿ç”¨ orï¼Œéƒ¨åˆ†å­—æ®µæ²¡æœ‰ç´¢å¼• Using or in a where condition, and some field are not indexed</li>
</ul>
<h1 id="ä»€ä¹ˆæ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ"><a href="#ä»€ä¹ˆæ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ"></a>ä»€ä¹ˆæ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ</h1><p>ç‰¹ç‚¹ï¼š</p>
<p>è®¿é—®é¢‘ç‡é«˜ï¼šæ¯”å¦‚é¦–é¡µã€çƒ­é—¨æ–‡ç« ã€çƒ­é”€å•†å“ã€‚<br>æ›´æ–°é¢‘ç‡ä½ï¼ˆæˆ–å¯å®¹å¿å»¶è¿Ÿï¼‰ï¼šé€‚åˆç¼“å­˜ï¼Œä¸ä¼šé¢‘ç¹å˜åŠ¨ã€‚<br>å¯¹æ€§èƒ½è¦æ±‚é«˜ï¼šå¦‚æœæ¯æ¬¡éƒ½æŸ¥æ•°æ®åº“ï¼Œä¼šæ‹–æ…¢æ•´ä½“å“åº”ã€‚</p>
<p>ğŸ“Œ ä¸¾ä¾‹ï¼š</p>
<ul>
<li>ç”µå•†åœºæ™¯ â†’ çˆ†æ¬¾å•†å“è¯¦æƒ…ã€åº“å­˜ä¿¡æ¯</li>
<li>æ–°é—»é—¨æˆ· â†’ çƒ­ç‚¹æ–°é—»ã€é¦–é¡µæ¨è</li>
<li>é“¶è¡Œ/é‡‘è â†’ æ±‡ç‡ã€ç†è´¢äº§å“åˆ©ç‡</li>
<li>æ¸¸æˆ â†’ æ’è¡Œæ¦œã€è§’è‰²åŸºç¡€ä¿¡æ¯</li>
</ul>
<h1 id="å¦‚ä½•ç»™çƒ­ç‚¹æ•°æ®åŠ ç´¢å¼•"><a href="#å¦‚ä½•ç»™çƒ­ç‚¹æ•°æ®åŠ ç´¢å¼•" class="headerlink" title="å¦‚ä½•ç»™çƒ­ç‚¹æ•°æ®åŠ ç´¢å¼•"></a>å¦‚ä½•ç»™çƒ­ç‚¹æ•°æ®åŠ ç´¢å¼•</h1><p>first, we need to comfirm what is hot data. Find those accessed, updated or deleted frequently through slow query log or other tools.</p>
<p>Analyze which colomn is the hot query, such as message_id is the best choice for message_table.</p>
<p>Use the SQL:</p>
<blockquote>
<p>ALTER TABLE table_name ADD INDEX index_name ();</p>
</blockquote>
<p>If the query use multiple columns, We can use the composite index. But we need to avoid using too many indexes.</p>
<h1 id="å¦‚ä½•ä½¿ç”¨-EXPLAIN-åˆ†æ-æ…¢sql"><a href="#å¦‚ä½•ä½¿ç”¨-EXPLAIN-åˆ†æ-æ…¢sql" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ EXPLAIN åˆ†æ æ…¢sql"></a>å¦‚ä½•ä½¿ç”¨ EXPLAIN åˆ†æ æ…¢sql</h1><blockquote>
<p>EXPLAIN SELECT * FROM orders WHERE user_id = 10001 AND status = â€˜PAIDâ€™;</p>
</blockquote>
<p>If type = ref, it means the both indexes, that is reasonable.<br>If type = all, it means the query scan the all table and we need to add the index.</p>
<h1 id="æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„æ€è·¯ï¼Ÿ"><a href="#æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„æ€è·¯ï¼Ÿ" class="headerlink" title="æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„æ€è·¯ï¼Ÿ"></a>æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„æ€è·¯ï¼Ÿ</h1><ul>
<li>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—  check the slow sql logs</li>
<li>ä¼˜åŒ– SQLï¼ˆå‡å°‘å­æŸ¥è¯¢ã€é¿å… select <em>ï¼‰ optimize SQL statements such as avoid select </em></li>
<li>å»ºç´¢å¼•æˆ–ä¼˜åŒ–ç´¢å¼•  Add index or optimize index</li>
<li>è¡¨åˆ†åŒºã€åˆ†åº“åˆ†è¡¨  table partitioning, database sharding, table sharding</li>
<li>ç¼“å­˜ï¼ˆå¦‚ Redisï¼‰ Using cache such as Redis</li>
</ul>
<h1 id="é¡¹ç›®é‡Œæ•°æ®åº“è¿æ¥æ± æ˜¯æ€ä¹ˆä¼˜åŒ–çš„"><a href="#é¡¹ç›®é‡Œæ•°æ®åº“è¿æ¥æ± æ˜¯æ€ä¹ˆä¼˜åŒ–çš„" class="headerlink" title="é¡¹ç›®é‡Œæ•°æ®åº“è¿æ¥æ± æ˜¯æ€ä¹ˆä¼˜åŒ–çš„?"></a>é¡¹ç›®é‡Œæ•°æ®åº“è¿æ¥æ± æ˜¯æ€ä¹ˆä¼˜åŒ–çš„?</h1><p>Spring Boot projects use HikariCP as the default connection pool.</p>
<p>According to the Stress testing result, we tune the connection pool size, such as our system sets the maximumPoolSieze 50 and minimumIdel 10. It will avoid waiting because of less connections and excessive stress because of more connections.</p>
<h1 id="è¡Œé”-vs-è¡¨é”åŒºåˆ«ï¼Ÿ"><a href="#è¡Œé”-vs-è¡¨é”åŒºåˆ«ï¼Ÿ" class="headerlink" title="è¡Œé” vs è¡¨é”åŒºåˆ«ï¼Ÿ"></a>è¡Œé” vs è¡¨é”åŒºåˆ«ï¼Ÿ</h1><ul>
<li>è¡¨é”ï¼šé”æ•´å¼ è¡¨ï¼Œå¼€é”€å°ï¼Œå†²çªå¤§</li>
<li>è¡Œé”ï¼šé”æŸè¡Œè®°å½•ï¼Œå¼€é”€å¤§ï¼Œç²’åº¦å°ï¼Œæ”¯æŒå¹¶å‘</li>
</ul>
<p>table locks: lock the entire table, with low overhead and high conflict.<br>row locks: lock a specific row, with high overhead, low granularity and support for concurreny.</p>
<h1 id="æ­»é”äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿwhat-causes-deadlocks-how-resolve"><a href="#æ­»é”äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿwhat-causes-deadlocks-how-resolve" class="headerlink" title="æ­»é”äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿwhat causes deadlocks? how resolve?"></a>æ­»é”äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿwhat causes deadlocks? how resolve?</h1><ul>
<li>ä¸åŒäº‹åŠ¡é”å®šèµ„æºé¡ºåºä¸ä¸€è‡´ different transactions lock resources in inconsistent order</li>
<li>é•¿äº‹åŠ¡ã€é”èŒƒå›´è¿‡å¤§ long transactions, excessive lock range</li>
</ul>
<p>è§£å†³ï¼šè¶…æ—¶å›æ»šã€åˆç†ç´¢å¼•ã€æ‹†åˆ†äº‹åŠ¡<br>solution: rollback on timeout, proper indexing, splitting transactions.</p>
<h1 id="MySQL-ä¸»ä»å¤åˆ¶åŸç†ï¼Ÿ"><a href="#MySQL-ä¸»ä»å¤åˆ¶åŸç†ï¼Ÿ" class="headerlink" title="MySQL ä¸»ä»å¤åˆ¶åŸç†ï¼Ÿ"></a>MySQL ä¸»ä»å¤åˆ¶åŸç†ï¼Ÿ</h1><ol>
<li>ä¸»åº“å†™ binlog</li>
<li>ä»åº“ I/O çº¿ç¨‹æ‹‰å– binlogï¼Œå†™å…¥ relay log</li>
<li><p>ä»åº“ SQL çº¿ç¨‹æ‰§è¡Œ relay logï¼Œä¿æŒæ•°æ®ä¸€è‡´</p>
</li>
<li><p>the master database writes binlog</p>
</li>
<li>the slave database I/O thread pulls the binlog and writes it to the relay log.</li>
<li>the slave database SQL thread executes the relay log , thus keep data consistency.</li>
</ol>
<h1 id="è¯»å†™åˆ†ç¦»æ€ä¹ˆåšï¼Ÿ"><a href="#è¯»å†™åˆ†ç¦»æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="è¯»å†™åˆ†ç¦»æ€ä¹ˆåšï¼Ÿ"></a>è¯»å†™åˆ†ç¦»æ€ä¹ˆåšï¼Ÿ</h1><p>ä¸»åº“å†™ã€ä»åº“è¯»<br>åº”ç”¨å±‚ä¸­é—´ä»¶ï¼šMyCatã€ShardingSphere<br>æ•°æ®åº“ä»£ç†ï¼šProxySQL</p>
<ul>
<li>master database writes, slave database reads</li>
<li>using application-layer middleware: MyCat, ShardingSphere</li>
<li>using database proxy: ProxySQL</li>
</ul>
<h1 id="åˆ†åº“åˆ†è¡¨å¦‚ä½•å¤„ç†ï¼Ÿ"><a href="#åˆ†åº“åˆ†è¡¨å¦‚ä½•å¤„ç†ï¼Ÿ" class="headerlink" title="åˆ†åº“åˆ†è¡¨å¦‚ä½•å¤„ç†ï¼Ÿ"></a>åˆ†åº“åˆ†è¡¨å¦‚ä½•å¤„ç†ï¼Ÿ</h1><p>å‚ç›´åˆ†åº“ï¼ˆæŒ‰ä¸šåŠ¡æ‹†åº“ï¼‰<br>æ°´å¹³åˆ†è¡¨ï¼ˆæŒ‰ user_id æˆ–æ—¶é—´åˆ†ç‰‡ï¼‰<br>éœ€è¦è§£å†³çš„é—®é¢˜ï¼šè·¨åº“ joinã€åˆ†å¸ƒå¼äº‹åŠ¡ã€å…¨å±€ ID</p>
<ol>
<li>Vertical sharding (sharding by business)</li>
<li>Horizontal sharding (sharding by user_id or time)</li>
</ol>
<p>But still some issues have to handle: cross-database joins, distributed transactions, global IDs</p>
<h1 id="å¸¸è§çš„-MySQL-ä¼˜åŒ–æ‰‹æ®µï¼Ÿ"><a href="#å¸¸è§çš„-MySQL-ä¼˜åŒ–æ‰‹æ®µï¼Ÿ" class="headerlink" title="å¸¸è§çš„ MySQL ä¼˜åŒ–æ‰‹æ®µï¼Ÿ"></a>å¸¸è§çš„ MySQL ä¼˜åŒ–æ‰‹æ®µï¼Ÿ</h1><p>ç´¢å¼•ä¼˜åŒ–<br>SQL ä¼˜åŒ–<br>åˆ†è¡¨åˆ†åº“<br>ç¼“å­˜ï¼ˆRedisï¼‰<br>è¯»å†™åˆ†ç¦»<br>å‚æ•°è°ƒä¼˜ï¼ˆbuffer pool, query cacheï¼‰</p>
<ul>
<li>Index optimization</li>
<li>SQL optimization</li>
<li>Table and database sharding</li>
<li>Cache (Redis)</li>
<li>Read-write splitting</li>
<li>Parameter tuning (buffer pool, query cache)</li>
</ul>
<h1 id="æ…¢-sql-é€šå¸¸æ˜¯å¤šä¹…ï¼Ÿ"><a href="#æ…¢-sql-é€šå¸¸æ˜¯å¤šä¹…ï¼Ÿ" class="headerlink" title="æ…¢ sql é€šå¸¸æ˜¯å¤šä¹…ï¼Ÿ"></a>æ…¢ sql é€šå¸¸æ˜¯å¤šä¹…ï¼Ÿ</h1><p>mysql æä¾› long_qurey_time å‚æ•°ï¼Œé»˜è®¤å€¼æ˜¯ 10s<br>ä½†å®é™…ä¸šåŠ¡ä¸­ï¼Œå¤§éƒ¨åˆ†äº’è”ç½‘ä¸šåŠ¡è®¤ä¸ºå¤§äº 1s å°±ç®—æ˜¯ æ…¢ SQL<br>å¯¹äºé‡‘èã€ç”µå•†ç±»é«˜å¹¶å‘ä¸šåŠ¡ï¼Œç”šè‡³è¦æ±‚ SQL åœ¨ 100-500 æ¯«ç§’å†…å®Œæˆã€‚<br>è€ŒæŠ¥è¡¨/æ•°æ®åˆ†æåœºæ™¯ï¼šå…è®¸ SQL è·‘å‡ ç§’ç”šè‡³å‡ åç§’ï¼Œå› ä¸ºä¸»è¦æ˜¯ç¦»çº¿è®¡ç®—ã€‚</p>

      
    </div>
    <br>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/blog/categories/notes/">notes</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Backend/">Backend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/interview/">interview</a></li></ul>

      
	<span class="ico-date"></span>
	<a href="/blog/2025/02/21/1-interview-mysql/" class="article-date">
	  <time datetime="2025-02-20T16:00:00.000Z" itemprop="datePublished">äºŒæœˆ 21, 2025</time>
	</a>

      <!-- æ·»åŠ å­—æ•°ç»Ÿè®¡ -->
      
        <span class="ico-fontcount"></span><span class="post-count">1.3kå­—</span>
      
    </footer>
    <!-- æ–‡ç« æ·»åŠ è¯„è®º -->
    
      
    <script defer src="https://unpkg.com/leancloud-storage@4/dist/av-min.js"></script>
    <script defer src='https://unpkg.com/valine@latest/dist/Valine.min.js'></script>
    <div id="vcomments"></div>
    <script>

        var notify = 'false' == true ? true : false;
        var verify = 'false' == true ? true : false;
		// è®¾ç½®è½®è¯¢
		const timer = setInterval(() => {
			if (window.Valine && typeof window.Valine === 'function') {
				clearInterval(timer);
				new Valine({
					el: '#vcomments',
					notify: notify,
					verify: verify,
					app_id: 'AJj6aG4cDMBqBIISAr1U53Az-gzGzoHsz',
					app_key: 'bIYBhlht4PSXI4pCWuH7Gnuo',
					placeholder: 'say something bro ~',
					avatar: 'monsterid',
					avatarCDN:'https://cravatar.cn/avatar/',
					visitor: 'true',
                    emojiCDN: '//i0.hdslb.com/bfs/emote/', 
                    // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
                    emojiMaps: {
                        "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
                        "tv_äº²äº²": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
                        "tv_å·ç¬‘": "bb690d4107620f1c15cff29509db529a73aee261.png",
                        "tv_å†è§": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
                        "tv_å†·æ¼ ": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
                        "tv_å‘æ€’": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
                        "tv_å‘è´¢": "34db290afd2963723c6eb3c4560667db7253a21a.png",
                        "tv_å¯çˆ±": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
                        "tv_åè¡€": "09dd16a7aa59b77baa1155d47484409624470c77.png",
                        "tv_å‘†": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
                        "tv_å‘•å": "9f996894a39e282ccf5e66856af49483f81870f3.png",
                        "tv_å›°": "241ee304e44c0af029adceb294399391e4737ef2.png",
                        "tv_åç¬‘": "1f0b87f731a671079842116e0991c91c2c88645a.png",
                        "tv_å¤§ä½¬": "093c1e2c490161aca397afc45573c877cdead616.png",
                        "tv_å¤§å“­": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
                        "tv_å§”å±ˆ": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
                        "tv_å®³ç¾": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
                        "tv_å°´å°¬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
                        "tv_å¾®ç¬‘": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
                        "tv_æ€è€ƒ": "90cf159733e558137ed20aa04d09964436f618a1.png",
                        "tv_æƒŠå“": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
                        // ... æ›´å¤šè¡¨æƒ…
                    }
				});
			}
		}, 1000);
    </script>



    
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2025/03/08/1-interview-vue-en/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          ğŸ”¥ é¢è¯• | Vue - å‰ç«¯ç›¸å…³
        
      </div>
    </a>
  
  
    <a href="/blog/2025/02/19/1-interview-java/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">ğŸ”¥ é¢è¯• | Java ç›¸å…³</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"><span class="nav-number">1.</span> <span class="nav-text">MySQL æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mysql-å­˜å‚¨å¼•æ“æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="nav-number">2.</span> <span class="nav-text">mysql å­˜å‚¨å¼•æ“æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mysql-äº‹åŠ¡çš„å››å¤§ç‰¹æ€§-four-major-features"><span class="nav-number">3.</span> <span class="nav-text">mysql äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ four major features?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç´¢å¼•çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ"><span class="nav-number">4.</span> <span class="nav-text">ç´¢å¼•çš„ç±»å‹æœ‰å“ªäº›ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ"><span class="nav-number">5.</span> <span class="nav-text">ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å“ªäº›æƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ"><span class="nav-number">6.</span> <span class="nav-text">å“ªäº›æƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä»€ä¹ˆæ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ"><span class="nav-number">7.</span> <span class="nav-text">ä»€ä¹ˆæ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•ç»™çƒ­ç‚¹æ•°æ®åŠ ç´¢å¼•"><span class="nav-number">8.</span> <span class="nav-text">å¦‚ä½•ç»™çƒ­ç‚¹æ•°æ®åŠ ç´¢å¼•</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¦‚ä½•ä½¿ç”¨-EXPLAIN-åˆ†æ-æ…¢sql"><span class="nav-number">9.</span> <span class="nav-text">å¦‚ä½•ä½¿ç”¨ EXPLAIN åˆ†æ æ…¢sql</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„æ€è·¯ï¼Ÿ"><span class="nav-number">10.</span> <span class="nav-text">æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„æ€è·¯ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#é¡¹ç›®é‡Œæ•°æ®åº“è¿æ¥æ± æ˜¯æ€ä¹ˆä¼˜åŒ–çš„"><span class="nav-number">11.</span> <span class="nav-text">é¡¹ç›®é‡Œæ•°æ®åº“è¿æ¥æ± æ˜¯æ€ä¹ˆä¼˜åŒ–çš„?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#è¡Œé”-vs-è¡¨é”åŒºåˆ«ï¼Ÿ"><span class="nav-number">12.</span> <span class="nav-text">è¡Œé” vs è¡¨é”åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ­»é”äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿwhat-causes-deadlocks-how-resolve"><span class="nav-number">13.</span> <span class="nav-text">æ­»é”äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿwhat causes deadlocks? how resolve?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-ä¸»ä»å¤åˆ¶åŸç†ï¼Ÿ"><span class="nav-number">14.</span> <span class="nav-text">MySQL ä¸»ä»å¤åˆ¶åŸç†ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#è¯»å†™åˆ†ç¦»æ€ä¹ˆåšï¼Ÿ"><span class="nav-number">15.</span> <span class="nav-text">è¯»å†™åˆ†ç¦»æ€ä¹ˆåšï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åˆ†åº“åˆ†è¡¨å¦‚ä½•å¤„ç†ï¼Ÿ"><span class="nav-number">16.</span> <span class="nav-text">åˆ†åº“åˆ†è¡¨å¦‚ä½•å¤„ç†ï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¸¸è§çš„-MySQL-ä¼˜åŒ–æ‰‹æ®µï¼Ÿ"><span class="nav-number">17.</span> <span class="nav-text">å¸¸è§çš„ MySQL ä¼˜åŒ–æ‰‹æ®µï¼Ÿ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ…¢-sql-é€šå¸¸æ˜¯å¤šä¹…ï¼Ÿ"><span class="nav-number">18.</span> <span class="nav-text">æ…¢ sql é€šå¸¸æ˜¯å¤šä¹…ï¼Ÿ</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">HOME</a>
  
    <a href="/blog/archives" class="mobile-nav-link">ARCHIVES</a>
  
    <a href="/blog/categories" class="mobile-nav-link">CATEGORIES</a>
  
    <a href="/blog/about" class="mobile-nav-link">ABOUT</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2025 Arginsen&#39;s Blog All Rights Reserved.
      </div>
      <div class="site-credit">
        ID  <a href="https://lixupeng.cn" target="_blank">Arginsen</a>
      </div>
      <br>
      <div class="busuanzi-analytics">
        
        <span id="busuanzi_container_site_pv">
          æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
        <span class="post-meta-divider">|</span>
        <!-- <span id="busuanzi_container_site_uv">
          æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
        </span> -->
        <span class="post-count">å…¨ç«™å…± 395.7k å­—</span>
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        
      </div>
  </div> 
</footer>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>
<script src="/blog/js/bootstrap.js"></script>
<script src="/blog/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>


<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bb74e3da22205cadfa4f6e0a31a76ac4";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    


  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/blog/js/totop.js" async=""></script>
</body>
</html>
