<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="OcsZXBpQqAp8163-20wn3epncmCv_UBtqBLZmspy-NA">
  
  <title>ğŸ”¥ é¢è¯• | Spring Cloud ç›¸å…³ | Arginsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Backendspring">
  
  
  
  
  <meta name="keywords" content="Backend,spring">
<meta property="og:type" content="article">
<meta property="og:title" content="ğŸ”¥ é¢è¯• | Spring Cloud ç›¸å…³">
<meta property="og:url" content="https://lixupeng.cn/blog/2025/03/17/1-interview-spring/index.html">
<meta property="og:site_name" content="Arginsen&#39;s Blog">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://lixupeng.cn/blog/img/interview-new.jpg">
<meta property="og:updated_time" content="2025-08-25T15:26:54.033Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸ”¥ é¢è¯• | Spring Cloud ç›¸å…³">
<meta name="twitter:image" content="https://lixupeng.cn/blog/img/interview-new.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Arginsen&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/blog/css/images/favicon.ico">
  
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="https://fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/blog/css/style.css">

  <script src="/blog/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/blog/css/bootstrap.css">
  <link rel="stylesheet" href="/blog/css/fashion.css">
  <link rel="stylesheet" href="/blog/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  



<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/blog/" title="Arginsen&#39;s Blog" rel="home"> Arginsen&#39;s Blog </a>
            
          </h1>
          
          
            <div class="site-description">smells like teen spirit</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/">é¦–é¡µ</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/archives">å½’æ¡£</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/categories">åˆ†ç±»</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/blog/about">å…³äº</a> </li>
                    
              </ul>
            </div>
          </nav>
      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-1-interview-spring" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/blog/img/interview-new.jpg" rel="gallery_cmeclz8by001amtpu2zc99v2c">
        <img src="/blog/img/interview-new.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      ğŸ”¥ é¢è¯• | Spring Cloud ç›¸å…³
    </h1>
  

      </header>
    

    <div class="article-entry" itemprop="articleBody">
      
        <p><br><br><a id="more"></a></p>
<h1 id="é¡¹ç›®åœºæ™¯"><a href="#é¡¹ç›®åœºæ™¯" class="headerlink" title="é¡¹ç›®åœºæ™¯"></a>é¡¹ç›®åœºæ™¯</h1><h2 id="å¦‚æœEureka-Server-æŒ‚äº†ï¼ŒæœåŠ¡è¿˜èƒ½äº’ç›¸è°ƒç”¨å—ï¼Ÿ"><a href="#å¦‚æœEureka-Server-æŒ‚äº†ï¼ŒæœåŠ¡è¿˜èƒ½äº’ç›¸è°ƒç”¨å—ï¼Ÿ" class="headerlink" title="å¦‚æœEureka Server æŒ‚äº†ï¼ŒæœåŠ¡è¿˜èƒ½äº’ç›¸è°ƒç”¨å—ï¼Ÿ"></a>å¦‚æœEureka Server æŒ‚äº†ï¼ŒæœåŠ¡è¿˜èƒ½äº’ç›¸è°ƒç”¨å—ï¼Ÿ</h2><p>If the Eureka Server goes down, services can still call each other in the short term because Eureka clients cache the registry locally. </p>
<p>However, over time, the cache may become stale, causing failed calls. In production, we usually deploy Eureka Server in a cluster to avoid single point of failure.</p>
<h2 id="å¦‚æœ-MQ-å †ç§¯äº†å‡ ç™¾ä¸‡æ¶ˆæ¯ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#å¦‚æœ-MQ-å †ç§¯äº†å‡ ç™¾ä¸‡æ¶ˆæ¯ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="å¦‚æœ MQ å †ç§¯äº†å‡ ç™¾ä¸‡æ¶ˆæ¯ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ"></a>å¦‚æœ MQ å †ç§¯äº†å‡ ç™¾ä¸‡æ¶ˆæ¯ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</h2><p>åˆ†æåŸå› (æ¶ˆè´¹ç«¯/ç”Ÿäº§ç«¯) -&gt; æ¶ˆè´¹ç«¯å¢åŠ å¤„ç†/ç”Ÿäº§ç«¯é™æµ + æ­»ä¿¡/ç›‘æ§</p>
<p>If millions of messages are piled up in the MQ, the first step is to analyze the cause, usually either insufficient consumer throughput or traffic spike on the producer side.</p>
<p>In the short term, we can add more consumers(such as pods or threads), enable batch consumption, or throttle producers. </p>
<p>For long-term solutions, we should optimize consumer logic, increase parallelism by splitting queues and partitioning, and use dead-letter queues plus monitoring to prevent future backlogs.</p>
<p>Using dead-letter queues means the messages reach the queue but there are no consumers to consume them. And We configure a delay time to control when the message can be delivered to the specified queue with routing key. Thus we accomplish to avoid the excessive concurrency.</p>
<h2 id="å¦‚æœ-MyBatis-æŸ¥è¯¢å¾ˆæ…¢ï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿ"><a href="#å¦‚æœ-MyBatis-æŸ¥è¯¢å¾ˆæ…¢ï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿ" class="headerlink" title="å¦‚æœ MyBatis æŸ¥è¯¢å¾ˆæ…¢ï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿ"></a>å¦‚æœ MyBatis æŸ¥è¯¢å¾ˆæ…¢ï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿ</h2><p>åº”ç”¨å±‚sql -&gt; æ•°æ®åº“explain -&gt; ç³»ç»Ÿè¿æ¥</p>
<p>If Mybatis query is slow, I would first check at the application level whether the generated SQL is correct, avoiding issues like N+1 queries or inefficient pagination.</p>
<p>Then I would run the final SQL directly in the database and use EXPLAIN to see if itâ€™s missing indexes or blocked by locks.</p>
<p>Finally, Iâ€™d check system-level factors like the connection pool or network letency. </p>
<p>The typical solutions are optimizing SQL and indexes, avoiding N+1 queries, using database-native pagination, and applying caching for hot data.</p>
<h2 id="å¦‚æœ-Pod-å†…å­˜ä¸æ–­é£™å‡ï¼Œç›´åˆ°-OOMKilledï¼Œæ€ä¹ˆåˆ†æï¼Ÿ"><a href="#å¦‚æœ-Pod-å†…å­˜ä¸æ–­é£™å‡ï¼Œç›´åˆ°-OOMKilledï¼Œæ€ä¹ˆåˆ†æï¼Ÿ" class="headerlink" title="å¦‚æœ Pod å†…å­˜ä¸æ–­é£™å‡ï¼Œç›´åˆ° OOMKilledï¼Œæ€ä¹ˆåˆ†æï¼Ÿ"></a>å¦‚æœ Pod å†…å­˜ä¸æ–­é£™å‡ï¼Œç›´åˆ° OOMKilledï¼Œæ€ä¹ˆåˆ†æï¼Ÿ</h2><p>åº•å±‚k8s -&gt; åº”ç”¨å±‚JVM -&gt; ä¸šåŠ¡å±‚</p>
<p>If a Podâ€™s memory keeps growing until it gets OOMKilled, I would first check in Kubernetes whether the memory limit is too low. </p>
<p>Then Iâ€™d look at monitoring to see if the growth is sudden(possible memory leak) or load-driven(data accumulation). </p>
<p>For application-level leaks, Iâ€™d export a heap dump and analyze it with tools like jmap to check for issues like unbounded caches, unclosed connections, or objects not released.</p>
<p>If itâ€™s caused by business load, such as MQ messages are not consumed in time, Iâ€™d optimize the consumption logic or scale out the service.</p>
<p>The solutions usually involve setting memory limits, optimizing memory usage in the code, and setting cache expiration or current limiting when necessary.</p>
<h2 id="å¦‚æœ-CI-CD-éƒ¨ç½²å¤±è´¥ï¼Œå¦‚ä½•å¿«é€Ÿå›æ»šï¼Ÿ"><a href="#å¦‚æœ-CI-CD-éƒ¨ç½²å¤±è´¥ï¼Œå¦‚ä½•å¿«é€Ÿå›æ»šï¼Ÿ" class="headerlink" title="å¦‚æœ CI/CD éƒ¨ç½²å¤±è´¥ï¼Œå¦‚ä½•å¿«é€Ÿå›æ»šï¼Ÿ"></a>å¦‚æœ CI/CD éƒ¨ç½²å¤±è´¥ï¼Œå¦‚ä½•å¿«é€Ÿå›æ»šï¼Ÿ</h2><p>first, check the failure occurs in the build phase or the deployment phase.</p>
<p>A build failure doesâ€™t affect production, so I just fix and rebuild.</p>
<p>If the deployment fails, We usually use kubernetes rollout undo to quickly revert to the previous version, and it will switch to the last stable environment.</p>
<h2 id="å¦‚æœ-Spring-Boot-æœåŠ¡å¯åŠ¨å¾ˆæ…¢ï¼Œå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ"><a href="#å¦‚æœ-Spring-Boot-æœåŠ¡å¯åŠ¨å¾ˆæ…¢ï¼Œå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å¦‚æœ Spring Boot æœåŠ¡å¯åŠ¨å¾ˆæ…¢ï¼Œå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ"></a>å¦‚æœ Spring Boot æœåŠ¡å¯åŠ¨å¾ˆæ…¢ï¼Œå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ</h2><p>Sping Boot applications may start slowly for several reasons:</p>
<p>too many dependencies and bean initializations,<br>slow database connections or schema auto-generation,<br>delays from external services like Eureka or Redis,<br>heavy logging or reflection overhead,<br>heavy custom initialization logic such as large cache preloading,<br>pod startuping loads too many configmap or secret.</p>
<p>To troubleshoot, I usually check the logs to see where the application is stuck, use debug mode, or analyze by the startup actuator endpoint.</p>
<p>Optimizations include reducing dependency scope, removing unnecessary auto-configurations, tuning database connections, and deferring heavy initialization tasks.</p>
<h1 id="Spring-boot"><a href="#Spring-boot" class="headerlink" title="Spring boot"></a>Spring boot</h1><h2 id="Spring-Boot-è‡ªåŠ¨è£…é…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Spring-Boot-è‡ªåŠ¨è£…é…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spring Boot è‡ªåŠ¨è£…é…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Spring Boot è‡ªåŠ¨è£…é…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Spring Boot is a rapid development framework based on Spring. It can accomplish automatic configuration, embedded container, fast startup, and easy integration with spring cloud.</p>
<p>Its automatic configuration is based on @EnableAutoConfiguration and spring.factories. Spring Boot will scan the configuration classes under the dependencies at startup and automatically assembles the beans that meet the requirements.</p>
<h2 id="SpringBootApplication-åŒ…å«äº†å“ªäº›æ³¨è§£ï¼Ÿ"><a href="#SpringBootApplication-åŒ…å«äº†å“ªäº›æ³¨è§£ï¼Ÿ" class="headerlink" title="@SpringBootApplication åŒ…å«äº†å“ªäº›æ³¨è§£ï¼Ÿ"></a>@SpringBootApplication åŒ…å«äº†å“ªäº›æ³¨è§£ï¼Ÿ</h2><p>@SpringBootApplication is the core annotation of Spring Boot. It consists of @SpringBootConfiguration, @EnableAutoConfiguration and @ComponentScan.</p>
<h2 id="Spring-Boot-å¦‚ä½•åšé…ç½®ç®¡ç†ï¼ˆapplication-ymlã€Profileã€å¤šç¯å¢ƒåˆ‡æ¢ï¼‰ï¼Ÿ"><a href="#Spring-Boot-å¦‚ä½•åšé…ç½®ç®¡ç†ï¼ˆapplication-ymlã€Profileã€å¤šç¯å¢ƒåˆ‡æ¢ï¼‰ï¼Ÿ" class="headerlink" title="Spring Boot å¦‚ä½•åšé…ç½®ç®¡ç†ï¼ˆapplication.ymlã€Profileã€å¤šç¯å¢ƒåˆ‡æ¢ï¼‰ï¼Ÿ"></a>Spring Boot å¦‚ä½•åšé…ç½®ç®¡ç†ï¼ˆapplication.ymlã€Profileã€å¤šç¯å¢ƒåˆ‡æ¢ï¼‰ï¼Ÿ</h2><p>Spring Boot uses application.yaml or application.rpoperties to manage the configuration. </p>
<p>It supports multi-environment configuration via Profile and can maps the configuration to an object via @ConfigurationProperties.</p>
<h2 id="å¸¸è§-Starter-åŸç†ï¼Ÿè‡ªå®šä¹‰-Starter-æ€ä¹ˆå†™ï¼Ÿ"><a href="#å¸¸è§-Starter-åŸç†ï¼Ÿè‡ªå®šä¹‰-Starter-æ€ä¹ˆå†™ï¼Ÿ" class="headerlink" title="å¸¸è§ Starter åŸç†ï¼Ÿè‡ªå®šä¹‰ Starter æ€ä¹ˆå†™ï¼Ÿ"></a>å¸¸è§ Starter åŸç†ï¼Ÿè‡ªå®šä¹‰ Starter æ€ä¹ˆå†™ï¼Ÿ</h2><p>Starter is based on @EnableAutoConfiguration and SpringFactoriesLoader. It dynamicly load configuration classes through confitional annotation to achieve automatic configuration.</p>
<p>we can define a starter by 4 steps:</p>
<ol>
<li>write a automatic configuration class,</li>
<li>write a property binding class,</li>
<li>regiter in spring.factories or AutoConfiguration.imports</li>
<li>package the codes to a dependency, then we can import it in the project.</li>
</ol>
<h2 id="Spring-Boot-å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ"><a href="#Spring-Boot-å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ" class="headerlink" title="Spring Boot å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ"></a>Spring Boot å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ</h2><h2 id="å¦‚ä½•å¤„ç†é…ç½®ä¸­å¿ƒï¼ˆSpring-Cloud-Config-Nacosï¼‰çš„åŠ¨æ€åˆ·æ–°ï¼Ÿ"><a href="#å¦‚ä½•å¤„ç†é…ç½®ä¸­å¿ƒï¼ˆSpring-Cloud-Config-Nacosï¼‰çš„åŠ¨æ€åˆ·æ–°ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¤„ç†é…ç½®ä¸­å¿ƒï¼ˆSpring Cloud Config / Nacosï¼‰çš„åŠ¨æ€åˆ·æ–°ï¼Ÿ"></a>å¦‚ä½•å¤„ç†é…ç½®ä¸­å¿ƒï¼ˆSpring Cloud Config / Nacosï¼‰çš„åŠ¨æ€åˆ·æ–°ï¼Ÿ</h2><p>In the Spring Cloud Config, we can dynamicly refresh the configurations by @RefreshScpoe annotation and actuator or Spring Cloud Bus.</p>
<p>In Nacos, the configuration supports automatic refresh by default.</p>
<h1 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a>Eureka</h1><h2 id="ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ŸEureka-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ŸEureka-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ŸEureka çš„å·¥ä½œåŸç†ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ŸEureka çš„å·¥ä½œåŸç†ï¼Ÿ</h2><p>The service instance register the infomation to the Eureka Server when start up, and keep alive by heartbeat mechanism. the consumer can get the service address lists by Eureka with load balance. </p>
<p>Eureka choose AP, which ensures high availability. And it can avoid<br>services being mistakenly rejected on a large scale through self-protection mode.</p>
<h2 id="Eureka-Client-å‘-Eureka-Server-æ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#Eureka-Client-å‘-Eureka-Server-æ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="Eureka Client å‘ Eureka Server æ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"></a>Eureka Client å‘ Eureka Server æ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ</h2><p>The client will send a heartbeat meassage to keep alive status per 30s. Eureka server will mark it expiration if the service doesnâ€™t send heartbeat in 90s.</p>
<h2 id="ä»€ä¹ˆæ˜¯-CAP-å®šç†ï¼ŸEureka-ä¸ºä»€ä¹ˆé€‰æ‹©-APï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-CAP-å®šç†ï¼ŸEureka-ä¸ºä»€ä¹ˆé€‰æ‹©-APï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ CAP å®šç†ï¼ŸEureka ä¸ºä»€ä¹ˆé€‰æ‹© APï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ CAP å®šç†ï¼ŸEureka ä¸ºä»€ä¹ˆé€‰æ‹© APï¼Ÿ</h2><p>CAP means consistency, availability and partition tolerance.</p>
<p>Eureka chooses AP , which ensures high availability and partition tolerance, but sacrifices strong consistency. When Eureka fails, the service is still available instead of directly rejecting the request. This action will provide a better user experience.</p>
<p>ZooKeeper chooses CP, which means it ensures the service data has consistency, but when some errors occurs at Zookeeper, the requests will be rejected.</p>
<h2 id="Eureka-å’Œ-Zookeeperã€Nacos-çš„åŒºåˆ«ï¼Ÿ"><a href="#Eureka-å’Œ-Zookeeperã€Nacos-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Eureka å’Œ Zookeeperã€Nacos çš„åŒºåˆ«ï¼Ÿ"></a>Eureka å’Œ Zookeeperã€Nacos çš„åŒºåˆ«ï¼Ÿ</h2><p>Eureka chooses AP<br>ZooKeeper chooses CP</p>
<h2 id="Eureka-æœåŠ¡ä¸‹çº¿-å¥åº·æ£€æŸ¥æœºåˆ¶ï¼Ÿ"><a href="#Eureka-æœåŠ¡ä¸‹çº¿-å¥åº·æ£€æŸ¥æœºåˆ¶ï¼Ÿ" class="headerlink" title="Eureka æœåŠ¡ä¸‹çº¿ / å¥åº·æ£€æŸ¥æœºåˆ¶ï¼Ÿ"></a>Eureka æœåŠ¡ä¸‹çº¿ / å¥åº·æ£€æŸ¥æœºåˆ¶ï¼Ÿ</h2><p>There are two type of Eureka offline mechanism. Active offline and Passive offline. Active offline means the service sends an cancel request to the Eureka server. Passive offline means Eureka server cleans the services which donâ€™t send a heartbeat over 90s.</p>
<p>The Eureka default health check mechanism is heartbeat. but it can be combined with Spring Boot Actuator health check. We can configure and enable the healthcheck on the services, and then the service will report Actuator health status to Eureka server.</p>
<h2 id="Eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#Eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a>Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h2><p>Eureka will count the heartbeat ratio in the last 15 minutes, if it is lower than 85% by default, Eureka will enter self-protection mode.</p>
<p>under this mode, Eureka wonâ€™t remove any services in order to protect AP and wonâ€™t return its original mode until the network is restored.</p>
<h1 id="æ¶ˆæ¯é˜Ÿåˆ—"><a href="#æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—"></a>æ¶ˆæ¯é˜Ÿåˆ—</h1><h2 id="MQ-çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨-MQï¼Ÿ"><a href="#MQ-çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨-MQï¼Ÿ" class="headerlink" title="MQ çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ MQï¼Ÿ"></a>MQ çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ MQï¼Ÿ</h2><p>Using MQ can accomplish asynchronous decoupling. for example, our payment system sends a cross-border transfer, then it needs to generate and send a swift message to the clearing system, record<br>this transfer flow and inform account manager. MQ can process these operations asynchronously after core system notifies MQ. </p>
<p>The clearing system is responsible for message delivery, the risk control system is responsible for verification, and the notification system is responsible for push notification. This decouples core system, reduces peak traffic and protects the clearing channel, ensures message delivery, and meets audit trail requirements.</p>
<p>Handle peak traffic situations. for example, when a large number of meassges enter the system, they can first be delivered to the MQ queue, and then be smoothly sent to the clearing system for consumption.</p>
<p>MQ can copy messages to the log system to ensure full link traceablity. and It can meet compliance, auditing and risk control needs.</p>
<h2 id="RabbitMQ-çš„äº¤æ¢æœºç±»å‹ï¼ˆDirect-Topic-Fanout-Headersï¼‰çš„åŒºåˆ«ï¼Ÿ"><a href="#RabbitMQ-çš„äº¤æ¢æœºç±»å‹ï¼ˆDirect-Topic-Fanout-Headersï¼‰çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="RabbitMQ çš„äº¤æ¢æœºç±»å‹ï¼ˆDirect/Topic/Fanout/Headersï¼‰çš„åŒºåˆ«ï¼Ÿ"></a>RabbitMQ çš„äº¤æ¢æœºç±»å‹ï¼ˆDirect/Topic/Fanout/Headersï¼‰çš„åŒºåˆ«ï¼Ÿ</h2><p>RabbitMQ provides four common exchange types:<br>Direct(for exact matching by routing key),<br>Topic(for matching with regex),<br>Fanout(for broadcast mode that will inform every consumer),<br>Headers(for matching based on message attributes).</p>
<p>Direct and Topic are most commonly used in general business scenarios.</p>
<h2 id="å¦‚ä½•ä¿è¯æ¶ˆæ¯-ä¸ä¸¢å¤±ï¼Ÿ"><a href="#å¦‚ä½•ä¿è¯æ¶ˆæ¯-ä¸ä¸¢å¤±ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¿è¯æ¶ˆæ¯ ä¸ä¸¢å¤±ï¼Ÿ"></a>å¦‚ä½•ä¿è¯æ¶ˆæ¯ ä¸ä¸¢å¤±ï¼Ÿ</h2><p>retry mechanism, acknowledgement mechanism</p>
<h2 id="å¦‚ä½•é¿å…æ¶ˆæ¯-é‡å¤æ¶ˆè´¹ï¼Ÿ"><a href="#å¦‚ä½•é¿å…æ¶ˆæ¯-é‡å¤æ¶ˆè´¹ï¼Ÿ" class="headerlink" title="å¦‚ä½•é¿å…æ¶ˆæ¯ é‡å¤æ¶ˆè´¹ï¼Ÿ"></a>å¦‚ä½•é¿å…æ¶ˆæ¯ é‡å¤æ¶ˆè´¹ï¼Ÿ</h2><p>MQ cannâ€™t avoid duplicate delivery, so idempotence must be guaranteed on the consumer side. Common practices include using unique business IDs(such as serial numbers), database unique constaints, or Redis deduplication to ensure that messages are only rocessed once.</p>
<h2 id="å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„-é¡ºåºæ€§ï¼Ÿ"><a href="#å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„-é¡ºåºæ€§ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„ é¡ºåºæ€§ï¼Ÿ"></a>å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„ é¡ºåºæ€§ï¼Ÿ</h2><p>partition based on business keys(such as account IDs) ensures that individual keys are ordered and the entire process can be run in parallel.</p>
<h2 id="ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç§¯å‹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç§¯å‹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç§¯å‹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç§¯å‹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</h2><p>The producer send too fast and the consumer has no time to process.</p>
<p>So we can solve this problem from consumer side and producer side.</p>
<p>in short term: we can add consumers, patch consumption or throttle producers.</p>
<p>In long term: we can optimize the consumption logic, increase parallelism by splitting queues and partitioning, and use dead-letter queues and monitoring to prevent future backlogs.</p>
<h2 id="Spring-AMQP-çš„é‡è¯•æœºåˆ¶ï¼Ÿ"><a href="#Spring-AMQP-çš„é‡è¯•æœºåˆ¶ï¼Ÿ" class="headerlink" title="Spring AMQP çš„é‡è¯•æœºåˆ¶ï¼Ÿ"></a>Spring AMQP çš„é‡è¯•æœºåˆ¶ï¼Ÿ</h2><h2 id="Kafka-å’Œ-RabbitMQ-çš„åŒºåˆ«ï¼Ÿ"><a href="#Kafka-å’Œ-RabbitMQ-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Kafka å’Œ RabbitMQ çš„åŒºåˆ«ï¼Ÿ"></a>Kafka å’Œ RabbitMQ çš„åŒºåˆ«ï¼Ÿ</h2><p>Kafka is designed for high throughput and big data processing, using a distributed logging architecture. Itâ€™s suitable for log collection and real-time analysis.</p>
<p>RabbitMQ is designed for reliable message delivery. Based on the AMQP protocol, It supports flexible routing and is suitable for scenarios requiring strong consistency, such as financial payments.</p>
<h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><h2 id="MyBatis-çš„æ‰§è¡Œæµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#MyBatis-çš„æ‰§è¡Œæµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="MyBatis çš„æ‰§è¡Œæµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"></a>MyBatis çš„æ‰§è¡Œæµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h2><p>Mybatis creates SqlSession via SqlSessionFactory, dynamically proxies mapper interface, maps SQL to XML/annotations, and performs database operations.</p>
<h2 id="å’Œ-çš„åŒºåˆ«ï¼Ÿ"><a href="#å’Œ-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="#{} å’Œ ${} çš„åŒºåˆ«ï¼Ÿ"></a><code>#{}</code> å’Œ <code>${}</code> çš„åŒºåˆ«ï¼Ÿ</h2><p><code>#{}</code> is precompiled, placeholder, secure, and can prevent SQL injection.</p>
<p><code>${}</code> is string concatenation, which poses a risk of SQL injection, is used for dynamic SQL statements such as table names and fields.</p>
<h2 id="MyBatis-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ"><a href="#MyBatis-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="MyBatis ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ"></a>MyBatis ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</h2><h2 id="Mapper-æ¥å£ä¸-XML-æ˜¯å¦‚ä½•ç»‘å®šçš„ï¼Ÿ"><a href="#Mapper-æ¥å£ä¸-XML-æ˜¯å¦‚ä½•ç»‘å®šçš„ï¼Ÿ" class="headerlink" title="Mapper æ¥å£ä¸ XML æ˜¯å¦‚ä½•ç»‘å®šçš„ï¼Ÿ"></a>Mapper æ¥å£ä¸ XML æ˜¯å¦‚ä½•ç»‘å®šçš„ï¼Ÿ</h2><p>The Mapper interface is bound to XML through namespace(package) and method name(id), and MyBatis maps the interface method call to the coresponding SQL statement execution through dynamic proxy.</p>
<p>Usually, MyBatis add the class to session.getMapper method to generate a proxy object. the proxy object will intercept the method , and find the SQL in XML through namespace and method. Then run the SQL, get result, return the value object.</p>
<h2 id="MyBatis-å¦‚ä½•å®ç°åŠ¨æ€-SQLï¼Ÿ"><a href="#MyBatis-å¦‚ä½•å®ç°åŠ¨æ€-SQLï¼Ÿ" class="headerlink" title="MyBatis å¦‚ä½•å®ç°åŠ¨æ€ SQLï¼Ÿ"></a>MyBatis å¦‚ä½•å®ç°åŠ¨æ€ SQLï¼Ÿ</h2><p>Mybatis provides the tags such as if/choose/where/set/foreach to splice SQL statement dynamically.</p>
<h2 id="MyBatis-æ€§èƒ½è°ƒä¼˜æ‰‹æ®µï¼Ÿ"><a href="#MyBatis-æ€§èƒ½è°ƒä¼˜æ‰‹æ®µï¼Ÿ" class="headerlink" title="MyBatis æ€§èƒ½è°ƒä¼˜æ‰‹æ®µï¼Ÿ"></a>MyBatis æ€§èƒ½è°ƒä¼˜æ‰‹æ®µï¼Ÿ</h2><p>first, optimize SQL, such as avoid N+1 queries, only query necessary fields, batch update or insert, use pagination query, establish indexes for hot fields.</p>
<p>second, optimize MyBatis config, such as reasonable use level 1 or level 2 cacheï¼Œbatch executor, use resultMap instead of automatic mapping.</p>
<p>third, use Redis cache for hot data, tuning the connection pool using HikariCP.</p>
<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="Docker-é•œåƒå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ"><a href="#Docker-é•œåƒå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Docker é•œåƒå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ"></a>Docker é•œåƒå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ</h2><p>Image is a static read-only template. It consists of the APP and running environment. </p>
<p>Container is the running instance of Image. It can be read and written.</p>
<h2 id="å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Ÿ"><a href="#å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Ÿ"></a>å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Ÿ</h2><p>The bigest difference of VM and container is the virtualization layer. VM uses hypervisors to virtualize hardware. Each VM needs to run a complete OS, So It will be in high resource overhead and slow startup, but stronger isolation.</p>
<p>Containers are process-level isolation based on the host OS kernel, so they donâ€™t require an additional OS and have fast startup speeds, and high resource utilization, but relatively weaker isolation.</p>
<h2 id="Dockerfile-å¸¸è§æŒ‡ä»¤ï¼ˆFROMã€RUNã€CMDã€ENTRYPOINTã€COPYã€WORKDIRâ€¦ï¼‰ï¼Ÿ"><a href="#Dockerfile-å¸¸è§æŒ‡ä»¤ï¼ˆFROMã€RUNã€CMDã€ENTRYPOINTã€COPYã€WORKDIRâ€¦ï¼‰ï¼Ÿ" class="headerlink" title="Dockerfile å¸¸è§æŒ‡ä»¤ï¼ˆFROMã€RUNã€CMDã€ENTRYPOINTã€COPYã€WORKDIRâ€¦ï¼‰ï¼Ÿ"></a>Dockerfile å¸¸è§æŒ‡ä»¤ï¼ˆFROMã€RUNã€CMDã€ENTRYPOINTã€COPYã€WORKDIRâ€¦ï¼‰ï¼Ÿ</h2><h2 id="Docker-é•œåƒçš„åˆ†å±‚ç»“æ„ï¼Ÿ"><a href="#Docker-é•œåƒçš„åˆ†å±‚ç»“æ„ï¼Ÿ" class="headerlink" title="Docker é•œåƒçš„åˆ†å±‚ç»“æ„ï¼Ÿ"></a>Docker é•œåƒçš„åˆ†å±‚ç»“æ„ï¼Ÿ</h2><p>In the build process, every command in Dockerfile will generate a new layer. These layers can be reused by multiple images and containers. This makes the build process more efficient, the storage more economical and the transmission faster.</p>
<p>About optimization, I will merge RUN commmands and reduce the invalid layers.</p>
<h2 id="å¦‚ä½•å‡å°‘é•œåƒä½“ç§¯ï¼Ÿ"><a href="#å¦‚ä½•å‡å°‘é•œåƒä½“ç§¯ï¼Ÿ" class="headerlink" title="å¦‚ä½•å‡å°‘é•œåƒä½“ç§¯ï¼Ÿ"></a>å¦‚ä½•å‡å°‘é•œåƒä½“ç§¯ï¼Ÿ</h2><p>At first, we usually donâ€™t change the basic image, we have to use the domestic image like kirin-jre.</p>
<p>secondly, we just COPY the compiled jar file to build, that means it just has the runtime environment.</p>
<p>Meanwhile, merge the docker RUN commands.</p>
<p>finally, Use the .dockerignore to exclude the unnecessary files like log, test resource.</p>
<h2 id="Docker-ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#Docker-ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Docker ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›ï¼Ÿ"></a>Docker ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›ï¼Ÿ</h2><h1 id="Kubernetes-K8s"><a href="#Kubernetes-K8s" class="headerlink" title="Kubernetes (K8s)"></a>Kubernetes (K8s)</h1><h2 id="K8s-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿï¼ˆetcdã€API-Serverã€Controllerã€Schedulerã€Kubeletâ€¦ï¼‰"><a href="#K8s-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿï¼ˆetcdã€API-Serverã€Controllerã€Schedulerã€Kubeletâ€¦ï¼‰" class="headerlink" title="K8s çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿï¼ˆetcdã€API Serverã€Controllerã€Schedulerã€Kubeletâ€¦ï¼‰"></a>K8s çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿï¼ˆetcdã€API Serverã€Controllerã€Schedulerã€Kubeletâ€¦ï¼‰</h2><p>Kubernetes have two core components: Master and Node.</p>
<p>The master :<br>kube-ApiServer (API entry point),<br>etcd  (Cluster state storage),<br>kube-scheduler  (Pod scheduling),<br>Kube-controller-manager   (running various controllers)</p>
<p>Node:</p>
<p>kubelet. (pod management),<br>kube-proxy.  (network proxy),<br>container runtime.  (running containers)</p>
<h2 id="Podã€Deploymentã€Serviceã€Ingress-çš„åŒºåˆ«ï¼Ÿ"><a href="#Podã€Deploymentã€Serviceã€Ingress-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Podã€Deploymentã€Serviceã€Ingress çš„åŒºåˆ«ï¼Ÿ"></a>Podã€Deploymentã€Serviceã€Ingress çš„åŒºåˆ«ï¼Ÿ</h2><p>Pod is the smallest running unit, encapsulation the container and its operating environment.</p>
<p>Deployment can manage pods, which supports replica number control, rolling updates and rollbacks.</p>
<p>Service provides the stable access entry. Podsâ€™ ip is dynamic, so Service can proxy the dynamic ip to the actual pod and accomplish load balance. </p>
<p>Ingress is the upper-layer entrance of Service. It is responsible for routing external traffic.</p>
<h2 id="Pod-ä¸ºä»€ä¹ˆä¼šè¢«-OOMKilledï¼Ÿ"><a href="#Pod-ä¸ºä»€ä¹ˆä¼šè¢«-OOMKilledï¼Ÿ" class="headerlink" title="Pod ä¸ºä»€ä¹ˆä¼šè¢« OOMKilledï¼Ÿ"></a>Pod ä¸ºä»€ä¹ˆä¼šè¢« OOMKilledï¼Ÿ</h2><p>Usually Container memory is out of memory.</p>
<p>It may be configured too small resource limit, or the app occurs memory leak resulting in the surging memory usage in a short term.</p>
<p>In kubernetes, If the memory usage is over the limits, the POD will be killed by kernel OOM killer.</p>
<p>I usually check the pod event, and then check the container resource configuration, analyze the monitoring data and app logs.</p>
<p>finally, The solution is usually Optimizing memory usage or tuning the memory limits.</p>
<h2 id="Liveness-Probe-å’Œ-Readiness-Probe-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Liveness-Probe-å’Œ-Readiness-Probe-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Liveness Probe å’Œ Readiness Probe æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Liveness Probe å’Œ Readiness Probe æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>Liveness probe and Readiness probe are all used to be probe to check the container health.</p>
<p>Liveness Probe check if the container lives, if not, kubelet will restart the container.</p>
<p>Readiness Probe check if the pod is ready for providing service. If not, Pod will be temporarily removed from the load balance of Service. But container canâ€™t be restarted.</p>
<h2 id="K8s-æ»šåŠ¨æ›´æ–°å’Œå›æ»šæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#K8s-æ»šåŠ¨æ›´æ–°å’Œå›æ»šæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="K8s æ»šåŠ¨æ›´æ–°å’Œå›æ»šæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a>K8s æ»šåŠ¨æ›´æ–°å’Œå›æ»šæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h2><p>In kubernetes, Deployment uses RollingUpdate stratgy to update pods. It will create a new pod and delete the old pod according to maxUnavilable and maxSurge configuration.</p>
<p>Deployment can generate a new replicaSet when updating, and preserve the old replicaSet version for rollback.</p>
<h2 id="ConfigMap-å’Œ-Secret-çš„åŒºåˆ«ï¼Ÿ"><a href="#ConfigMap-å’Œ-Secret-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="ConfigMap å’Œ Secret çš„åŒºåˆ«ï¼Ÿ"></a>ConfigMap å’Œ Secret çš„åŒºåˆ«ï¼Ÿ</h2><p>In kubernetes, ConfigMap is used to store the non-sensitive configuration infomation such as database address, app params.</p>
<p>Secret is used to store the sensitive infomation such as keys, certificate and token.</p>
<p>And Secret can be encoded by base64 and Kubernetes mechanism, but ConfigMap is plaintext storage.</p>
<h2 id="å¦‚ä½•æ’æŸ¥-Pod-CrashLoopBackOffï¼Ÿ"><a href="#å¦‚ä½•æ’æŸ¥-Pod-CrashLoopBackOffï¼Ÿ" class="headerlink" title="å¦‚ä½•æ’æŸ¥ Pod CrashLoopBackOffï¼Ÿ"></a>å¦‚ä½•æ’æŸ¥ Pod CrashLoopBackOffï¼Ÿ</h2><h2 id="HPAï¼ˆHorizontal-Pod-Autoscalerï¼‰å·¥ä½œåŸç†ï¼Ÿ"><a href="#HPAï¼ˆHorizontal-Pod-Autoscalerï¼‰å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="HPAï¼ˆHorizontal Pod Autoscalerï¼‰å·¥ä½œåŸç†ï¼Ÿ"></a>HPAï¼ˆHorizontal Pod Autoscalerï¼‰å·¥ä½œåŸç†ï¼Ÿ</h2><h1 id="CI-CD"><a href="#CI-CD" class="headerlink" title="CI/CD"></a>CI/CD</h1><h2 id="CI-CD-çš„æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#CI-CD-çš„æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="CI/CD çš„æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"></a>CI/CD çš„æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h2><p>CI - Continuous Integration<br>CD - Continuous Delivery/Deployment</p>
<p>First, developers commit their codes to gitlab.</p>
<p>We configture a pipeline to clone the project codes, install the dependencies, build the Application using maven or npm. also we can do the code scaning and unit test.</p>
<p>when CD phase, we build the image Using docker, it will package the application zip file to the image file by dockerfile, of course, we can write the build logic in dockerfile, like we can use domestic basic image jre or nginx for different end, copy that zip file and unzip it.<br>Then we push the image to our private repository. Finally, we deploy the project by the kubernetes manifest, It will contain the infomation of pod, deployment, service, route and that docker image address, etc. </p>
<p>When the pipeline execution ends, we can see our application in our cloud platform.</p>
<p>Also we have different pipelines for different environments such as dev, sit, uat. After going online, there is the production environment, which developers have no right to access.</p>
<h2 id="å¸¸è§çš„-CI-CD-å·¥å…·ï¼ˆJenkinsã€GitLab-CIã€ArgoCDï¼‰åŒºåˆ«ï¼Ÿ"><a href="#å¸¸è§çš„-CI-CD-å·¥å…·ï¼ˆJenkinsã€GitLab-CIã€ArgoCDï¼‰åŒºåˆ«ï¼Ÿ" class="headerlink" title="å¸¸è§çš„ CI/CD å·¥å…·ï¼ˆJenkinsã€GitLab CIã€ArgoCDï¼‰åŒºåˆ«ï¼Ÿ"></a>å¸¸è§çš„ CI/CD å·¥å…·ï¼ˆJenkinsã€GitLab CIã€ArgoCDï¼‰åŒºåˆ«ï¼Ÿ</h2><p>My last company got the DevOps team, So they develop and maintain the CI/CD tools base on Jenkins. </p>
<p>Jenkins is more flexible for large company, the devops team can configure according to the needs of Company teams.</p>
<h2 id="åœ¨-CI-CD-ä¸­å¦‚ä½•åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ"><a href="#åœ¨-CI-CD-ä¸­å¦‚ä½•åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ" class="headerlink" title="åœ¨ CI/CD ä¸­å¦‚ä½•åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ"></a>åœ¨ CI/CD ä¸­å¦‚ä½•åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ</h2><h2 id="å¦‚ä½•åœ¨-CI-CD-ä¸­å®ç°è“ç»¿å‘å¸ƒ-ç°åº¦å‘å¸ƒï¼Ÿ"><a href="#å¦‚ä½•åœ¨-CI-CD-ä¸­å®ç°è“ç»¿å‘å¸ƒ-ç°åº¦å‘å¸ƒï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ CI/CD ä¸­å®ç°è“ç»¿å‘å¸ƒ / ç°åº¦å‘å¸ƒï¼Ÿ"></a>å¦‚ä½•åœ¨ CI/CD ä¸­å®ç°è“ç»¿å‘å¸ƒ / ç°åº¦å‘å¸ƒï¼Ÿ</h2><h2 id="CI-CD-å¦‚ä½•ä¸-Dockerã€K8s-ç»“åˆï¼Ÿ"><a href="#CI-CD-å¦‚ä½•ä¸-Dockerã€K8s-ç»“åˆï¼Ÿ" class="headerlink" title="CI/CD å¦‚ä½•ä¸ Dockerã€K8s ç»“åˆï¼Ÿ"></a>CI/CD å¦‚ä½•ä¸ Dockerã€K8s ç»“åˆï¼Ÿ</h2><h2 id="å¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å›æ»šæœºåˆ¶ï¼Ÿ"><a href="#å¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å›æ»šæœºåˆ¶ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å›æ»šæœºåˆ¶ï¼Ÿ"></a>å¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å›æ»šæœºåˆ¶ï¼Ÿ</h2><h1 id="Gateway"><a href="#Gateway" class="headerlink" title="Gateway"></a>Gateway</h1><h2 id="Spring-Gateway-å·¥ä½œåŸç†ï¼Ÿ"><a href="#Spring-Gateway-å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="Spring Gateway å·¥ä½œåŸç†ï¼Ÿ"></a>Spring Gateway å·¥ä½œåŸç†ï¼Ÿ</h2><p>Spring Gateway is based on three core concept: route, predicate and filter.</p>
<p>Firstly, A request enter and match predicate to choose a route. Then, It will be delivered to the downstream service after current limiting, authentication, and logging through filter chain.</p>
<h2 id="å¦‚ä½•åœ¨-Gateway-åšæƒé™æ ¡éªŒï¼Ÿ"><a href="#å¦‚ä½•åœ¨-Gateway-åšæƒé™æ ¡éªŒï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ Gateway åšæƒé™æ ¡éªŒï¼Ÿ"></a>å¦‚ä½•åœ¨ Gateway åšæƒé™æ ¡éªŒï¼Ÿ</h2><p>we can set the token authentication like JWT validation in the global filter. and then we forward the request.</p>
<h2 id="Gateway-å¦‚ä½•å®ç°é™æµï¼Ÿ"><a href="#Gateway-å¦‚ä½•å®ç°é™æµï¼Ÿ" class="headerlink" title="Gateway å¦‚ä½•å®ç°é™æµï¼Ÿ"></a>Gateway å¦‚ä½•å®ç°é™æµï¼Ÿ</h2><p>use requestRateLimiter filter. it supports flow control by user, IP, and API.</p>
<h1 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h1><h2 id="Spring-Security-çš„æ ¸å¿ƒåŸç†"><a href="#Spring-Security-çš„æ ¸å¿ƒåŸç†" class="headerlink" title="Spring Security çš„æ ¸å¿ƒåŸç†"></a>Spring Security çš„æ ¸å¿ƒåŸç†</h2><p>the core is Filter Chain.</p>
<h2 id="JWT-åœ¨-Spring-Security-ä¸­å¦‚ä½•é›†æˆï¼Ÿ"><a href="#JWT-åœ¨-Spring-Security-ä¸­å¦‚ä½•é›†æˆï¼Ÿ" class="headerlink" title="JWT åœ¨ Spring Security ä¸­å¦‚ä½•é›†æˆï¼Ÿ"></a>JWT åœ¨ Spring Security ä¸­å¦‚ä½•é›†æˆï¼Ÿ</h2><p>it will generate JWT after successful logining, </p>
<h1 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h1><h2 id="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ</h2><p>The distributed system involves multiple services, multiple databases, even message queue. So we need to ensure data consistency across systems.</p>
<h2 id="Seata-æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†ï¼Ÿ"><a href="#Seata-æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†ï¼Ÿ" class="headerlink" title="Seata æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†ï¼Ÿ"></a>Seata æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†ï¼Ÿ</h2><p>Seata is a framework that can solve distributed transaction.</p>
<p>Seata manages transaction by three charactors: Transaction Coodinator, Transaction Manager and Resource Manager.</p>
<h2 id="what-are-the-common-solutions-for-distributed-transactions"><a href="#what-are-the-common-solutions-for-distributed-transactions" class="headerlink" title="what are the common solutions for distributed transactions?"></a>what are the common solutions for distributed transactions?</h2><p>2PC two phase commit, high consistentcy, but low preforamence.</p>
<p>TCC Try-comfirm-cancel, Try phase will reserve resource, Confirm phase will commit, Cancel phase will rollback.</p>
<p>XA is a two phase commit mode. In the first phase, The TC notifies each transaction participant to execute local transaction. the transaction participant will report the execution status to TC after transaction finished. And this time the transaction isnâ€™t committed and hold the database lock. In the second phase, If all transaction participants are successful in the first phase, The TC will notify each transaction participant to commit their transaction. If not, each transaction participant will rollback.</p>
<p>AT also is a two-phase commit mode. In the first phase, TM launches and registers the global transaction to TC. RM registers the branches transaction and records undo-log, Then execute the SQL and report local transaction status to TC. In the second phase, TM notifies TC that the transaction is finished. Then TC check the branch transaction status. If sucessed, delete the undo-log. If failed, rollback, restore the undo-log(snapshot).</p>

      
    </div>
    <br>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/blog/categories/notes/">notes</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Backend/">Backend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/spring/">spring</a></li></ul>

      
	<span class="ico-date"></span>
	<a href="/blog/2025/03/17/1-interview-spring/" class="article-date">
	  <time datetime="2025-03-16T16:00:00.000Z" itemprop="datePublished">ä¸‰æœˆ 17, 2025</time>
	</a>

      <!-- æ·»åŠ å­—æ•°ç»Ÿè®¡ -->
      
        <span class="ico-fontcount"></span><span class="post-count">3.4kå­—</span>
      
    </footer>
    <!-- æ–‡ç« æ·»åŠ è¯„è®º -->
    
      
    <script defer src="https://unpkg.com/leancloud-storage@4/dist/av-min.js"></script>
    <script defer src='https://unpkg.com/valine@latest/dist/Valine.min.js'></script>
    <div id="vcomments"></div>
    <script>

        var notify = 'false' == true ? true : false;
        var verify = 'false' == true ? true : false;
		// è®¾ç½®è½®è¯¢
		const timer = setInterval(() => {
			if (window.Valine && typeof window.Valine === 'function') {
				clearInterval(timer);
				new Valine({
					el: '#vcomments',
					notify: notify,
					verify: verify,
					app_id: 'AJj6aG4cDMBqBIISAr1U53Az-gzGzoHsz',
					app_key: 'bIYBhlht4PSXI4pCWuH7Gnuo',
					placeholder: 'say something bro ~',
					avatar: 'monsterid',
					avatarCDN:'https://cravatar.cn/avatar/',
					visitor: 'true',
                    emojiCDN: '//i0.hdslb.com/bfs/emote/', 
                    // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
                    emojiMaps: {
                        "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
                        "tv_äº²äº²": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
                        "tv_å·ç¬‘": "bb690d4107620f1c15cff29509db529a73aee261.png",
                        "tv_å†è§": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
                        "tv_å†·æ¼ ": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
                        "tv_å‘æ€’": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
                        "tv_å‘è´¢": "34db290afd2963723c6eb3c4560667db7253a21a.png",
                        "tv_å¯çˆ±": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
                        "tv_åè¡€": "09dd16a7aa59b77baa1155d47484409624470c77.png",
                        "tv_å‘†": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
                        "tv_å‘•å": "9f996894a39e282ccf5e66856af49483f81870f3.png",
                        "tv_å›°": "241ee304e44c0af029adceb294399391e4737ef2.png",
                        "tv_åç¬‘": "1f0b87f731a671079842116e0991c91c2c88645a.png",
                        "tv_å¤§ä½¬": "093c1e2c490161aca397afc45573c877cdead616.png",
                        "tv_å¤§å“­": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
                        "tv_å§”å±ˆ": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
                        "tv_å®³ç¾": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
                        "tv_å°´å°¬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
                        "tv_å¾®ç¬‘": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
                        "tv_æ€è€ƒ": "90cf159733e558137ed20aa04d09964436f618a1.png",
                        "tv_æƒŠå“": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
                        // ... æ›´å¤šè¡¨æƒ…
                    }
				});
			}
		}, 1000);
    </script>



    
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/blog/2025/03/08/1-interview-vue-en/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">ğŸ”¥ é¢è¯• | Vue - å‰ç«¯ç›¸å…³</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#é¡¹ç›®åœºæ™¯"><span class="nav-number">1.</span> <span class="nav-text">é¡¹ç›®åœºæ™¯</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚æœEureka-Server-æŒ‚äº†ï¼ŒæœåŠ¡è¿˜èƒ½äº’ç›¸è°ƒç”¨å—ï¼Ÿ"><span class="nav-number">1.1.</span> <span class="nav-text">å¦‚æœEureka Server æŒ‚äº†ï¼ŒæœåŠ¡è¿˜èƒ½äº’ç›¸è°ƒç”¨å—ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚æœ-MQ-å †ç§¯äº†å‡ ç™¾ä¸‡æ¶ˆæ¯ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ"><span class="nav-number">1.2.</span> <span class="nav-text">å¦‚æœ MQ å †ç§¯äº†å‡ ç™¾ä¸‡æ¶ˆæ¯ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚æœ-MyBatis-æŸ¥è¯¢å¾ˆæ…¢ï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿ"><span class="nav-number">1.3.</span> <span class="nav-text">å¦‚æœ MyBatis æŸ¥è¯¢å¾ˆæ…¢ï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚æœ-Pod-å†…å­˜ä¸æ–­é£™å‡ï¼Œç›´åˆ°-OOMKilledï¼Œæ€ä¹ˆåˆ†æï¼Ÿ"><span class="nav-number">1.4.</span> <span class="nav-text">å¦‚æœ Pod å†…å­˜ä¸æ–­é£™å‡ï¼Œç›´åˆ° OOMKilledï¼Œæ€ä¹ˆåˆ†æï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚æœ-CI-CD-éƒ¨ç½²å¤±è´¥ï¼Œå¦‚ä½•å¿«é€Ÿå›æ»šï¼Ÿ"><span class="nav-number">1.5.</span> <span class="nav-text">å¦‚æœ CI/CD éƒ¨ç½²å¤±è´¥ï¼Œå¦‚ä½•å¿«é€Ÿå›æ»šï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚æœ-Spring-Boot-æœåŠ¡å¯åŠ¨å¾ˆæ…¢ï¼Œå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ"><span class="nav-number">1.6.</span> <span class="nav-text">å¦‚æœ Spring Boot æœåŠ¡å¯åŠ¨å¾ˆæ…¢ï¼Œå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-boot"><span class="nav-number">2.</span> <span class="nav-text">Spring boot</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot-è‡ªåŠ¨è£…é…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="nav-number">2.1.</span> <span class="nav-text">Spring Boot è‡ªåŠ¨è£…é…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBootApplication-åŒ…å«äº†å“ªäº›æ³¨è§£ï¼Ÿ"><span class="nav-number">2.2.</span> <span class="nav-text">@SpringBootApplication åŒ…å«äº†å“ªäº›æ³¨è§£ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot-å¦‚ä½•åšé…ç½®ç®¡ç†ï¼ˆapplication-ymlã€Profileã€å¤šç¯å¢ƒåˆ‡æ¢ï¼‰ï¼Ÿ"><span class="nav-number">2.3.</span> <span class="nav-text">Spring Boot å¦‚ä½•åšé…ç½®ç®¡ç†ï¼ˆapplication.ymlã€Profileã€å¤šç¯å¢ƒåˆ‡æ¢ï¼‰ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¸¸è§-Starter-åŸç†ï¼Ÿè‡ªå®šä¹‰-Starter-æ€ä¹ˆå†™ï¼Ÿ"><span class="nav-number">2.4.</span> <span class="nav-text">å¸¸è§ Starter åŸç†ï¼Ÿè‡ªå®šä¹‰ Starter æ€ä¹ˆå†™ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot-å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ"><span class="nav-number">2.5.</span> <span class="nav-text">Spring Boot å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•å¤„ç†é…ç½®ä¸­å¿ƒï¼ˆSpring-Cloud-Config-Nacosï¼‰çš„åŠ¨æ€åˆ·æ–°ï¼Ÿ"><span class="nav-number">2.6.</span> <span class="nav-text">å¦‚ä½•å¤„ç†é…ç½®ä¸­å¿ƒï¼ˆSpring Cloud Config / Nacosï¼‰çš„åŠ¨æ€åˆ·æ–°ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Eureka"><span class="nav-number">3.</span> <span class="nav-text">Eureka</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ŸEureka-çš„å·¥ä½œåŸç†ï¼Ÿ"><span class="nav-number">3.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ŸEureka çš„å·¥ä½œåŸç†ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Eureka-Client-å‘-Eureka-Server-æ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"><span class="nav-number">3.2.</span> <span class="nav-text">Eureka Client å‘ Eureka Server æ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯-CAP-å®šç†ï¼ŸEureka-ä¸ºä»€ä¹ˆé€‰æ‹©-APï¼Ÿ"><span class="nav-number">3.3.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ CAP å®šç†ï¼ŸEureka ä¸ºä»€ä¹ˆé€‰æ‹© APï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Eureka-å’Œ-Zookeeperã€Nacos-çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">3.4.</span> <span class="nav-text">Eureka å’Œ Zookeeperã€Nacos çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Eureka-æœåŠ¡ä¸‹çº¿-å¥åº·æ£€æŸ¥æœºåˆ¶ï¼Ÿ"><span class="nav-number">3.5.</span> <span class="nav-text">Eureka æœåŠ¡ä¸‹çº¿ / å¥åº·æ£€æŸ¥æœºåˆ¶ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><span class="nav-number">3.6.</span> <span class="nav-text">Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ¶ˆæ¯é˜Ÿåˆ—"><span class="nav-number">4.</span> <span class="nav-text">æ¶ˆæ¯é˜Ÿåˆ—</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MQ-çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨-MQï¼Ÿ"><span class="nav-number">4.1.</span> <span class="nav-text">MQ çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ MQï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RabbitMQ-çš„äº¤æ¢æœºç±»å‹ï¼ˆDirect-Topic-Fanout-Headersï¼‰çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">4.2.</span> <span class="nav-text">RabbitMQ çš„äº¤æ¢æœºç±»å‹ï¼ˆDirect/Topic/Fanout/Headersï¼‰çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•ä¿è¯æ¶ˆæ¯-ä¸ä¸¢å¤±ï¼Ÿ"><span class="nav-number">4.3.</span> <span class="nav-text">å¦‚ä½•ä¿è¯æ¶ˆæ¯ ä¸ä¸¢å¤±ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•é¿å…æ¶ˆæ¯-é‡å¤æ¶ˆè´¹ï¼Ÿ"><span class="nav-number">4.4.</span> <span class="nav-text">å¦‚ä½•é¿å…æ¶ˆæ¯ é‡å¤æ¶ˆè´¹ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„-é¡ºåºæ€§ï¼Ÿ"><span class="nav-number">4.5.</span> <span class="nav-text">å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„ é¡ºåºæ€§ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç§¯å‹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"><span class="nav-number">4.6.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç§¯å‹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-AMQP-çš„é‡è¯•æœºåˆ¶ï¼Ÿ"><span class="nav-number">4.7.</span> <span class="nav-text">Spring AMQP çš„é‡è¯•æœºåˆ¶ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kafka-å’Œ-RabbitMQ-çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">4.8.</span> <span class="nav-text">Kafka å’Œ RabbitMQ çš„åŒºåˆ«ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mybatis"><span class="nav-number">5.</span> <span class="nav-text">Mybatis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis-çš„æ‰§è¡Œæµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"><span class="nav-number">5.1.</span> <span class="nav-text">MyBatis çš„æ‰§è¡Œæµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å’Œ-çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">5.2.</span> <span class="nav-text">#{} å’Œ ${} çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">5.3.</span> <span class="nav-text">MyBatis ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mapper-æ¥å£ä¸-XML-æ˜¯å¦‚ä½•ç»‘å®šçš„ï¼Ÿ"><span class="nav-number">5.4.</span> <span class="nav-text">Mapper æ¥å£ä¸ XML æ˜¯å¦‚ä½•ç»‘å®šçš„ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis-å¦‚ä½•å®ç°åŠ¨æ€-SQLï¼Ÿ"><span class="nav-number">5.5.</span> <span class="nav-text">MyBatis å¦‚ä½•å®ç°åŠ¨æ€ SQLï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis-æ€§èƒ½è°ƒä¼˜æ‰‹æ®µï¼Ÿ"><span class="nav-number">5.6.</span> <span class="nav-text">MyBatis æ€§èƒ½è°ƒä¼˜æ‰‹æ®µï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker"><span class="nav-number">6.</span> <span class="nav-text">Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-é•œåƒå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">6.1.</span> <span class="nav-text">Docker é•œåƒå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">6.2.</span> <span class="nav-text">å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dockerfile-å¸¸è§æŒ‡ä»¤ï¼ˆFROMã€RUNã€CMDã€ENTRYPOINTã€COPYã€WORKDIRâ€¦ï¼‰ï¼Ÿ"><span class="nav-number">6.3.</span> <span class="nav-text">Dockerfile å¸¸è§æŒ‡ä»¤ï¼ˆFROMã€RUNã€CMDã€ENTRYPOINTã€COPYã€WORKDIRâ€¦ï¼‰ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-é•œåƒçš„åˆ†å±‚ç»“æ„ï¼Ÿ"><span class="nav-number">6.4.</span> <span class="nav-text">Docker é•œåƒçš„åˆ†å±‚ç»“æ„ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•å‡å°‘é•œåƒä½“ç§¯ï¼Ÿ"><span class="nav-number">6.5.</span> <span class="nav-text">å¦‚ä½•å‡å°‘é•œåƒä½“ç§¯ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›ï¼Ÿ"><span class="nav-number">6.6.</span> <span class="nav-text">Docker ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Kubernetes-K8s"><span class="nav-number">7.</span> <span class="nav-text">Kubernetes (K8s)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#K8s-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿï¼ˆetcdã€API-Serverã€Controllerã€Schedulerã€Kubeletâ€¦ï¼‰"><span class="nav-number">7.1.</span> <span class="nav-text">K8s çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿï¼ˆetcdã€API Serverã€Controllerã€Schedulerã€Kubeletâ€¦ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Podã€Deploymentã€Serviceã€Ingress-çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">7.2.</span> <span class="nav-text">Podã€Deploymentã€Serviceã€Ingress çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pod-ä¸ºä»€ä¹ˆä¼šè¢«-OOMKilledï¼Ÿ"><span class="nav-number">7.3.</span> <span class="nav-text">Pod ä¸ºä»€ä¹ˆä¼šè¢« OOMKilledï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Liveness-Probe-å’Œ-Readiness-Probe-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><span class="nav-number">7.4.</span> <span class="nav-text">Liveness Probe å’Œ Readiness Probe æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#K8s-æ»šåŠ¨æ›´æ–°å’Œå›æ»šæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><span class="nav-number">7.5.</span> <span class="nav-text">K8s æ»šåŠ¨æ›´æ–°å’Œå›æ»šæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ConfigMap-å’Œ-Secret-çš„åŒºåˆ«ï¼Ÿ"><span class="nav-number">7.6.</span> <span class="nav-text">ConfigMap å’Œ Secret çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•æ’æŸ¥-Pod-CrashLoopBackOffï¼Ÿ"><span class="nav-number">7.7.</span> <span class="nav-text">å¦‚ä½•æ’æŸ¥ Pod CrashLoopBackOffï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HPAï¼ˆHorizontal-Pod-Autoscalerï¼‰å·¥ä½œåŸç†ï¼Ÿ"><span class="nav-number">7.8.</span> <span class="nav-text">HPAï¼ˆHorizontal Pod Autoscalerï¼‰å·¥ä½œåŸç†ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CI-CD"><span class="nav-number">8.</span> <span class="nav-text">CI/CD</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CI-CD-çš„æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"><span class="nav-number">8.1.</span> <span class="nav-text">CI/CD çš„æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¸¸è§çš„-CI-CD-å·¥å…·ï¼ˆJenkinsã€GitLab-CIã€ArgoCDï¼‰åŒºåˆ«ï¼Ÿ"><span class="nav-number">8.2.</span> <span class="nav-text">å¸¸è§çš„ CI/CD å·¥å…·ï¼ˆJenkinsã€GitLab CIã€ArgoCDï¼‰åŒºåˆ«ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åœ¨-CI-CD-ä¸­å¦‚ä½•åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ"><span class="nav-number">8.3.</span> <span class="nav-text">åœ¨ CI/CD ä¸­å¦‚ä½•åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•åœ¨-CI-CD-ä¸­å®ç°è“ç»¿å‘å¸ƒ-ç°åº¦å‘å¸ƒï¼Ÿ"><span class="nav-number">8.4.</span> <span class="nav-text">å¦‚ä½•åœ¨ CI/CD ä¸­å®ç°è“ç»¿å‘å¸ƒ / ç°åº¦å‘å¸ƒï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CI-CD-å¦‚ä½•ä¸-Dockerã€K8s-ç»“åˆï¼Ÿ"><span class="nav-number">8.5.</span> <span class="nav-text">CI/CD å¦‚ä½•ä¸ Dockerã€K8s ç»“åˆï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å›æ»šæœºåˆ¶ï¼Ÿ"><span class="nav-number">8.6.</span> <span class="nav-text">å¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å›æ»šæœºåˆ¶ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gateway"><span class="nav-number">9.</span> <span class="nav-text">Gateway</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Gateway-å·¥ä½œåŸç†ï¼Ÿ"><span class="nav-number">9.1.</span> <span class="nav-text">Spring Gateway å·¥ä½œåŸç†ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•åœ¨-Gateway-åšæƒé™æ ¡éªŒï¼Ÿ"><span class="nav-number">9.2.</span> <span class="nav-text">å¦‚ä½•åœ¨ Gateway åšæƒé™æ ¡éªŒï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Gateway-å¦‚ä½•å®ç°é™æµï¼Ÿ"><span class="nav-number">9.3.</span> <span class="nav-text">Gateway å¦‚ä½•å®ç°é™æµï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Security"><span class="nav-number">10.</span> <span class="nav-text">Security</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Security-çš„æ ¸å¿ƒåŸç†"><span class="nav-number">10.1.</span> <span class="nav-text">Spring Security çš„æ ¸å¿ƒåŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JWT-åœ¨-Spring-Security-ä¸­å¦‚ä½•é›†æˆï¼Ÿ"><span class="nav-number">10.2.</span> <span class="nav-text">JWT åœ¨ Spring Security ä¸­å¦‚ä½•é›†æˆï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åˆ†å¸ƒå¼äº‹åŠ¡"><span class="nav-number">11.</span> <span class="nav-text">åˆ†å¸ƒå¼äº‹åŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ"><span class="nav-number">11.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Seata-æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†ï¼Ÿ"><span class="nav-number">11.2.</span> <span class="nav-text">Seata æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#what-are-the-common-solutions-for-distributed-transactions"><span class="nav-number">11.3.</span> <span class="nav-text">what are the common solutions for distributed transactions?</span></a></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">HOME</a>
  
    <a href="/blog/archives" class="mobile-nav-link">ARCHIVES</a>
  
    <a href="/blog/categories" class="mobile-nav-link">CATEGORIES</a>
  
    <a href="/blog/about" class="mobile-nav-link">ABOUT</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2025 Arginsen&#39;s Blog All Rights Reserved.
      </div>
      <div class="site-credit">
        ID  <a href="https://lixupeng.cn" target="_blank">Arginsen</a>
      </div>
      <br>
      <div class="busuanzi-analytics">
        
        <span id="busuanzi_container_site_pv">
          æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
        <span class="post-meta-divider">|</span>
        <!-- <span id="busuanzi_container_site_uv">
          æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
        </span> -->
        <span class="post-count">å…¨ç«™å…± 384.1k å­—</span>
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        
      </div>
  </div> 
</footer>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>
<script src="/blog/js/bootstrap.js"></script>
<script src="/blog/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>


<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bb74e3da22205cadfa4f6e0a31a76ac4";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    


  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/blog/js/totop.js" async=""></script>
</body>
</html>
