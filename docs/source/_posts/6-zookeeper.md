---
title: ZooKeeper | 介绍
date: 2019-11-13 9:30:21
tags: zookeeper
photos:
    - /blog/img/zookeeper.jpeg
categories:
- notes
---

# ZooKeeper概述

+ ZooKeeper是一种分布式协调服务，用于管理大型主机。
+ Apache ZooKeeper是由集群（节点组）使用的一种服务，用于在自身之间协调，并通过稳健的同步技术维护共享数据。
+ ZooKeeper本身是一个分布式应用程序，为写入分布式应用程序提供服务。

<!--more-->
## 分布式应用

分布式应用可以在给定时间（同时）在网络中的多个系统上运行，通过协调它们以快速有效的方式完成特定任务。通常来说，对于复杂而耗时的任务，非分布式应用（运行在单个系统中）需要几个小时才能完成，而分布式应用通过使用所有系统涉及的计算能力可以在几分钟内完成。

通过将分布式应用配置为在更多系统上运行，可以进一步减少完成任务的时间。分布式应用正在运行的一组系统称为**集群**，而在集群中运行的每台机器被称为**节点**。

分布式应用有两部分， **Server（服务器）** 和 **Client（客户端）** 应用程序。服务器应用程序实际上是分布式的，并具有通用接口，以便客户端可以连接到集群中的任何服务器并获得相同的结果。 客户端应用程序是与分布式应用进行交互的工具。

## ZooKeeper服务

+ 命名服务 - 按名称标识集群中的节点。它类似于DNS，但仅对于节点。
+ 配置管理 - 加入节点的最近的和最新的系统配置信息。
+ 集群管理 - 实时地在集群和节点状态中加入/离开节点。
+ 选举算法 - 选举一个节点作为协调目的的leader。
+ 锁定和同步服务 - 在修改数据的同时锁定数据。此机制可帮助你在连接其他分布式应用程序（如Apache HBase）时进行自动故障恢复。
+ 高度可靠的数据注册表 - 即使在一个或几个节点关闭时也可以获得数据。

## ZooKeeper的好处

+ 简单的分布式协调过程
+ 同步 - 服务器进程之间的相互排斥和协作。此过程有助于Apache HBase进行配置管理。
+ 有序的消息
+ 序列化 - 根据特定规则对数据进行编码。确保应用程序运行一致。这种方法可以在MapReduce中用来协调队列以执行运行的线程。
+ 可靠性
+ 原子性 - 数据转移完全成功或完全失败，但没有事务是部分的。

# ZooKeeper架构

+ Client 客户端
分布式应用集群中的一个节点，从服务器访问信息。对于特定的时间间隔，每个客户端向服务器发送消息以使服务器知道客户端是活跃的。
类似地，当客户端连接时，服务器发送确认码。如果连接的服务器没有响应，客户端会自动将消息重定向到另一个服务器。

+ Server 服务器
ZooKeeper总体中的一个节点，为客户端提供所有的服务。向客户端发送确认码以告知服务器是活跃的。

+ Ensemble 服务器组
ZooKeeper服务器组。形成ensemble所需的最小节点数为3。

+ Leader 服务器节点(ZooKeeper Server Leader)
服务器节点，如果任何连接的节点失败，则执行自动恢复。Leader在服务启动时被选举。

+ Follower 服务器节点(ZooKeeper Server Follower)
跟随leader指令的服务器节点。 